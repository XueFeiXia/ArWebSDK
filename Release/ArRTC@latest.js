!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ArRTC=t():e.ArRTC=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=135)}([function(e,t,r){var n=r(1),i=r(7),o=r(15),a=r(11),c=r(18),s=function(e,t,r){var u,l,d,f,p=e&s.F,h=e&s.G,v=e&s.S,m=e&s.P,b=e&s.B,y=h?n:v?n[t]||(n[t]={}):(n[t]||{}).prototype,g=h?i:i[t]||(i[t]={}),_=g.prototype||(g.prototype={});for(u in h&&(r=t),r)d=((l=!p&&y&&void 0!==y[u])?y:r)[u],f=b&&l?c(d,n):m&&"function"==typeof d?c(Function.call,d):d,y&&a(y,u,d,e&s.U),g[u]!=d&&o(g,u,f),m&&_[u]!=d&&(_[u]=d)};n.core=i,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){var n=r(4);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){var n=r(51)("wks"),i=r(30),o=r(1).Symbol,a="function"==typeof o;(e.exports=function(e){return n[e]||(n[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=n},function(e,t,r){var n=r(20),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t){var r=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=r)},function(e,t,r){e.exports=!r(2)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,r){var n=r(3),i=r(91),o=r(27),a=Object.defineProperty;t.f=r(8)?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(25);e.exports=function(e){return Object(n(e))}},function(e,t,r){var n=r(1),i=r(15),o=r(14),a=r(30)("src"),c=r(140),s=(""+c).split("toString");r(7).inspectSource=function(e){return c.call(e)},(e.exports=function(e,t,r,c){var u="function"==typeof r;u&&(o(r,"name")||i(r,"name",t)),e[t]!==r&&(u&&(o(r,a)||i(r,a,e[t]?""+e[t]:s.join(String(t)))),e===n?e[t]=r:c?e[t]?e[t]=r:i(e,t,r):(delete e[t],i(e,t,r)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||c.call(this)}))},function(e,t,r){var n=r(0),i=r(2),o=r(25),a=/"/g,c=function(e,t,r,n){var i=String(o(e)),c="<"+t;return""!==r&&(c+=" "+r+'="'+String(n).replace(a,"&quot;")+'"'),c+">"+i+"</"+t+">"};e.exports=function(e,t){var r={};r[e]=t(c),n(n.P+n.F*i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",r)}},function(e,t,r){"use strict";var n=r(124),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function a(e){return void 0===e}function c(e){return null!==e&&"object"==typeof e}function s(e){return"[object Function]"===i.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:s,isStream:function(e){return c(e)&&s(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:u,merge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]=r}for(var n=0,i=arguments.length;n<i;n++)u(arguments[n],r);return t},deepMerge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]="object"==typeof r?e({},r):r}for(var n=0,i=arguments.length;n<i;n++)u(arguments[n],r);return t},extend:function(e,t,r){return u(t,(function(t,i){e[i]=r&&"function"==typeof t?n(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(9),i=r(29);e.exports=r(8)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(46),i=r(25);e.exports=function(e){return n(i(e))}},function(e,t,r){"use strict";var n=r(2);e.exports=function(e,t){return!!e&&n((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,r){var n=r(19);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(47),i=r(29),o=r(16),a=r(27),c=r(14),s=r(91),u=Object.getOwnPropertyDescriptor;t.f=r(8)?u:function(e,t){if(e=o(e),t=a(t,!0),s)try{return u(e,t)}catch(e){}if(c(e,t))return i(!n.f.call(e,t),e[t])}},function(e,t,r){var n=r(0),i=r(7),o=r(2);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*o((function(){r(1)})),"Object",a)}},function(e,t,r){var n=r(18),i=r(46),o=r(10),a=r(6),c=r(107);e.exports=function(e,t){var r=1==e,s=2==e,u=3==e,l=4==e,d=6==e,f=5==e||d,p=t||c;return function(t,c,h){for(var v,m,b=o(t),y=i(b),g=n(c,h,3),_=a(y.length),S=0,E=r?p(t,_):s?p(t,0):void 0;_>S;S++)if((f||S in y)&&(m=g(v=y[S],S,b),e))if(r)E[S]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return S;case 2:E.push(v)}else if(l)return!1;return d?-1:u||l?l:E}}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){"use strict";if(r(8)){var n=r(31),i=r(1),o=r(2),a=r(0),c=r(62),s=r(87),u=r(18),l=r(43),d=r(29),f=r(15),p=r(44),h=r(20),v=r(6),m=r(118),b=r(33),y=r(27),g=r(14),_=r(48),S=r(4),E=r(10),T=r(79),w=r(34),O=r(36),C=r(35).f,P=r(81),R=r(30),I=r(5),N=r(23),A=r(52),k=r(49),D=r(83),j=r(41),x=r(55),M=r(42),L=r(82),F=r(109),U=r(9),V=r(21),B=U.f,G=V.f,W=i.RangeError,H=i.TypeError,K=i.Uint8Array,J=Array.prototype,z=s.ArrayBuffer,Y=s.DataView,X=N(0),q=N(2),$=N(3),Q=N(4),Z=N(5),ee=N(6),te=A(!0),re=A(!1),ne=D.values,ie=D.keys,oe=D.entries,ae=J.lastIndexOf,ce=J.reduce,se=J.reduceRight,ue=J.join,le=J.sort,de=J.slice,fe=J.toString,pe=J.toLocaleString,he=I("iterator"),ve=I("toStringTag"),me=R("typed_constructor"),be=R("def_constructor"),ye=c.CONSTR,ge=c.TYPED,_e=c.VIEW,Se=N(1,(function(e,t){return Ce(k(e,e[be]),t)})),Ee=o((function(){return 1===new K(new Uint16Array([1]).buffer)[0]})),Te=!!K&&!!K.prototype.set&&o((function(){new K(1).set({})})),we=function(e,t){var r=h(e);if(r<0||r%t)throw W("Wrong offset!");return r},Oe=function(e){if(S(e)&&ge in e)return e;throw H(e+" is not a typed array!")},Ce=function(e,t){if(!S(e)||!(me in e))throw H("It is not a typed array constructor!");return new e(t)},Pe=function(e,t){return Re(k(e,e[be]),t)},Re=function(e,t){for(var r=0,n=t.length,i=Ce(e,n);n>r;)i[r]=t[r++];return i},Ie=function(e,t,r){B(e,t,{get:function(){return this._d[r]}})},Ne=function(e){var t,r,n,i,o,a,c=E(e),s=arguments.length,l=s>1?arguments[1]:void 0,d=void 0!==l,f=P(c);if(null!=f&&!T(f)){for(a=f.call(c),n=[],t=0;!(o=a.next()).done;t++)n.push(o.value);c=n}for(d&&s>2&&(l=u(l,arguments[2],2)),t=0,r=v(c.length),i=Ce(this,r);r>t;t++)i[t]=d?l(c[t],t):c[t];return i},Ae=function(){for(var e=0,t=arguments.length,r=Ce(this,t);t>e;)r[e]=arguments[e++];return r},ke=!!K&&o((function(){pe.call(new K(1))})),De=function(){return pe.apply(ke?de.call(Oe(this)):Oe(this),arguments)},je={copyWithin:function(e,t){return F.call(Oe(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return Q(Oe(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return L.apply(Oe(this),arguments)},filter:function(e){return Pe(this,q(Oe(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return Z(Oe(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Oe(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){X(Oe(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return re(Oe(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Oe(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ue.apply(Oe(this),arguments)},lastIndexOf:function(e){return ae.apply(Oe(this),arguments)},map:function(e){return Se(Oe(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return ce.apply(Oe(this),arguments)},reduceRight:function(e){return se.apply(Oe(this),arguments)},reverse:function(){for(var e,t=Oe(this).length,r=Math.floor(t/2),n=0;n<r;)e=this[n],this[n++]=this[--t],this[t]=e;return this},some:function(e){return $(Oe(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return le.call(Oe(this),e)},subarray:function(e,t){var r=Oe(this),n=r.length,i=b(e,n);return new(k(r,r[be]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,v((void 0===t?n:b(t,n))-i))}},xe=function(e,t){return Pe(this,de.call(Oe(this),e,t))},Me=function(e){Oe(this);var t=we(arguments[1],1),r=this.length,n=E(e),i=v(n.length),o=0;if(i+t>r)throw W("Wrong length!");for(;o<i;)this[t+o]=n[o++]},Le={entries:function(){return oe.call(Oe(this))},keys:function(){return ie.call(Oe(this))},values:function(){return ne.call(Oe(this))}},Fe=function(e,t){return S(e)&&e[ge]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Ue=function(e,t){return Fe(e,t=y(t,!0))?d(2,e[t]):G(e,t)},Ve=function(e,t,r){return!(Fe(e,t=y(t,!0))&&S(r)&&g(r,"value"))||g(r,"get")||g(r,"set")||r.configurable||g(r,"writable")&&!r.writable||g(r,"enumerable")&&!r.enumerable?B(e,t,r):(e[t]=r.value,e)};ye||(V.f=Ue,U.f=Ve),a(a.S+a.F*!ye,"Object",{getOwnPropertyDescriptor:Ue,defineProperty:Ve}),o((function(){fe.call({})}))&&(fe=pe=function(){return ue.call(this)});var Be=p({},je);p(Be,Le),f(Be,he,Le.values),p(Be,{slice:xe,set:Me,constructor:function(){},toString:fe,toLocaleString:De}),Ie(Be,"buffer","b"),Ie(Be,"byteOffset","o"),Ie(Be,"byteLength","l"),Ie(Be,"length","e"),B(Be,ve,{get:function(){return this[ge]}}),e.exports=function(e,t,r,s){var u=e+((s=!!s)?"Clamped":"")+"Array",d="get"+e,p="set"+e,h=i[u],b=h||{},y=h&&O(h),g=!h||!c.ABV,E={},T=h&&h.prototype,P=function(e,r){B(e,r,{get:function(){return function(e,r){var n=e._d;return n.v[d](r*t+n.o,Ee)}(this,r)},set:function(e){return function(e,r,n){var i=e._d;s&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),i.v[p](r*t+i.o,n,Ee)}(this,r,e)},enumerable:!0})};g?(h=r((function(e,r,n,i){l(e,h,u,"_d");var o,a,c,s,d=0,p=0;if(S(r)){if(!(r instanceof z||"ArrayBuffer"==(s=_(r))||"SharedArrayBuffer"==s))return ge in r?Re(h,r):Ne.call(h,r);o=r,p=we(n,t);var b=r.byteLength;if(void 0===i){if(b%t)throw W("Wrong length!");if((a=b-p)<0)throw W("Wrong length!")}else if((a=v(i)*t)+p>b)throw W("Wrong length!");c=a/t}else c=m(r),o=new z(a=c*t);for(f(e,"_d",{b:o,o:p,l:a,e:c,v:new Y(o)});d<c;)P(e,d++)})),T=h.prototype=w(Be),f(T,"constructor",h)):o((function(){h(1)}))&&o((function(){new h(-1)}))&&x((function(e){new h,new h(null),new h(1.5),new h(e)}),!0)||(h=r((function(e,r,n,i){var o;return l(e,h,u),S(r)?r instanceof z||"ArrayBuffer"==(o=_(r))||"SharedArrayBuffer"==o?void 0!==i?new b(r,we(n,t),i):void 0!==n?new b(r,we(n,t)):new b(r):ge in r?Re(h,r):Ne.call(h,r):new b(m(r))})),X(y!==Function.prototype?C(b).concat(C(y)):C(b),(function(e){e in h||f(h,e,b[e])})),h.prototype=T,n||(T.constructor=h));var R=T[he],I=!!R&&("values"==R.name||null==R.name),N=Le.values;f(h,me,!0),f(T,ge,u),f(T,_e,!0),f(T,be,h),(s?new h(1)[ve]==u:ve in T)||B(T,ve,{get:function(){return u}}),E[u]=h,a(a.G+a.W+a.F*(h!=b),E),a(a.S,u,{BYTES_PER_ELEMENT:t}),a(a.S+a.F*o((function(){b.of.call(h,1)})),u,{from:Ne,of:Ae}),"BYTES_PER_ELEMENT"in T||f(T,"BYTES_PER_ELEMENT",t),a(a.P,u,je),M(u),a(a.P+a.F*Te,u,{set:Me}),a(a.P+a.F*!I,u,Le),n||T.toString==fe||(T.toString=fe),a(a.P+a.F*o((function(){new h(1).slice()})),u,{slice:xe}),a(a.P+a.F*(o((function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()}))||!o((function(){T.toLocaleString.call([1,2])}))),u,{toLocaleString:De}),j[u]=I?R:N,n||I||f(T,he,N)}}else e.exports=function(){}},function(e,t,r){var n=r(4);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var n=r(30)("meta"),i=r(4),o=r(14),a=r(9).f,c=0,s=Object.isExtensible||function(){return!0},u=!r(2)((function(){return s(Object.preventExtensions({}))})),l=function(e){a(e,n,{value:{i:"O"+ ++c,w:{}}})},d=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!s(e))return"F";if(!t)return"E";l(e)}return e[n].i},getWeak:function(e,t){if(!o(e,n)){if(!s(e))return!0;if(!t)return!1;l(e)}return e[n].w},onFreeze:function(e){return u&&d.NEED&&s(e)&&!o(e,n)&&l(e),e}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t){e.exports=!1},function(e,t,r){var n=r(93),i=r(66);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){var n=r(20),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=n(e))<0?i(e+t,0):o(e,t)}},function(e,t,r){var n=r(3),i=r(94),o=r(66),a=r(65)("IE_PROTO"),c=function(){},s=function(){var e,t=r(63)("iframe"),n=o.length;for(t.style.display="none",r(67).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),s=e.F;n--;)delete s.prototype[o[n]];return s()};e.exports=Object.create||function(e,t){var r;return null!==e?(c.prototype=n(e),r=new c,c.prototype=null,r[a]=e):r=s(),void 0===t?r:i(r,t)}},function(e,t,r){var n=r(93),i=r(66).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){var n=r(14),i=r(10),o=r(65)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,r){var n=r(5)("unscopables"),i=Array.prototype;null==i[n]&&r(15)(i,n,{}),e.exports=function(e){i[n][e]=!0}},function(e,t,r){var n=r(4);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,r){var n=r(9).f,i=r(14),o=r(5)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},function(e,t,r){var n=r(0),i=r(25),o=r(2),a=r(69),c="["+a+"]",s=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),l=function(e,t,r){var i={},c=o((function(){return!!a[e]()||"​"!="​"[e]()})),s=i[e]=c?t(d):a[e];r&&(i[r]=s),n(n.P+n.F*c,"String",i)},d=l.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(s,"")),2&t&&(e=e.replace(u,"")),e};e.exports=l},function(e,t){e.exports={}},function(e,t,r){"use strict";var n=r(1),i=r(9),o=r(8),a=r(5)("species");e.exports=function(e){var t=n[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(11);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},function(e,t,r){"use strict";var n={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},n.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},n.getDescription=function(e){var t=n.splitSections(e);return t&&t[0]},n.getMediaSections=function(e){var t=n.splitSections(e);return t.shift(),t},n.matchPrefix=function(e,t){return n.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},n.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":r.relatedAddress=t[n+1];break;case"rport":r.relatedPort=parseInt(t[n+1],10);break;case"tcptype":r.tcpType=t[n+1];break;case"ufrag":r.ufrag=t[n+1],r.usernameFragment=t[n+1];break;default:r[t[n]]=t[n+1]}return r},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},n.parseIceOptions=function(e){return e.substr(14).split(" ")},n.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},n.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n"},n.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},n.parseFmtp=function(e){for(var t,r={},n=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<n.length;i++)r[(t=n[i].trim().split("="))[0].trim()]=t[1];return r},n.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t)})),t+="a=fmtp:"+r+" "+n.join(";")+"\r\n"}return t},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},n.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(r.attribute=e.substr(t+1,n-t-1),r.value=e.substr(n+1)):r.attribute=e.substr(t+1),r},n.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},n.getMid=function(e){var t=n.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},n.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},n.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:n.matchPrefix(e+t,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),r},n.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},n.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?n.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},n.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},n.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},n.getCryptoParameters=function(e,t){return n.matchPrefix(e+t,"a=crypto:").map(n.parseCryptoLine)},n.getIceParameters=function(e,t){var r=n.matchPrefix(e+t,"a=ice-ufrag:")[0],i=n.matchPrefix(e+t,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substr(12),password:i.substr(10)}:null},n.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=n.splitLines(e)[0].split(" "),i=3;i<r.length;i++){var o=r[i],a=n.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var c=n.parseRtpMap(a),s=n.matchPrefix(e,"a=fmtp:"+o+" ");switch(c.parameters=s.length?n.parseFmtp(s[0]):{},c.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(n.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase())}}}return n.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(n.parseExtmap(e))})),t},n.writeRtpDescription=function(e,t){var r="";r+="m="+e+" ",r+=t.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){r+=n.writeRtpMap(e),r+=n.writeFmtp(e),r+=n.writeRtcpFb(e)}));var i=0;return t.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),r+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){r+=n.writeExtmap(e)})),r},n.parseRtpEncodingParameters=function(e){var t,r=[],i=n.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),c=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),s=c.length>0&&c[0].ssrc,u=n.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===s&&(t=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)};s&&t&&(n.rtx={ssrc:t}),r.push(n),o&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:s,mechanism:a?"red+ulpfec":"red"},r.push(n))}})),0===r.length&&s&&r.push({ssrc:s});var l=n.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=l}))),r},n.parseRtcpParameters=function(e){var t={},r=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(t.cname=r.value,t.ssrc=r.ssrc);var i=n.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=n.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},n.parseMsid=function(e){var t,r=n.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(t=r[0].substr(7).split(" "))[0],track:t[1]};var i=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},n.parseSctpDescription=function(e){var t,r=n.parseMLine(e),i=n.matchPrefix(e,"a=max-message-size:");i.length>0&&(t=parseInt(i[0].substr(19),10)),isNaN(t)&&(t=65536);var o=n.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:r.fmt,maxMessageSize:t};if(n.matchPrefix(e,"a=sctpmap:").length>0){var a=n.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:t}}},n.writeSctpDescription=function(e,t){var r=[];return r="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&r.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),r.join("")},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(e,t,r){var i=void 0!==t?t:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||n.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(e,t,r,i){var o=n.writeRtpDescription(e.kind,t);if(o+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),o},n.getDirection=function(e,t){for(var r=n.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return t?n.getDirection(t):"sendrecv"},n.getKind=function(e){return n.splitLines(e)[0].split(" ")[0].substr(2)},n.isRejected=function(e){return"0"===e.split(" ",2)[1]},n.parseMLine=function(e){var t=n.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},n.parseOLine=function(e){var t=n.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},n.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=n.splitLines(e),r=0;r<t.length;r++)if(t[r].length<2||"="!==t[r].charAt(1))return!1;return!0},e.exports=n},function(e,t,r){var n=r(24);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){var n=r(24),i=r(5)("toStringTag"),o="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:o?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,r){var n=r(3),i=r(19),o=r(5)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||null==(r=n(a)[o])?t:i(r)}},function(e,t,r){e.exports=r(322)},function(e,t,r){var n=r(7),i=r(1),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(31)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,r){var n=r(16),i=r(6),o=r(33);e.exports=function(e){return function(t,r,a){var c,s=n(t),u=i(s.length),l=o(a,u);if(e&&r!=r){for(;u>l;)if((c=s[l++])!=c)return!0}else for(;u>l;l++)if((e||l in s)&&s[l]===r)return e||l||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(24);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(5)("iterator"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o=[7],a=o[n]();a.next=function(){return{done:r=!0}},o[n]=function(){return a},e(o)}catch(e){}return r}},function(e,t,r){"use strict";var n=r(3);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,r){"use strict";var n=r(48),i=RegExp.prototype.exec;e.exports=function(e,t){var r=e.exec;if("function"==typeof r){var o=r.call(e,t);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,r){"use strict";r(111);var n=r(11),i=r(15),o=r(2),a=r(25),c=r(5),s=r(84),u=c("species"),l=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();e.exports=function(e,t,r){var f=c(e),p=!o((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),h=p?!o((function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[u]=function(){return r}),r[f](""),!t})):void 0;if(!p||!h||"replace"===e&&!l||"split"===e&&!d){var v=/./[f],m=r(a,f,""[e],(function(e,t,r,n,i){return t.exec===s?p&&!i?{done:!0,value:v.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}})),b=m[0],y=m[1];n(String.prototype,e,b),i(RegExp.prototype,f,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}}},function(e,t,r){var n=r(18),i=r(106),o=r(79),a=r(3),c=r(6),s=r(81),u={},l={};(t=e.exports=function(e,t,r,d,f){var p,h,v,m,b=f?function(){return e}:s(e),y=n(r,d,t?2:1),g=0;if("function"!=typeof b)throw TypeError(e+" is not iterable!");if(o(b)){for(p=c(e.length);p>g;g++)if((m=t?y(a(h=e[g])[0],h[1]):y(e[g]))===u||m===l)return m}else for(v=b.call(e);!(h=v.next()).done;)if((m=i(v,y,h.value,t))===u||m===l)return m}).BREAK=u,t.RETURN=l},function(e,t,r){var n=r(1).navigator;e.exports=n&&n.userAgent||""},function(e,t,r){"use strict";var n=r(1),i=r(0),o=r(11),a=r(44),c=r(28),s=r(59),u=r(43),l=r(4),d=r(2),f=r(55),p=r(39),h=r(70);e.exports=function(e,t,r,v,m,b){var y=n[e],g=y,_=m?"set":"add",S=g&&g.prototype,E={},T=function(e){var t=S[e];o(S,e,"delete"==e||"has"==e?function(e){return!(b&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return b&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof g&&(b||S.forEach&&!d((function(){(new g).entries().next()})))){var w=new g,O=w[_](b?{}:-0,1)!=w,C=d((function(){w.has(1)})),P=f((function(e){new g(e)})),R=!b&&d((function(){for(var e=new g,t=5;t--;)e[_](t,t);return!e.has(-0)}));P||((g=t((function(t,r){u(t,g,e);var n=h(new y,t,g);return null!=r&&s(r,m,n[_],n),n}))).prototype=S,S.constructor=g),(C||R)&&(T("delete"),T("has"),m&&T("get")),(R||O)&&T(_),b&&S.clear&&delete S.clear}else g=v.getConstructor(t,e,m,_),a(g.prototype,r),c.NEED=!0;return p(g,e),E[e]=g,i(i.G+i.W+i.F*(g!=y),E),b||v.setStrong(g,e,m),g}},function(e,t,r){for(var n,i=r(1),o=r(15),a=r(30),c=a("typed_array"),s=a("view"),u=!(!i.ArrayBuffer||!i.DataView),l=u,d=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d<9;)(n=i[f[d++]])?(o(n.prototype,c,!0),o(n.prototype,s,!0)):l=!1;e.exports={ABV:u,CONSTR:l,TYPED:c,VIEW:s}},function(e,t,r){var n=r(4),i=r(1).document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,r){t.f=r(5)},function(e,t,r){var n=r(51)("keys"),i=r(30);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(1).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(4),i=r(3),o=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=r(18)(Function.call,r(21).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return o(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:o}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,r){var n=r(4),i=r(68).set;e.exports=function(e,t,r){var o,a=t.constructor;return a!==r&&"function"==typeof a&&(o=a.prototype)!==r.prototype&&n(o)&&i&&i(e,o),e}},function(e,t,r){"use strict";var n=r(20),i=r(25);e.exports=function(e){var t=String(i(this)),r="",o=n(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(r+=t);return r}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var r=Math.expm1;e.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:r},function(e,t,r){var n=r(20),i=r(25);e.exports=function(e){return function(t,r){var o,a,c=String(i(t)),s=n(r),u=c.length;return s<0||s>=u?e?"":void 0:(o=c.charCodeAt(s))<55296||o>56319||s+1===u||(a=c.charCodeAt(s+1))<56320||a>57343?e?c.charAt(s):o:e?c.slice(s,s+2):a-56320+(o-55296<<10)+65536}}},function(e,t,r){"use strict";var n=r(31),i=r(0),o=r(11),a=r(15),c=r(41),s=r(105),u=r(39),l=r(36),d=r(5)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,r,h,v,m,b){s(r,t,h);var y,g,_,S=function(e){if(!f&&e in O)return O[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},E=t+" Iterator",T="values"==v,w=!1,O=e.prototype,C=O[d]||O["@@iterator"]||v&&O[v],P=C||S(v),R=v?T?S("entries"):P:void 0,I="Array"==t&&O.entries||C;if(I&&(_=l(I.call(new e)))!==Object.prototype&&_.next&&(u(_,E,!0),n||"function"==typeof _[d]||a(_,d,p)),T&&C&&"values"!==C.name&&(w=!0,P=function(){return C.call(this)}),n&&!b||!f&&!w&&O[d]||a(O,d,P),c[t]=P,c[E]=p,v)if(y={values:T?P:S("values"),keys:m?P:S("keys"),entries:R},b)for(g in y)g in O||o(O,g,y[g]);else i(i.P+i.F*(f||w),t,y);return y}},function(e,t,r){var n=r(77),i=r(25);e.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(e))}},function(e,t,r){var n=r(4),i=r(24),o=r(5)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,r){var n=r(5)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,r){var n=r(41),i=r(5)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[i]===e)}},function(e,t,r){"use strict";var n=r(9),i=r(29);e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},function(e,t,r){var n=r(48),i=r(5)("iterator"),o=r(41);e.exports=r(7).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[n(e)]}},function(e,t,r){"use strict";var n=r(10),i=r(33),o=r(6);e.exports=function(e){for(var t=n(this),r=o(t.length),a=arguments.length,c=i(a>1?arguments[1]:void 0,r),s=a>2?arguments[2]:void 0,u=void 0===s?r:i(s,r);u>c;)t[c++]=e;return t}},function(e,t,r){"use strict";var n=r(37),i=r(110),o=r(41),a=r(16);e.exports=r(75)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(e,t,r){"use strict";var n,i,o=r(56),a=RegExp.prototype.exec,c=String.prototype.replace,s=a,u=(n=/a/,i=/b*/g,a.call(n,"a"),a.call(i,"a"),0!==n.lastIndex||0!==i.lastIndex),l=void 0!==/()??/.exec("")[1];(u||l)&&(s=function(e){var t,r,n,i,s=this;return l&&(r=new RegExp("^"+s.source+"$(?!\\s)",o.call(s))),u&&(t=s.lastIndex),n=a.call(s,e),u&&n&&(s.lastIndex=s.global?n.index+n[0].length:t),l&&n&&n.length>1&&c.call(n[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)})),n}),e.exports=s},function(e,t,r){"use strict";var n=r(74)(!0);e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},function(e,t,r){var n,i,o,a=r(18),c=r(99),s=r(67),u=r(63),l=r(1),d=l.process,f=l.setImmediate,p=l.clearImmediate,h=l.MessageChannel,v=l.Dispatch,m=0,b={},y=function(){var e=+this;if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},g=function(e){y.call(e.data)};f&&p||(f=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return b[++m]=function(){c("function"==typeof e?e:Function(e),t)},n(m),m},p=function(e){delete b[e]},"process"==r(24)(d)?n=function(e){d.nextTick(a(y,e,1))}:v&&v.now?n=function(e){v.now(a(y,e,1))}:h?(o=(i=new h).port2,i.port1.onmessage=g,n=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(e){l.postMessage(e+"","*")},l.addEventListener("message",g,!1)):n="onreadystatechange"in u("script")?function(e){s.appendChild(u("script")).onreadystatechange=function(){s.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:f,clear:p}},function(e,t,r){"use strict";var n=r(1),i=r(8),o=r(31),a=r(62),c=r(15),s=r(44),u=r(2),l=r(43),d=r(20),f=r(6),p=r(118),h=r(35).f,v=r(9).f,m=r(82),b=r(39),y=n.ArrayBuffer,g=n.DataView,_=n.Math,S=n.RangeError,E=n.Infinity,T=y,w=_.abs,O=_.pow,C=_.floor,P=_.log,R=_.LN2,I=i?"_b":"buffer",N=i?"_l":"byteLength",A=i?"_o":"byteOffset";function k(e,t,r){var n,i,o,a=new Array(r),c=8*r-t-1,s=(1<<c)-1,u=s>>1,l=23===t?O(2,-24)-O(2,-77):0,d=0,f=e<0||0===e&&1/e<0?1:0;for((e=w(e))!=e||e===E?(i=e!=e?1:0,n=s):(n=C(P(e)/R),e*(o=O(2,-n))<1&&(n--,o*=2),(e+=n+u>=1?l/o:l*O(2,1-u))*o>=2&&(n++,o/=2),n+u>=s?(i=0,n=s):n+u>=1?(i=(e*o-1)*O(2,t),n+=u):(i=e*O(2,u-1)*O(2,t),n=0));t>=8;a[d++]=255&i,i/=256,t-=8);for(n=n<<t|i,c+=t;c>0;a[d++]=255&n,n/=256,c-=8);return a[--d]|=128*f,a}function D(e,t,r){var n,i=8*r-t-1,o=(1<<i)-1,a=o>>1,c=i-7,s=r-1,u=e[s--],l=127&u;for(u>>=7;c>0;l=256*l+e[s],s--,c-=8);for(n=l&(1<<-c)-1,l>>=-c,c+=t;c>0;n=256*n+e[s],s--,c-=8);if(0===l)l=1-a;else{if(l===o)return n?NaN:u?-E:E;n+=O(2,t),l-=a}return(u?-1:1)*n*O(2,l-t)}function j(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function x(e){return[255&e]}function M(e){return[255&e,e>>8&255]}function L(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function F(e){return k(e,52,8)}function U(e){return k(e,23,4)}function V(e,t,r){v(e.prototype,t,{get:function(){return this[r]}})}function B(e,t,r,n){var i=p(+r);if(i+t>e[N])throw S("Wrong index!");var o=e[I]._b,a=i+e[A],c=o.slice(a,a+t);return n?c:c.reverse()}function G(e,t,r,n,i,o){var a=p(+r);if(a+t>e[N])throw S("Wrong index!");for(var c=e[I]._b,s=a+e[A],u=n(+i),l=0;l<t;l++)c[s+l]=u[o?l:t-l-1]}if(a.ABV){if(!u((function(){y(1)}))||!u((function(){new y(-1)}))||u((function(){return new y,new y(1.5),new y(NaN),"ArrayBuffer"!=y.name}))){for(var W,H=(y=function(e){return l(this,y),new T(p(e))}).prototype=T.prototype,K=h(T),J=0;K.length>J;)(W=K[J++])in y||c(y,W,T[W]);o||(H.constructor=y)}var z=new g(new y(2)),Y=g.prototype.setInt8;z.setInt8(0,2147483648),z.setInt8(1,2147483649),!z.getInt8(0)&&z.getInt8(1)||s(g.prototype,{setInt8:function(e,t){Y.call(this,e,t<<24>>24)},setUint8:function(e,t){Y.call(this,e,t<<24>>24)}},!0)}else y=function(e){l(this,y,"ArrayBuffer");var t=p(e);this._b=m.call(new Array(t),0),this[N]=t},g=function(e,t,r){l(this,g,"DataView"),l(e,y,"DataView");var n=e[N],i=d(t);if(i<0||i>n)throw S("Wrong offset!");if(i+(r=void 0===r?n-i:f(r))>n)throw S("Wrong length!");this[I]=e,this[A]=i,this[N]=r},i&&(V(y,"byteLength","_l"),V(g,"buffer","_b"),V(g,"byteLength","_l"),V(g,"byteOffset","_o")),s(g.prototype,{getInt8:function(e){return B(this,1,e)[0]<<24>>24},getUint8:function(e){return B(this,1,e)[0]},getInt16:function(e){var t=B(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=B(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return j(B(this,4,e,arguments[1]))},getUint32:function(e){return j(B(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return D(B(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return D(B(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){G(this,1,e,x,t)},setUint8:function(e,t){G(this,1,e,x,t)},setInt16:function(e,t){G(this,2,e,M,t,arguments[2])},setUint16:function(e,t){G(this,2,e,M,t,arguments[2])},setInt32:function(e,t){G(this,4,e,L,t,arguments[2])},setUint32:function(e,t){G(this,4,e,L,t,arguments[2])},setFloat32:function(e,t){G(this,4,e,U,t,arguments[2])},setFloat64:function(e,t){G(this,8,e,F,t,arguments[2])}});b(y,"ArrayBuffer"),b(g,"DataView"),c(g.prototype,a.VIEW,!0),t.ArrayBuffer=y,t.DataView=g},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){e.exports=!r(123)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,r){e.exports=!r(8)&&!r(2)((function(){return 7!=Object.defineProperty(r(63)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,r){var n=r(1),i=r(7),o=r(31),a=r(64),c=r(9).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||c(t,e,{value:a.f(e)})}},function(e,t,r){var n=r(14),i=r(16),o=r(52)(!1),a=r(65)("IE_PROTO");e.exports=function(e,t){var r,c=i(e),s=0,u=[];for(r in c)r!=a&&n(c,r)&&u.push(r);for(;t.length>s;)n(c,r=t[s++])&&(~o(u,r)||u.push(r));return u}},function(e,t,r){var n=r(9),i=r(3),o=r(32);e.exports=r(8)?Object.defineProperties:function(e,t){i(e);for(var r,a=o(t),c=a.length,s=0;c>s;)n.f(e,r=a[s++],t[r]);return e}},function(e,t,r){var n=r(16),i=r(35).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(n(e))}},function(e,t,r){"use strict";var n=r(8),i=r(32),o=r(53),a=r(47),c=r(10),s=r(46),u=Object.assign;e.exports=!u||r(2)((function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach((function(e){t[e]=e})),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n}))?function(e,t){for(var r=c(e),u=arguments.length,l=1,d=o.f,f=a.f;u>l;)for(var p,h=s(arguments[l++]),v=d?i(h).concat(d(h)):i(h),m=v.length,b=0;m>b;)p=v[b++],n&&!f.call(h,p)||(r[p]=h[p]);return r}:u},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,r){"use strict";var n=r(19),i=r(4),o=r(99),a=[].slice,c={},s=function(e,t,r){if(!(t in c)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";c[t]=Function("F,a","return new F("+n.join(",")+")")}return c[t](e,r)};e.exports=Function.bind||function(e){var t=n(this),r=a.call(arguments,1),c=function(){var n=r.concat(a.call(arguments));return this instanceof c?s(t,n.length,n):o(t,n,e)};return i(t.prototype)&&(c.prototype=t.prototype),c}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(1).parseInt,i=r(40).trim,o=r(69),a=/^[-+]?0[xX]/;e.exports=8!==n(o+"08")||22!==n(o+"0x16")?function(e,t){var r=i(String(e),3);return n(r,t>>>0||(a.test(r)?16:10))}:n},function(e,t,r){var n=r(1).parseFloat,i=r(40).trim;e.exports=1/n(r(69)+"-0")!=-1/0?function(e){var t=i(String(e),3),r=n(t);return 0===r&&"-"==t.charAt(0)?-0:r}:n},function(e,t,r){var n=r(24);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=n(e))throw TypeError(t);return+e}},function(e,t,r){var n=r(4),i=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&i(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,r){"use strict";var n=r(34),i=r(29),o=r(39),a={};r(15)(a,r(5)("iterator"),(function(){return this})),e.exports=function(e,t,r){e.prototype=n(a,{next:i(1,r)}),o(e,t+" Iterator")}},function(e,t,r){var n=r(3);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},function(e,t,r){var n=r(230);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,r){var n=r(19),i=r(10),o=r(46),a=r(6);e.exports=function(e,t,r,c,s){n(t);var u=i(e),l=o(u),d=a(u.length),f=s?d-1:0,p=s?-1:1;if(r<2)for(;;){if(f in l){c=l[f],f+=p;break}if(f+=p,s?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;s?f>=0:d>f;f+=p)f in l&&(c=t(c,l[f],f,u));return c}},function(e,t,r){"use strict";var n=r(10),i=r(33),o=r(6);e.exports=[].copyWithin||function(e,t){var r=n(this),a=o(r.length),c=i(e,a),s=i(t,a),u=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===u?a:i(u,a))-s,a-c),d=1;for(s<c&&c<s+l&&(d=-1,s+=l-1,c+=l-1);l-- >0;)s in r?r[c]=r[s]:delete r[c],c+=d,s+=d;return r}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){"use strict";var n=r(84);r(0)({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},function(e,t,r){r(8)&&"g"!=/./g.flags&&r(9).f(RegExp.prototype,"flags",{configurable:!0,get:r(56)})},function(e,t,r){"use strict";var n,i,o,a,c=r(31),s=r(1),u=r(18),l=r(48),d=r(0),f=r(4),p=r(19),h=r(43),v=r(59),m=r(49),b=r(86).set,y=r(250)(),g=r(114),_=r(251),S=r(60),E=r(115),T=s.TypeError,w=s.process,O=w&&w.versions,C=O&&O.v8||"",P=s.Promise,R="process"==l(w),I=function(){},N=i=g.f,A=!!function(){try{var e=P.resolve(1),t=(e.constructor={})[r(5)("species")]=function(e){e(I,I)};return(R||"function"==typeof PromiseRejectionEvent)&&e.then(I)instanceof t&&0!==C.indexOf("6.6")&&-1===S.indexOf("Chrome/66")}catch(e){}}(),k=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},D=function(e,t){if(!e._n){e._n=!0;var r=e._c;y((function(){for(var n=e._v,i=1==e._s,o=0,a=function(t){var r,o,a,c=i?t.ok:t.fail,s=t.resolve,u=t.reject,l=t.domain;try{c?(i||(2==e._h&&M(e),e._h=1),!0===c?r=n:(l&&l.enter(),r=c(n),l&&(l.exit(),a=!0)),r===t.promise?u(T("Promise-chain cycle")):(o=k(r))?o.call(r,s,u):s(r)):u(n)}catch(e){l&&!a&&l.exit(),u(e)}};r.length>o;)a(r[o++]);e._c=[],e._n=!1,t&&!e._h&&j(e)}))}},j=function(e){b.call(s,(function(){var t,r,n,i=e._v,o=x(e);if(o&&(t=_((function(){R?w.emit("unhandledRejection",i,e):(r=s.onunhandledrejection)?r({promise:e,reason:i}):(n=s.console)&&n.error&&n.error("Unhandled promise rejection",i)})),e._h=R||x(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},x=function(e){return 1!==e._h&&0===(e._a||e._c).length},M=function(e){b.call(s,(function(){var t;R?w.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})}))},L=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},F=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw T("Promise can't be resolved itself");(t=k(e))?y((function(){var n={_w:r,_d:!1};try{t.call(e,u(F,n,1),u(L,n,1))}catch(e){L.call(n,e)}})):(r._v=e,r._s=1,D(r,!1))}catch(e){L.call({_w:r,_d:!1},e)}}};A||(P=function(e){h(this,P,"Promise","_h"),p(e),n.call(this);try{e(u(F,this,1),u(L,this,1))}catch(e){L.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(44)(P.prototype,{then:function(e,t){var r=N(m(this,P));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=R?w.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&D(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new n;this.promise=e,this.resolve=u(F,e,1),this.reject=u(L,e,1)},g.f=N=function(e){return e===P||e===a?new o(e):i(e)}),d(d.G+d.W+d.F*!A,{Promise:P}),r(39)(P,"Promise"),r(42)("Promise"),a=r(7).Promise,d(d.S+d.F*!A,"Promise",{reject:function(e){var t=N(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(c||!A),"Promise",{resolve:function(e){return E(c&&this===a?P:this,e)}}),d(d.S+d.F*!(A&&r(55)((function(e){P.all(e).catch(I)}))),"Promise",{all:function(e){var t=this,r=N(t),n=r.resolve,i=r.reject,o=_((function(){var r=[],o=0,a=1;v(e,!1,(function(e){var c=o++,s=!1;r.push(void 0),a++,t.resolve(e).then((function(e){s||(s=!0,r[c]=e,--a||n(r))}),i)})),--a||n(r)}));return o.e&&i(o.v),r.promise},race:function(e){var t=this,r=N(t),n=r.reject,i=_((function(){v(e,!1,(function(e){t.resolve(e).then(r.resolve,n)}))}));return i.e&&n(i.v),r.promise}})},function(e,t,r){"use strict";var n=r(19);function i(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)}e.exports.f=function(e){return new i(e)}},function(e,t,r){var n=r(3),i=r(4),o=r(114);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=o.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){"use strict";var n=r(9).f,i=r(34),o=r(44),a=r(18),c=r(43),s=r(59),u=r(75),l=r(110),d=r(42),f=r(8),p=r(28).fastKey,h=r(38),v=f?"_s":"size",m=function(e,t){var r,n=p(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,u){var l=e((function(e,n){c(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,null!=n&&s(n,r,e[u],e)}));return o(l.prototype,{clear:function(){for(var e=h(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var r=h(this,t),n=m(r,e);if(n){var i=n.n,o=n.p;delete r._i[n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),r._f==n&&(r._f=i),r._l==n&&(r._l=o),r[v]--}return!!n},forEach:function(e){h(this,t);for(var r,n=a(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!m(h(this,t),e)}}),f&&n(l.prototype,"size",{get:function(){return h(this,t)[v]}}),l},def:function(e,t,r){var n,i,o=m(e,t);return o?o.v=r:(e._l=o={i:i=p(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=o),n&&(n.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:m,setStrong:function(e,t,r){u(e,t,(function(e,r){this._t=h(e,t),this._k=r,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?l(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,l(1))}),r?"entries":"values",!r,!0),d(t)}}},function(e,t,r){"use strict";var n=r(44),i=r(28).getWeak,o=r(3),a=r(4),c=r(43),s=r(59),u=r(23),l=r(14),d=r(38),f=u(5),p=u(6),h=0,v=function(e){return e._l||(e._l=new m)},m=function(){this.a=[]},b=function(e,t){return f(e.a,(function(e){return e[0]===t}))};m.prototype={get:function(e){var t=b(this,e);if(t)return t[1]},has:function(e){return!!b(this,e)},set:function(e,t){var r=b(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=p(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,o){var u=e((function(e,n){c(e,u,t,"_i"),e._t=t,e._i=h++,e._l=void 0,null!=n&&s(n,r,e[o],e)}));return n(u.prototype,{delete:function(e){if(!a(e))return!1;var r=i(e);return!0===r?v(d(this,t)).delete(e):r&&l(r,this._i)&&delete r[this._i]},has:function(e){if(!a(e))return!1;var r=i(e);return!0===r?v(d(this,t)).has(e):r&&l(r,this._i)}}),u},def:function(e,t,r){var n=i(o(t),!0);return!0===n?v(e).set(t,r):n[e._i]=r,e},ufstore:v}},function(e,t,r){var n=r(20),i=r(6);e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=i(t);if(t!==r)throw RangeError("Wrong length!");return r}},function(e,t,r){var n=r(35),i=r(53),o=r(3),a=r(1).Reflect;e.exports=a&&a.ownKeys||function(e){var t=n.f(o(e)),r=i.f;return r?t.concat(r(e)):t}},function(e,t,r){var n=r(6),i=r(71),o=r(25);e.exports=function(e,t,r,a){var c=String(o(e)),s=c.length,u=void 0===r?" ":String(r),l=n(t);if(l<=s||""==u)return c;var d=l-s,f=i.call(u,Math.ceil(d/u.length));return f.length>d&&(f=f.slice(0,d)),a?f+c:c+f}},function(e,t,r){var n=r(8),i=r(32),o=r(16),a=r(47).f;e.exports=function(e){return function(t){for(var r,c=o(t),s=i(c),u=s.length,l=0,d=[];u>l;)r=s[l++],n&&!a.call(c,r)||d.push(e?[r,c[r]]:c[r]);return d}}},function(e,t){var r=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=r)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";var n=r(13);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var o;if(r)o=r(t);else if(n.isURLSearchParams(t))o=t.toString();else{var a=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var c=e.indexOf("#");-1!==c&&(e=e.slice(0,c)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";(function(t){var n=r(13),i=r(328),o={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c,s={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(c=r(128)),c),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};s.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],(function(e){s.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){s.headers[e]=n.merge(o)})),e.exports=s}).call(this,r(327))},function(e,t,r){"use strict";var n=r(13),i=r(329),o=r(125),a=r(331),c=r(334),s=r(335),u=r(129);e.exports=function(e){return new Promise((function(t,l){var d=e.data,f=e.headers;n.isFormData(d)&&delete f["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",v=e.auth.password||"";f.Authorization="Basic "+btoa(h+":"+v)}var m=a(e.baseURL,e.url);if(p.open(e.method.toUpperCase(),o(m,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in p?c(p.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p};i(t,l,n),p=null}},p.onabort=function(){p&&(l(u("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){l(u("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),l(u(t,e,"ECONNABORTED",p)),p=null},n.isStandardBrowserEnv()){var b=r(336),y=(e.withCredentials||s(m))&&e.xsrfCookieName?b.read(e.xsrfCookieName):void 0;y&&(f[e.xsrfHeaderName]=y)}if("setRequestHeader"in p&&n.forEach(f,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete f[t]:p.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),l(e),p=null)})),void 0===d&&(d=null),p.send(d)}))}},function(e,t,r){"use strict";var n=r(330);e.exports=function(e,t,r,i,o){var a=new Error(e);return n(a,t,r,i,o)}},function(e,t,r){"use strict";var n=r(13);e.exports=function(e,t){t=t||{};var r={},i=["url","method","params","data"],o=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];n.forEach(i,(function(e){void 0!==t[e]&&(r[e]=t[e])})),n.forEach(o,(function(i){n.isObject(t[i])?r[i]=n.deepMerge(e[i],t[i]):void 0!==t[i]?r[i]=t[i]:n.isObject(e[i])?r[i]=n.deepMerge(e[i]):void 0!==e[i]&&(r[i]=e[i])})),n.forEach(a,(function(n){void 0!==t[n]?r[n]=t[n]:void 0!==e[n]&&(r[n]=e[n])}));var c=i.concat(o).concat(a),s=Object.keys(t).filter((function(e){return-1===c.indexOf(e)}));return n.forEach(s,(function(n){void 0!==t[n]?r[n]=t[n]:void 0!==e[n]&&(r[n]=e[n])})),r}},function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e){e.exports=JSON.parse('{"name":"ar-rtc-sdk","version":"4.0.0","description":"For publishing npm package anyrtc SDK (Web). Get more information from https://www.anyrtc.io.","main":"./release/ArRTC@latest.js","scripts":{"build":"webpack --mode=production","dev":"webpack --mode=development"},"author":"https://www.anyrtc.io","keywords":["web","webrtc","ArRTC"],"license":"./LICENSES.txt","devDependencies":{"awesome-typescript-loader":"^5.2.1","typescript":"^3.7.2","webpack":"^4.41.2","webpack-cli":"^3.3.10","webpack-sources":"^1.4.3","@babel/polyfill":"^7.8.7","@types/node":"^13.9.0","axios":"^0.19.2"},"dependencies":{"suplogger":"0.0.2","webrtc-adapter":"^7.5.1"}}')},function(e,t,r){window,e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(1);!function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARNING=2]="WARNING",e[e.ERROR=3]="ERROR",e[e.NONE=4]="NONE"}(n||(n={}));var o=function(){function e(){this.logPrefix="SupLogger",this.logLevel=n.NONE,this.uploadServeTranslators=[],this.DEBUG=n.DEBUG,this.INFO=n.INFO,this.WARNING=n.WARNING,this.ERROR=n.ERROR,this.NONE=n.NONE}return e.prototype.use=function(e){"function"==typeof e&&this.uploadServeTranslators.push((function(t,r){e(t,r)}))},e.prototype.setLogLevel=function(e,t){t&&(this.logPrefix=t),"number"==typeof e&&e>-1&&e<5&&(this.logLevel=e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!(this.logLevel>n.ERROR&&this.logLevel!==n.NONE||this.logLevel===n.NONE)){var r=e,o=Date.now();r.unshift("["+i.timesToDate(o,"YYYY-MM-DD hh:mm:ss")+"] "+this.logPrefix+" [ERROR] - "),this.uploadServeTranslators.length>0?this.uploadServeTranslators.map((function(e){e({type:"error",params:r,timestamp:o},(function(){console.error.apply(console,r)}))})):console.error.apply(console,r)}},e.prototype.warning=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!(this.logLevel>n.WARNING&&this.logLevel!==n.NONE||this.logLevel===n.NONE)){var r=e,o=Date.now();r.unshift("["+i.timesToDate(o,"YYYY-MM-DD hh:mm:ss")+"] "+this.logPrefix+" [WARNING] - "),this.uploadServeTranslators.length>0?this.uploadServeTranslators.map((function(e){e({type:"warning",params:r,timestamp:o},(function(){console.warn.apply(console,r)}))})):console.warn.apply(console,r)}},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!(this.logLevel>n.INFO&&this.logLevel!==n.NONE||this.logLevel===n.NONE)){var r=e,o=Date.now();r.unshift("["+i.timesToDate(o,"YYYY-MM-DD hh:mm:ss")+"] "+this.logPrefix+" [INFO] - "),this.uploadServeTranslators.length>0?this.uploadServeTranslators.map((function(e){e({type:"info",params:r,timestamp:o},(function(){console.log.apply(console,r)}))})):console.log.apply(console,r)}},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!(this.logLevel>n.DEBUG&&this.logLevel!==n.NONE||this.logLevel===n.NONE)){var r=e,o=Date.now();r.unshift("["+i.timesToDate(o,"YYYY-MM-DD hh:mm:ss")+"] "+this.logPrefix+" [DEBUG] - "),this.uploadServeTranslators.length>0?this.uploadServeTranslators.map((function(e){e({type:"debug",params:r,timestamp:o},(function(){console.log.apply(console,r)}))})):console.log.apply(console,r)}},e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timesToDate=function(e,t){var r="YYYY-MM-DD hh:mm:ss";if("number"!=typeof e)throw new Error("[timesToDate]: timestamp must be number");t&&"string"==typeof t&&(r=t);var n=e||Date.now(),i=new Date(n)||new Date(n),o=i.getFullYear(),a=i.getMonth()+1,c=i.getDate(),s=i.getHours(),u=i.getMinutes(),l=i.getSeconds();return r.indexOf("YYYY")>-1&&(r=r.replace("YYYY",(function(e){return""+o}))),r.indexOf("MM")>-1?r=r.replace("MM",(function(e){return a<10?"0"+a:""+a})):r.indexOf("M")>-1&&(r=r.replace("M",(function(e){return""+a}))),r.indexOf("DD")>-1?r=r.replace("DD",(function(e){return c<10?"0"+c:""+c})):r.indexOf("D")>-1&&(r=r.replace("D",(function(e){return""+c}))),r.indexOf("hh")>-1?r=r.replace("hh",(function(e){return s<10?"0"+s:""+s})):r.indexOf("h")>-1&&(r=r.replace("h",(function(e){return""+s}))),r.indexOf("mm")>-1?r=r.replace("mm",(function(e){return u<10?"0"+u:""+u})):r.indexOf("m")>-1&&(r=r.replace("m",(function(e){return""+u}))),r.indexOf("ss")>-1?r=r.replace("ss",(function(e){return l<10?"0"+l:""+l})):r.indexOf("s")>-1&&(r=r.replace("s",(function(e){return""+l}))),r}}]).default},function(e,t,r){"use strict";var n=r(45);function i(e,t,r,i,o){var a=n.writeRtpDescription(e.kind,t);if(a+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":o||"active"),a+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var c=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=c;var s="msid:"+(i?i.id:"-")+" "+c+"\r\n";a+="a="+s,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),a}function o(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},i=function(e,t,r,i){var o=n(e.parameters.apt,r),a=n(t.parameters.apt,i);return o&&a&&o.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach((function(n){for(var o=0;o<t.codecs.length;o++){var a=t.codecs[o];if(n.name.toLowerCase()===a.name.toLowerCase()&&n.clockRate===a.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&a.parameters.apt&&!i(n,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(n.numChannels,a.numChannels),r.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter((function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var n=0;n<t.headerExtensions.length;n++){var i=t.headerExtensions[n];if(e.uri===i.uri){r.headerExtensions.push(i);break}}})),r}function a(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function c(e,t){var r=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return r||e.addRemoteCandidate(t),!r}function s(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}e.exports=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,r,n,i){var o=new Event("track");o.track=r,o.receiver=n,o.transceiver={receiver:n},o.streams=i,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var l=function(r){var i=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){i[e]=o[e].bind(o)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle="max-bundle"===r.bundlePolicy,"negotiate"===r.rtcpMuxPolicy)throw s("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy="require"),r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all"}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced"}if(r.iceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof n;return i&&(n=[n]),n=n.filter((function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!r?(r=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")})),delete e.url,e.urls=i?n[0]:n,!!n.length}}))}(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var a=r.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=n.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},l.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();n.iceTransport=i.iceTransport,n.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(n),n},l.prototype.addTrack=function(t,r){if(this._isClosed)throw s("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find((function(e){return e.track===t})))throw s("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(n=this.transceivers[i]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),n.track=t,n.stream=r,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},l.prototype.addStream=function(e){var r=this;if(t>=15025)e.getTracks().forEach((function(t){r.addTrack(t,e)}));else{var n=e.clone();e.getTracks().forEach((function(e,t){var r=n.getTracks()[t];e.addEventListener("enabled",(function(e){r.enabled=e.enabled}))})),n.getTracks().forEach((function(e){r.addTrack(e,n)}))}},l.prototype.removeTrack=function(t){if(this._isClosed)throw s("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var r=this.transceivers.find((function(e){return e.rtpSender===t}));if(!r)throw s("InvalidAccessError","Sender was not created by this connection.");var n=r.stream;r.rtpSender.stop(),r.rtpSender=null,r.track=null,r.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(n)&&this.localStreams.indexOf(n)>-1&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var r=t.getSenders().find((function(t){return t.track===e}));r&&t.removeTrack(r)}))},l.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},l.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},l.prototype._createIceGatherer=function(t,r){var n=this;if(r&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;i.state=r?"completed":"gathering",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},l.prototype._gather=function(t,r){var i=this,o=this.transceivers[r].iceGatherer;if(!o.onlocalcandidate){var a=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),o.onlocalcandidate=function(e){if(!(i.usingBundle&&r>0)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:r};var c=e.candidate,s=!c||0===Object.keys(c).length;if(s)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),c.component=1,c.ufrag=o.getLocalParameters().usernameFragment;var u=n.writeCandidate(c);a.candidate=Object.assign(a.candidate,n.parseCandidate(u)),a.candidate.candidate=u,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var l=n.getMediaSections(i._localDescription.sdp);l[a.candidate.sdpMLineIndex]+=s?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",i._localDescription.sdp=n.getDescription(i._localDescription.sdp)+l.join("");var d=i.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),s||i._dispatchEvent("icecandidate",a),d&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout((function(){a.forEach((function(e){o.onlocalcandidate(e)}))}),0)}},l.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var n=new e.RTCDtlsTransport(r);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:r,dtlsTransport:n}},l.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},l.prototype._transceive=function(e,r,i){var a=o(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(a.encodings=e.sendEncodingParameters,a.rtcp={cname:n.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(a.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(a)),i&&e.rtpReceiver&&a.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?a.encodings=e.recvEncodingParameters:a.encodings=[{}],a.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(a.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(a.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(a))},l.prototype.setLocalDescription=function(e){var t,r,i=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(s("TypeError",'Unsupported type "'+e.type+'"'));if(!a("setLocalDescription",e.type,i.signalingState)||i._isClosed)return Promise.reject(s("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=n.splitSections(e.sdp),r=t.shift(),t.forEach((function(e,t){var r=n.parseRtpParameters(e);i.transceivers[t].localCapabilities=r})),i.transceivers.forEach((function(e,t){i._gather(e.mid,t)}));else if("answer"===e.type){t=n.splitSections(i._remoteDescription.sdp),r=t.shift();var c=n.matchPrefix(r,"a=ice-lite").length>0;t.forEach((function(e,t){var a=i.transceivers[t],s=a.iceGatherer,u=a.iceTransport,l=a.dtlsTransport,d=a.localCapabilities,f=a.remoteCapabilities;if(!(n.isRejected(e)&&0===n.matchPrefix(e,"a=bundle-only").length)&&!a.rejected){var p=n.getIceParameters(e,r),h=n.getDtlsParameters(e,r);c&&(h.role="server"),i.usingBundle&&0!==t||(i._gather(a.mid,t),"new"===u.state&&u.start(s,p,c?"controlling":"controlled"),"new"===l.state&&l.start(h));var v=o(d,f);i._transceive(a,v.codecs.length>0,!1)}}))}return i._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),Promise.resolve()},l.prototype.setRemoteDescription=function(i){var l=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(s("TypeError",'Unsupported type "'+i.type+'"'));if(!a("setRemoteDescription",i.type,l.signalingState)||l._isClosed)return Promise.reject(s("InvalidStateError","Can not set remote "+i.type+" in state "+l.signalingState));var d={};l.remoteStreams.forEach((function(e){d[e.id]=e}));var f=[],p=n.splitSections(i.sdp),h=p.shift(),v=n.matchPrefix(h,"a=ice-lite").length>0,m=n.matchPrefix(h,"a=group:BUNDLE ").length>0;l.usingBundle=m;var b=n.matchPrefix(h,"a=ice-options:")[0];return l.canTrickleIceCandidates=!!b&&b.substr(14).split(" ").indexOf("trickle")>=0,p.forEach((function(a,s){var u=n.splitLines(a),p=n.getKind(a),b=n.isRejected(a)&&0===n.matchPrefix(a,"a=bundle-only").length,y=u[0].substr(2).split(" ")[2],g=n.getDirection(a,h),_=n.parseMsid(a),S=n.getMid(a)||n.generateIdentifier();if(b||"application"===p&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))l.transceivers[s]={mid:S,kind:p,protocol:y,rejected:!0};else{var E,T,w,O,C,P,R,I,N;!b&&l.transceivers[s]&&l.transceivers[s].rejected&&(l.transceivers[s]=l._createTransceiver(p,!0));var A,k,D=n.parseRtpParameters(a);b||(A=n.getIceParameters(a,h),(k=n.getDtlsParameters(a,h)).role="client"),R=n.parseRtpEncodingParameters(a);var j=n.parseRtcpParameters(a),x=n.matchPrefix(a,"a=end-of-candidates",h).length>0,M=n.matchPrefix(a,"a=candidate:").map((function(e){return n.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===i.type||"answer"===i.type)&&!b&&m&&s>0&&l.transceivers[s]&&(l._disposeIceAndDtlsTransports(s),l.transceivers[s].iceGatherer=l.transceivers[0].iceGatherer,l.transceivers[s].iceTransport=l.transceivers[0].iceTransport,l.transceivers[s].dtlsTransport=l.transceivers[0].dtlsTransport,l.transceivers[s].rtpSender&&l.transceivers[s].rtpSender.setTransport(l.transceivers[0].dtlsTransport),l.transceivers[s].rtpReceiver&&l.transceivers[s].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),"offer"!==i.type||b){if("answer"===i.type&&!b){T=(E=l.transceivers[s]).iceGatherer,w=E.iceTransport,O=E.dtlsTransport,C=E.rtpReceiver,P=E.sendEncodingParameters,I=E.localCapabilities,l.transceivers[s].recvEncodingParameters=R,l.transceivers[s].remoteCapabilities=D,l.transceivers[s].rtcpParameters=j,M.length&&"new"===w.state&&(!v&&!x||m&&0!==s?M.forEach((function(e){c(E.iceTransport,e)})):w.setRemoteCandidates(M)),m&&0!==s||("new"===w.state&&w.start(T,A,"controlling"),"new"===O.state&&O.start(k)),!o(E.localCapabilities,E.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&E.sendEncodingParameters[0].rtx&&delete E.sendEncodingParameters[0].rtx,l._transceive(E,"sendrecv"===g||"recvonly"===g,"sendrecv"===g||"sendonly"===g),!C||"sendrecv"!==g&&"sendonly"!==g?delete E.rtpReceiver:(N=C.track,_?(d[_.stream]||(d[_.stream]=new e.MediaStream),r(N,d[_.stream]),f.push([N,C,d[_.stream]])):(d.default||(d.default=new e.MediaStream),r(N,d.default),f.push([N,C,d.default])))}}else{(E=l.transceivers[s]||l._createTransceiver(p)).mid=S,E.iceGatherer||(E.iceGatherer=l._createIceGatherer(s,m)),M.length&&"new"===E.iceTransport.state&&(!x||m&&0!==s?M.forEach((function(e){c(E.iceTransport,e)})):E.iceTransport.setRemoteCandidates(M)),I=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(I.codecs=I.codecs.filter((function(e){return"rtx"!==e.name}))),P=E.sendEncodingParameters||[{ssrc:1001*(2*s+2)}];var L,F=!1;if("sendrecv"===g||"sendonly"===g){if(F=!E.rtpReceiver,C=E.rtpReceiver||new e.RTCRtpReceiver(E.dtlsTransport,p),F)N=C.track,_&&"-"===_.stream||(_?(d[_.stream]||(d[_.stream]=new e.MediaStream,Object.defineProperty(d[_.stream],"id",{get:function(){return _.stream}})),Object.defineProperty(N,"id",{get:function(){return _.track}}),L=d[_.stream]):(d.default||(d.default=new e.MediaStream),L=d.default)),L&&(r(N,L),E.associatedRemoteMediaStreams.push(L)),f.push([N,C,L])}else E.rtpReceiver&&E.rtpReceiver.track&&(E.associatedRemoteMediaStreams.forEach((function(t){var r=t.getTracks().find((function(e){return e.id===E.rtpReceiver.track.id}));r&&function(t,r){r.removeTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(r,t)})),E.associatedRemoteMediaStreams=[]);E.localCapabilities=I,E.remoteCapabilities=D,E.rtpReceiver=C,E.rtcpParameters=j,E.sendEncodingParameters=P,E.recvEncodingParameters=R,l._transceive(l.transceivers[s],!1,F)}}})),void 0===l._dtlsRole&&(l._dtlsRole="offer"===i.type?"active":"passive"),l._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?l._updateSignalingState("have-remote-offer"):l._updateSignalingState("stable"),Object.keys(d).forEach((function(t){var r=d[t];if(r.getTracks().length){if(-1===l.remoteStreams.indexOf(r)){l.remoteStreams.push(r);var n=new Event("addstream");n.stream=r,e.setTimeout((function(){l._dispatchEvent("addstream",n)}))}f.forEach((function(e){var t=e[0],n=e[1];r.id===e[2].id&&u(l,t,n,[r])}))}})),f.forEach((function(e){e[2]||u(l,e[0],e[1],[])})),e.setTimeout((function(){l&&l.transceivers&&l.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},l.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},l.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},l.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},l.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},l.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(s("InvalidStateError","Can not call createOffer after close"));var o=r.transceivers.filter((function(e){return"audio"===e.kind})).length,a=r.transceivers.filter((function(e){return"video"===e.kind})).length,c=arguments[0];if(c){if(c.mandatory||c.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==c.offerToReceiveAudio&&(o=!0===c.offerToReceiveAudio?1:!1===c.offerToReceiveAudio?0:c.offerToReceiveAudio),void 0!==c.offerToReceiveVideo&&(a=!0===c.offerToReceiveVideo?1:!1===c.offerToReceiveVideo?0:c.offerToReceiveVideo)}for(r.transceivers.forEach((function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)}));o>0||a>0;)o>0&&(r._createTransceiver("audio"),o--),a>0&&(r._createTransceiver("video"),a--);var u=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach((function(i,o){var a=i.track,c=i.kind,s=i.mid||n.generateIdentifier();i.mid=s,i.iceGatherer||(i.iceGatherer=r._createIceGatherer(o,r.usingBundle));var u=e.RTCRtpSender.getCapabilities(c);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=i.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];a&&t>=15019&&"video"===c&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,c)),i.localCapabilities=u,i.sendEncodingParameters=l})),"max-compat"!==r._config.bundlePolicy&&(u+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",r.transceivers.forEach((function(e,t){u+=i(e,e.localCapabilities,"offer",e.stream,r._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,u+="a="+n.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))}));var l=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(l)},l.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(s("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==r.signalingState&&"have-local-pranswer"!==r.signalingState)return Promise.reject(s("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState));var a=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(a+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n";var c=n.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach((function(e,n){if(!(n+1>c)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?a+="m=application 0 DTLS/SCTP 5000\r\n":a+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?a+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(a+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(a+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var s;if(e.stream)"audio"===e.kind?s=e.stream.getAudioTracks()[0]:"video"===e.kind&&(s=e.stream.getVideoTracks()[0]),s&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var u=o(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,a+=i(e,u,"answer",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(a+="a=rtcp-rsize\r\n")}}));var u=new e.RTCSessionDescription({type:"answer",sdp:a});return Promise.resolve(u)},l.prototype.addIceCandidate=function(e){var t,r=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(i,o){if(!r._remoteDescription)return o(s("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<r.transceivers.length;u++)if(r.transceivers[u].mid===e.sdpMid){a=u;break}var l=r.transceivers[a];if(!l)return o(s("OperationError","Can not add ICE candidate"));if(l.rejected)return i();var d=Object.keys(e.candidate).length>0?n.parseCandidate(e.candidate):{};if("tcp"===d.protocol&&(0===d.port||9===d.port))return i();if(d.component&&1!==d.component)return i();if((0===a||a>0&&l.iceTransport!==r.transceivers[0].iceTransport)&&!c(l.iceTransport,d))return o(s("OperationError","Can not add ICE candidate"));var f=e.candidate.trim();0===f.indexOf("a=")&&(f=f.substr(2)),(t=n.getMediaSections(r._remoteDescription.sdp))[a]+="a="+(d.type?f:"end-of-candidates")+"\r\n",r._remoteDescription.sdp=n.getDescription(r._remoteDescription.sdp)+t.join("")}else for(var p=0;p<r.transceivers.length&&(r.transceivers[p].rejected||(r.transceivers[p].iceTransport.addRemoteCandidate({}),(t=n.getMediaSections(r._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",r._remoteDescription.sdp=n.getDescription(r._remoteDescription.sdp)+t.join(""),!r.usingBundle));p++);i()}))},l.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)})),!r)throw s("InvalidAccessError","Invalid selector.");return r.getStats()}var n=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&n.push(e[t].getStats())}))})),Promise.all(n).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var n=r.prototype.getStats;r.prototype.getStats=function(){return n.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(r){var n;e[r].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(n=e[r]).type]||n.type,t.set(r,e[r])})),t}))}}}));var d=["createOffer","createAnswer"];return d.forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(d=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),l}},function(e,t,r){r(136),e.exports=r(339)},function(e,t,r){"use strict";r(137);var n,i=(n=r(309))&&n.__esModule?n:{default:n};i.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),i.default._babelPolyfill=!0},function(e,t,r){"use strict";r(138),r(281),r(283),r(286),r(288),r(290),r(292),r(294),r(296),r(298),r(300),r(302),r(304),r(308)},function(e,t,r){r(139),r(142),r(143),r(144),r(145),r(146),r(147),r(148),r(149),r(150),r(151),r(152),r(153),r(154),r(155),r(156),r(157),r(158),r(159),r(160),r(161),r(162),r(163),r(164),r(165),r(166),r(167),r(168),r(169),r(170),r(171),r(172),r(173),r(174),r(175),r(176),r(177),r(178),r(179),r(180),r(181),r(182),r(183),r(185),r(186),r(187),r(188),r(189),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(200),r(201),r(202),r(203),r(204),r(205),r(206),r(207),r(208),r(209),r(210),r(211),r(212),r(213),r(214),r(215),r(216),r(217),r(218),r(220),r(221),r(223),r(224),r(225),r(226),r(227),r(228),r(229),r(231),r(232),r(233),r(234),r(235),r(236),r(237),r(238),r(239),r(240),r(241),r(242),r(243),r(83),r(244),r(111),r(245),r(112),r(246),r(247),r(248),r(249),r(113),r(252),r(253),r(254),r(255),r(256),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(266),r(267),r(268),r(269),r(270),r(271),r(272),r(273),r(274),r(275),r(276),r(277),r(278),r(279),r(280),e.exports=r(7)},function(e,t,r){"use strict";var n=r(1),i=r(14),o=r(8),a=r(0),c=r(11),s=r(28).KEY,u=r(2),l=r(51),d=r(39),f=r(30),p=r(5),h=r(64),v=r(92),m=r(141),b=r(54),y=r(3),g=r(4),_=r(10),S=r(16),E=r(27),T=r(29),w=r(34),O=r(95),C=r(21),P=r(53),R=r(9),I=r(32),N=C.f,A=R.f,k=O.f,D=n.Symbol,j=n.JSON,x=j&&j.stringify,M=p("_hidden"),L=p("toPrimitive"),F={}.propertyIsEnumerable,U=l("symbol-registry"),V=l("symbols"),B=l("op-symbols"),G=Object.prototype,W="function"==typeof D&&!!P.f,H=n.QObject,K=!H||!H.prototype||!H.prototype.findChild,J=o&&u((function(){return 7!=w(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=N(G,t);n&&delete G[t],A(e,t,r),n&&e!==G&&A(G,t,n)}:A,z=function(e){var t=V[e]=w(D.prototype);return t._k=e,t},Y=W&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},X=function(e,t,r){return e===G&&X(B,t,r),y(e),t=E(t,!0),y(r),i(V,t)?(r.enumerable?(i(e,M)&&e[M][t]&&(e[M][t]=!1),r=w(r,{enumerable:T(0,!1)})):(i(e,M)||A(e,M,T(1,{})),e[M][t]=!0),J(e,t,r)):A(e,t,r)},q=function(e,t){y(e);for(var r,n=m(t=S(t)),i=0,o=n.length;o>i;)X(e,r=n[i++],t[r]);return e},$=function(e){var t=F.call(this,e=E(e,!0));return!(this===G&&i(V,e)&&!i(B,e))&&(!(t||!i(this,e)||!i(V,e)||i(this,M)&&this[M][e])||t)},Q=function(e,t){if(e=S(e),t=E(t,!0),e!==G||!i(V,t)||i(B,t)){var r=N(e,t);return!r||!i(V,t)||i(e,M)&&e[M][t]||(r.enumerable=!0),r}},Z=function(e){for(var t,r=k(S(e)),n=[],o=0;r.length>o;)i(V,t=r[o++])||t==M||t==s||n.push(t);return n},ee=function(e){for(var t,r=e===G,n=k(r?B:S(e)),o=[],a=0;n.length>a;)!i(V,t=n[a++])||r&&!i(G,t)||o.push(V[t]);return o};W||(c((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(r){this===G&&t.call(B,r),i(this,M)&&i(this[M],e)&&(this[M][e]=!1),J(this,e,T(1,r))};return o&&K&&J(G,e,{configurable:!0,set:t}),z(e)}).prototype,"toString",(function(){return this._k})),C.f=Q,R.f=X,r(35).f=O.f=Z,r(47).f=$,P.f=ee,o&&!r(31)&&c(G,"propertyIsEnumerable",$,!0),h.f=function(e){return z(p(e))}),a(a.G+a.W+a.F*!W,{Symbol:D});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)p(te[re++]);for(var ne=I(p.store),ie=0;ne.length>ie;)v(ne[ie++]);a(a.S+a.F*!W,"Symbol",{for:function(e){return i(U,e+="")?U[e]:U[e]=D(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in U)if(U[t]===e)return t},useSetter:function(){K=!0},useSimple:function(){K=!1}}),a(a.S+a.F*!W,"Object",{create:function(e,t){return void 0===t?w(e):q(w(e),t)},defineProperty:X,defineProperties:q,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var oe=u((function(){P.f(1)}));a(a.S+a.F*oe,"Object",{getOwnPropertySymbols:function(e){return P.f(_(e))}}),j&&a(a.S+a.F*(!W||u((function(){var e=D();return"[null]"!=x([e])||"{}"!=x({a:e})||"{}"!=x(Object(e))}))),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(g(t)||void 0!==e)&&!Y(e))return b(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Y(t))return t}),n[1]=t,x.apply(j,n)}}),D.prototype[L]||r(15)(D.prototype,L,D.prototype.valueOf),d(D,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},function(e,t,r){e.exports=r(51)("native-function-to-string",Function.toString)},function(e,t,r){var n=r(32),i=r(53),o=r(47);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var a,c=r(e),s=o.f,u=0;c.length>u;)s.call(e,a=c[u++])&&t.push(a);return t}},function(e,t,r){var n=r(0);n(n.S,"Object",{create:r(34)})},function(e,t,r){var n=r(0);n(n.S+n.F*!r(8),"Object",{defineProperty:r(9).f})},function(e,t,r){var n=r(0);n(n.S+n.F*!r(8),"Object",{defineProperties:r(94)})},function(e,t,r){var n=r(16),i=r(21).f;r(22)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(n(e),t)}}))},function(e,t,r){var n=r(10),i=r(36);r(22)("getPrototypeOf",(function(){return function(e){return i(n(e))}}))},function(e,t,r){var n=r(10),i=r(32);r(22)("keys",(function(){return function(e){return i(n(e))}}))},function(e,t,r){r(22)("getOwnPropertyNames",(function(){return r(95).f}))},function(e,t,r){var n=r(4),i=r(28).onFreeze;r(22)("freeze",(function(e){return function(t){return e&&n(t)?e(i(t)):t}}))},function(e,t,r){var n=r(4),i=r(28).onFreeze;r(22)("seal",(function(e){return function(t){return e&&n(t)?e(i(t)):t}}))},function(e,t,r){var n=r(4),i=r(28).onFreeze;r(22)("preventExtensions",(function(e){return function(t){return e&&n(t)?e(i(t)):t}}))},function(e,t,r){var n=r(4);r(22)("isFrozen",(function(e){return function(t){return!n(t)||!!e&&e(t)}}))},function(e,t,r){var n=r(4);r(22)("isSealed",(function(e){return function(t){return!n(t)||!!e&&e(t)}}))},function(e,t,r){var n=r(4);r(22)("isExtensible",(function(e){return function(t){return!!n(t)&&(!e||e(t))}}))},function(e,t,r){var n=r(0);n(n.S+n.F,"Object",{assign:r(96)})},function(e,t,r){var n=r(0);n(n.S,"Object",{is:r(97)})},function(e,t,r){var n=r(0);n(n.S,"Object",{setPrototypeOf:r(68).set})},function(e,t,r){"use strict";var n=r(48),i={};i[r(5)("toStringTag")]="z",i+""!="[object z]"&&r(11)(Object.prototype,"toString",(function(){return"[object "+n(this)+"]"}),!0)},function(e,t,r){var n=r(0);n(n.P,"Function",{bind:r(98)})},function(e,t,r){var n=r(9).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||r(8)&&n(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,r){"use strict";var n=r(4),i=r(36),o=r(5)("hasInstance"),a=Function.prototype;o in a||r(9).f(a,o,{value:function(e){if("function"!=typeof this||!n(e))return!1;if(!n(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,r){var n=r(0),i=r(100);n(n.G+n.F*(parseInt!=i),{parseInt:i})},function(e,t,r){var n=r(0),i=r(101);n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},function(e,t,r){"use strict";var n=r(1),i=r(14),o=r(24),a=r(70),c=r(27),s=r(2),u=r(35).f,l=r(21).f,d=r(9).f,f=r(40).trim,p=n.Number,h=p,v=p.prototype,m="Number"==o(r(34)(v)),b="trim"in String.prototype,y=function(e){var t=c(e,!1);if("string"==typeof t&&t.length>2){var r,n,i,o=(t=b?t.trim():f(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+t}for(var a,s=t.slice(2),u=0,l=s.length;u<l;u++)if((a=s.charCodeAt(u))<48||a>i)return NaN;return parseInt(s,n)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof p&&(m?s((function(){v.valueOf.call(r)})):"Number"!=o(r))?a(new h(y(t)),r,p):y(t)};for(var g,_=r(8)?u(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;_.length>S;S++)i(h,g=_[S])&&!i(p,g)&&d(p,g,l(h,g));p.prototype=v,v.constructor=p,r(11)(n,"Number",p)}},function(e,t,r){"use strict";var n=r(0),i=r(20),o=r(102),a=r(71),c=1..toFixed,s=Math.floor,u=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",d=function(e,t){for(var r=-1,n=t;++r<6;)n+=e*u[r],u[r]=n%1e7,n=s(n/1e7)},f=function(e){for(var t=6,r=0;--t>=0;)r+=u[t],u[t]=s(r/e),r=r%e*1e7},p=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==u[e]){var r=String(u[e]);t=""===t?r:t+a.call("0",7-r.length)+r}return t},h=function(e,t,r){return 0===t?r:t%2==1?h(e,t-1,r*e):h(e*e,t/2,r)};n(n.P+n.F*(!!c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(2)((function(){c.call({})}))),"Number",{toFixed:function(e){var t,r,n,c,s=o(this,l),u=i(e),v="",m="0";if(u<0||u>20)throw RangeError(l);if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(v="-",s=-s),s>1e-21)if(r=(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(s*h(2,69,1))-69)<0?s*h(2,-t,1):s/h(2,t,1),r*=4503599627370496,(t=52-t)>0){for(d(0,r),n=u;n>=7;)d(1e7,0),n-=7;for(d(h(10,n,1),0),n=t-1;n>=23;)f(1<<23),n-=23;f(1<<n),d(1,1),f(2),m=p()}else d(0,r),d(1<<-t,0),m=p()+a.call("0",u);return m=u>0?v+((c=m.length)<=u?"0."+a.call("0",u-c)+m:m.slice(0,c-u)+"."+m.slice(c-u)):v+m}})},function(e,t,r){"use strict";var n=r(0),i=r(2),o=r(102),a=1..toPrecision;n(n.P+n.F*(i((function(){return"1"!==a.call(1,void 0)}))||!i((function(){a.call({})}))),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,r){var n=r(0);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,r){var n=r(0),i=r(1).isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,r){var n=r(0);n(n.S,"Number",{isInteger:r(103)})},function(e,t,r){var n=r(0);n(n.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,r){var n=r(0),i=r(103),o=Math.abs;n(n.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,r){var n=r(0);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,r){var n=r(0);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,r){var n=r(0),i=r(101);n(n.S+n.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,r){var n=r(0),i=r(100);n(n.S+n.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,r){var n=r(0),i=r(104),o=Math.sqrt,a=Math.acosh;n(n.S+n.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},function(e,t,r){var n=r(0),i=Math.asinh;n(n.S+n.F*!(i&&1/i(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,r){var n=r(0),i=Math.atanh;n(n.S+n.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,r){var n=r(0),i=r(72);n(n.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,r){var n=r(0);n(n.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,r){var n=r(0),i=Math.exp;n(n.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,r){var n=r(0),i=r(73);n(n.S+n.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t,r){var n=r(0);n(n.S,"Math",{fround:r(184)})},function(e,t,r){var n=r(72),i=Math.pow,o=i(2,-52),a=i(2,-23),c=i(2,127)*(2-a),s=i(2,-126);e.exports=Math.fround||function(e){var t,r,i=Math.abs(e),u=n(e);return i<s?u*(i/s/a+1/o-1/o)*s*a:(r=(t=(1+a/o)*i)-(t-i))>c||r!=r?u*(1/0):u*r}},function(e,t,r){var n=r(0),i=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var r,n,o=0,a=0,c=arguments.length,s=0;a<c;)s<(r=i(arguments[a++]))?(o=o*(n=s/r)*n+1,s=r):o+=r>0?(n=r/s)*n:r;return s===1/0?1/0:s*Math.sqrt(o)}})},function(e,t,r){var n=r(0),i=Math.imul;n(n.S+n.F*r(2)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(e,t){var r=+e,n=+t,i=65535&r,o=65535&n;return 0|i*o+((65535&r>>>16)*o+i*(65535&n>>>16)<<16>>>0)}})},function(e,t,r){var n=r(0);n(n.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,r){var n=r(0);n(n.S,"Math",{log1p:r(104)})},function(e,t,r){var n=r(0);n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,r){var n=r(0);n(n.S,"Math",{sign:r(72)})},function(e,t,r){var n=r(0),i=r(73),o=Math.exp;n(n.S+n.F*r(2)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,r){var n=r(0),i=r(73),o=Math.exp;n(n.S,"Math",{tanh:function(e){var t=i(e=+e),r=i(-e);return t==1/0?1:r==1/0?-1:(t-r)/(o(e)+o(-e))}})},function(e,t,r){var n=r(0);n(n.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,r){var n=r(0),i=r(33),o=String.fromCharCode,a=String.fromCodePoint;n(n.S+n.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,a=0;n>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return r.join("")}})},function(e,t,r){var n=r(0),i=r(16),o=r(6);n(n.S,"String",{raw:function(e){for(var t=i(e.raw),r=o(t.length),n=arguments.length,a=[],c=0;r>c;)a.push(String(t[c++])),c<n&&a.push(String(arguments[c]));return a.join("")}})},function(e,t,r){"use strict";r(40)("trim",(function(e){return function(){return e(this,3)}}))},function(e,t,r){"use strict";var n=r(74)(!0);r(75)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})}))},function(e,t,r){"use strict";var n=r(0),i=r(74)(!1);n(n.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,r){"use strict";var n=r(0),i=r(6),o=r(76),a="".endsWith;n(n.P+n.F*r(78)("endsWith"),"String",{endsWith:function(e){var t=o(this,e,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=i(t.length),c=void 0===r?n:Math.min(i(r),n),s=String(e);return a?a.call(t,s,c):t.slice(c-s.length,c)===s}})},function(e,t,r){"use strict";var n=r(0),i=r(76);n(n.P+n.F*r(78)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){var n=r(0);n(n.P,"String",{repeat:r(71)})},function(e,t,r){"use strict";var n=r(0),i=r(6),o=r(76),a="".startsWith;n(n.P+n.F*r(78)("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),r=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return a?a.call(t,n,r):t.slice(r,r+n.length)===n}})},function(e,t,r){"use strict";r(12)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},function(e,t,r){"use strict";r(12)("big",(function(e){return function(){return e(this,"big","","")}}))},function(e,t,r){"use strict";r(12)("blink",(function(e){return function(){return e(this,"blink","","")}}))},function(e,t,r){"use strict";r(12)("bold",(function(e){return function(){return e(this,"b","","")}}))},function(e,t,r){"use strict";r(12)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},function(e,t,r){"use strict";r(12)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},function(e,t,r){"use strict";r(12)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},function(e,t,r){"use strict";r(12)("italics",(function(e){return function(){return e(this,"i","","")}}))},function(e,t,r){"use strict";r(12)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},function(e,t,r){"use strict";r(12)("small",(function(e){return function(){return e(this,"small","","")}}))},function(e,t,r){"use strict";r(12)("strike",(function(e){return function(){return e(this,"strike","","")}}))},function(e,t,r){"use strict";r(12)("sub",(function(e){return function(){return e(this,"sub","","")}}))},function(e,t,r){"use strict";r(12)("sup",(function(e){return function(){return e(this,"sup","","")}}))},function(e,t,r){var n=r(0);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,r){"use strict";var n=r(0),i=r(10),o=r(27);n(n.P+n.F*r(2)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=i(this),r=o(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}})},function(e,t,r){var n=r(0),i=r(219);n(n.P+n.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,r){"use strict";var n=r(2),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=n((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-50000000000001))}))||!n((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(r>99?r:"0"+a(r))+"Z"}:o},function(e,t,r){var n=Date.prototype,i=n.toString,o=n.getTime;new Date(NaN)+""!="Invalid Date"&&r(11)(n,"toString",(function(){var e=o.call(this);return e==e?i.call(this):"Invalid Date"}))},function(e,t,r){var n=r(5)("toPrimitive"),i=Date.prototype;n in i||r(15)(i,n,r(222))},function(e,t,r){"use strict";var n=r(3),i=r(27);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(n(this),"number"!=e)}},function(e,t,r){var n=r(0);n(n.S,"Array",{isArray:r(54)})},function(e,t,r){"use strict";var n=r(18),i=r(0),o=r(10),a=r(106),c=r(79),s=r(6),u=r(80),l=r(81);i(i.S+i.F*!r(55)((function(e){Array.from(e)})),"Array",{from:function(e){var t,r,i,d,f=o(e),p="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,m=void 0!==v,b=0,y=l(f);if(m&&(v=n(v,h>2?arguments[2]:void 0,2)),null==y||p==Array&&c(y))for(r=new p(t=s(f.length));t>b;b++)u(r,b,m?v(f[b],b):f[b]);else for(d=y.call(f),r=new p;!(i=d.next()).done;b++)u(r,b,m?a(d,v,[i.value,b],!0):i.value);return r.length=b,r}})},function(e,t,r){"use strict";var n=r(0),i=r(80);n(n.S+n.F*r(2)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)i(r,e,arguments[e++]);return r.length=t,r}})},function(e,t,r){"use strict";var n=r(0),i=r(16),o=[].join;n(n.P+n.F*(r(46)!=Object||!r(17)(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},function(e,t,r){"use strict";var n=r(0),i=r(67),o=r(24),a=r(33),c=r(6),s=[].slice;n(n.P+n.F*r(2)((function(){i&&s.call(i)})),"Array",{slice:function(e,t){var r=c(this.length),n=o(this);if(t=void 0===t?r:t,"Array"==n)return s.call(this,e,t);for(var i=a(e,r),u=a(t,r),l=c(u-i),d=new Array(l),f=0;f<l;f++)d[f]="String"==n?this.charAt(i+f):this[i+f];return d}})},function(e,t,r){"use strict";var n=r(0),i=r(19),o=r(10),a=r(2),c=[].sort,s=[1,2,3];n(n.P+n.F*(a((function(){s.sort(void 0)}))||!a((function(){s.sort(null)}))||!r(17)(c)),"Array",{sort:function(e){return void 0===e?c.call(o(this)):c.call(o(this),i(e))}})},function(e,t,r){"use strict";var n=r(0),i=r(23)(0),o=r(17)([].forEach,!0);n(n.P+n.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,r){var n=r(4),i=r(54),o=r(5)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,r){"use strict";var n=r(0),i=r(23)(1);n(n.P+n.F*!r(17)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(0),i=r(23)(2);n(n.P+n.F*!r(17)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(0),i=r(23)(3);n(n.P+n.F*!r(17)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(0),i=r(23)(4);n(n.P+n.F*!r(17)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(0),i=r(108);n(n.P+n.F*!r(17)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,r){"use strict";var n=r(0),i=r(108);n(n.P+n.F*!r(17)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,r){"use strict";var n=r(0),i=r(52)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(a||!r(17)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(0),i=r(16),o=r(20),a=r(6),c=[].lastIndexOf,s=!!c&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(s||!r(17)(c)),"Array",{lastIndexOf:function(e){if(s)return c.apply(this,arguments)||0;var t=i(this),r=a(t.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,o(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in t&&t[n]===e)return n||0;return-1}})},function(e,t,r){var n=r(0);n(n.P,"Array",{copyWithin:r(109)}),r(37)("copyWithin")},function(e,t,r){var n=r(0);n(n.P,"Array",{fill:r(82)}),r(37)("fill")},function(e,t,r){"use strict";var n=r(0),i=r(23)(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),n(n.P+n.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(37)("find")},function(e,t,r){"use strict";var n=r(0),i=r(23)(6),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),n(n.P+n.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(37)(o)},function(e,t,r){r(42)("Array")},function(e,t,r){var n=r(1),i=r(70),o=r(9).f,a=r(35).f,c=r(77),s=r(56),u=n.RegExp,l=u,d=u.prototype,f=/a/g,p=/a/g,h=new u(f)!==f;if(r(8)&&(!h||r(2)((function(){return p[r(5)("match")]=!1,u(f)!=f||u(p)==p||"/a/i"!=u(f,"i")})))){u=function(e,t){var r=this instanceof u,n=c(e),o=void 0===t;return!r&&n&&e.constructor===u&&o?e:i(h?new l(n&&!o?e.source:e,t):l((n=e instanceof u)?e.source:e,n&&o?s.call(e):t),r?this:d,u)};for(var v=function(e){e in u||o(u,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})},m=a(l),b=0;m.length>b;)v(m[b++]);d.constructor=u,u.prototype=d,r(11)(n,"RegExp",u)}r(42)("RegExp")},function(e,t,r){"use strict";r(112);var n=r(3),i=r(56),o=r(8),a=/./.toString,c=function(e){r(11)(RegExp.prototype,"toString",e,!0)};r(2)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?c((function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)})):"toString"!=a.name&&c((function(){return a.call(this)}))},function(e,t,r){"use strict";var n=r(3),i=r(6),o=r(85),a=r(57);r(58)("match",1,(function(e,t,r,c){return[function(r){var n=e(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=c(r,e,this);if(t.done)return t.value;var s=n(e),u=String(this);if(!s.global)return a(s,u);var l=s.unicode;s.lastIndex=0;for(var d,f=[],p=0;null!==(d=a(s,u));){var h=String(d[0]);f[p]=h,""===h&&(s.lastIndex=o(u,i(s.lastIndex),l)),p++}return 0===p?null:f}]}))},function(e,t,r){"use strict";var n=r(3),i=r(10),o=r(6),a=r(20),c=r(85),s=r(57),u=Math.max,l=Math.min,d=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;r(58)("replace",2,(function(e,t,r,h){return[function(n,i){var o=e(this),a=null==n?void 0:n[t];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},function(e,t){var i=h(r,e,this,t);if(i.done)return i.value;var d=n(e),f=String(this),p="function"==typeof t;p||(t=String(t));var m=d.global;if(m){var b=d.unicode;d.lastIndex=0}for(var y=[];;){var g=s(d,f);if(null===g)break;if(y.push(g),!m)break;""===String(g[0])&&(d.lastIndex=c(f,o(d.lastIndex),b))}for(var _,S="",E=0,T=0;T<y.length;T++){g=y[T];for(var w=String(g[0]),O=u(l(a(g.index),f.length),0),C=[],P=1;P<g.length;P++)C.push(void 0===(_=g[P])?_:String(_));var R=g.groups;if(p){var I=[w].concat(C,O,f);void 0!==R&&I.push(R);var N=String(t.apply(void 0,I))}else N=v(w,f,O,C,R,t);O>=E&&(S+=f.slice(E,O)+N,E=O+w.length)}return S+f.slice(E)}];function v(e,t,n,o,a,c){var s=n+e.length,u=o.length,l=p;return void 0!==a&&(a=i(a),l=f),r.call(c,l,(function(r,i){var c;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(s);case"<":c=a[i.slice(1,-1)];break;default:var l=+i;if(0===l)return r;if(l>u){var f=d(l/10);return 0===f?r:f<=u?void 0===o[f-1]?i.charAt(1):o[f-1]+i.charAt(1):r}c=o[l-1]}return void 0===c?"":c}))}}))},function(e,t,r){"use strict";var n=r(3),i=r(97),o=r(57);r(58)("search",1,(function(e,t,r,a){return[function(r){var n=e(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=a(r,e,this);if(t.done)return t.value;var c=n(e),s=String(this),u=c.lastIndex;i(u,0)||(c.lastIndex=0);var l=o(c,s);return i(c.lastIndex,u)||(c.lastIndex=u),null===l?-1:l.index}]}))},function(e,t,r){"use strict";var n=r(77),i=r(3),o=r(49),a=r(85),c=r(6),s=r(57),u=r(84),l=r(2),d=Math.min,f=[].push,p="length",h=!l((function(){RegExp(4294967295,"y")}));r(58)("split",2,(function(e,t,r,l){var v;return v="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[p]||2!="ab".split(/(?:ab)*/)[p]||4!=".".split(/(.?)(.?)/)[p]||".".split(/()()/)[p]>1||"".split(/.?/)[p]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!n(e))return r.call(i,e,t);for(var o,a,c,s=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,h=void 0===t?4294967295:t>>>0,v=new RegExp(e.source,l+"g");(o=u.call(v,i))&&!((a=v.lastIndex)>d&&(s.push(i.slice(d,o.index)),o[p]>1&&o.index<i[p]&&f.apply(s,o.slice(1)),c=o[0][p],d=a,s[p]>=h));)v.lastIndex===o.index&&v.lastIndex++;return d===i[p]?!c&&v.test("")||s.push(""):s.push(i.slice(d)),s[p]>h?s.slice(0,h):s}:"0".split(void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}:r,[function(r,n){var i=e(this),o=null==r?void 0:r[t];return void 0!==o?o.call(r,i,n):v.call(String(i),r,n)},function(e,t){var n=l(v,e,this,t,v!==r);if(n.done)return n.value;var u=i(e),f=String(this),p=o(u,RegExp),m=u.unicode,b=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(h?"y":"g"),y=new p(h?u:"^(?:"+u.source+")",b),g=void 0===t?4294967295:t>>>0;if(0===g)return[];if(0===f.length)return null===s(y,f)?[f]:[];for(var _=0,S=0,E=[];S<f.length;){y.lastIndex=h?S:0;var T,w=s(y,h?f:f.slice(S));if(null===w||(T=d(c(y.lastIndex+(h?0:S)),f.length))===_)S=a(f,S,m);else{if(E.push(f.slice(_,S)),E.length===g)return E;for(var O=1;O<=w.length-1;O++)if(E.push(w[O]),E.length===g)return E;S=_=T}}return E.push(f.slice(_)),E}]}))},function(e,t,r){var n=r(1),i=r(86).set,o=n.MutationObserver||n.WebKitMutationObserver,a=n.process,c=n.Promise,s="process"==r(24)(a);e.exports=function(){var e,t,r,u=function(){var n,i;for(s&&(n=a.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(s)r=function(){a.nextTick(u)};else if(!o||n.navigator&&n.navigator.standalone)if(c&&c.resolve){var l=c.resolve(void 0);r=function(){l.then(u)}}else r=function(){i.call(n,u)};else{var d=!0,f=document.createTextNode("");new o(u).observe(f,{characterData:!0}),r=function(){f.data=d=!d}}return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){"use strict";var n=r(116),i=r(38);e.exports=r(61)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=n.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(i(this,"Map"),0===e?0:e,t)}},n,!0)},function(e,t,r){"use strict";var n=r(116),i=r(38);e.exports=r(61)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return n.def(i(this,"Set"),e=0===e?0:e,e)}},n)},function(e,t,r){"use strict";var n,i=r(1),o=r(23)(0),a=r(11),c=r(28),s=r(96),u=r(117),l=r(4),d=r(38),f=r(38),p=!i.ActiveXObject&&"ActiveXObject"in i,h=c.getWeak,v=Object.isExtensible,m=u.ufstore,b=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(e){if(l(e)){var t=h(e);return!0===t?m(d(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(d(this,"WeakMap"),e,t)}},g=e.exports=r(61)("WeakMap",b,y,u,!0,!0);f&&p&&(s((n=u.getConstructor(b,"WeakMap")).prototype,y),c.NEED=!0,o(["delete","has","get","set"],(function(e){var t=g.prototype,r=t[e];a(t,e,(function(t,i){if(l(t)&&!v(t)){this._f||(this._f=new n);var o=this._f[e](t,i);return"set"==e?this:o}return r.call(this,t,i)}))})))},function(e,t,r){"use strict";var n=r(117),i=r(38);r(61)("WeakSet",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return n.def(i(this,"WeakSet"),e,!0)}},n,!1,!0)},function(e,t,r){"use strict";var n=r(0),i=r(62),o=r(87),a=r(3),c=r(33),s=r(6),u=r(4),l=r(1).ArrayBuffer,d=r(49),f=o.ArrayBuffer,p=o.DataView,h=i.ABV&&l.isView,v=f.prototype.slice,m=i.VIEW;n(n.G+n.W+n.F*(l!==f),{ArrayBuffer:f}),n(n.S+n.F*!i.CONSTR,"ArrayBuffer",{isView:function(e){return h&&h(e)||u(e)&&m in e}}),n(n.P+n.U+n.F*r(2)((function(){return!new f(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(e,t){if(void 0!==v&&void 0===t)return v.call(a(this),e);for(var r=a(this).byteLength,n=c(e,r),i=c(void 0===t?r:t,r),o=new(d(this,f))(s(i-n)),u=new p(this),l=new p(o),h=0;n<i;)l.setUint8(h++,u.getUint8(n++));return o}}),r(42)("ArrayBuffer")},function(e,t,r){var n=r(0);n(n.G+n.W+n.F*!r(62).ABV,{DataView:r(87).DataView})},function(e,t,r){r(26)("Int8",1,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(26)("Uint8",1,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(26)("Uint8",1,(function(e){return function(t,r,n){return e(this,t,r,n)}}),!0)},function(e,t,r){r(26)("Int16",2,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(26)("Uint16",2,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(26)("Int32",4,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(26)("Uint32",4,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(26)("Float32",4,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(26)("Float64",8,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){var n=r(0),i=r(19),o=r(3),a=(r(1).Reflect||{}).apply,c=Function.apply;n(n.S+n.F*!r(2)((function(){a((function(){}))})),"Reflect",{apply:function(e,t,r){var n=i(e),s=o(r);return a?a(n,t,s):c.call(n,t,s)}})},function(e,t,r){var n=r(0),i=r(34),o=r(19),a=r(3),c=r(4),s=r(2),u=r(98),l=(r(1).Reflect||{}).construct,d=s((function(){function e(){}return!(l((function(){}),[],e)instanceof e)})),f=!s((function(){l((function(){}))}));n(n.S+n.F*(d||f),"Reflect",{construct:function(e,t){o(e),a(t);var r=arguments.length<3?e:o(arguments[2]);if(f&&!d)return l(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(u.apply(e,n))}var s=r.prototype,p=i(c(s)?s:Object.prototype),h=Function.apply.call(e,p,t);return c(h)?h:p}})},function(e,t,r){var n=r(9),i=r(0),o=r(3),a=r(27);i(i.S+i.F*r(2)((function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,r){o(e),t=a(t,!0),o(r);try{return n.f(e,t,r),!0}catch(e){return!1}}})},function(e,t,r){var n=r(0),i=r(21).f,o=r(3);n(n.S,"Reflect",{deleteProperty:function(e,t){var r=i(o(e),t);return!(r&&!r.configurable)&&delete e[t]}})},function(e,t,r){"use strict";var n=r(0),i=r(3),o=function(e){this._t=i(e),this._i=0;var t,r=this._k=[];for(t in e)r.push(t)};r(105)(o,"Object",(function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}})),n(n.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,r){var n=r(21),i=r(36),o=r(14),a=r(0),c=r(4),s=r(3);a(a.S,"Reflect",{get:function e(t,r){var a,u,l=arguments.length<3?t:arguments[2];return s(t)===l?t[r]:(a=n.f(t,r))?o(a,"value")?a.value:void 0!==a.get?a.get.call(l):void 0:c(u=i(t))?e(u,r,l):void 0}})},function(e,t,r){var n=r(21),i=r(0),o=r(3);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return n.f(o(e),t)}})},function(e,t,r){var n=r(0),i=r(36),o=r(3);n(n.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,r){var n=r(0);n(n.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,r){var n=r(0),i=r(3),o=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},function(e,t,r){var n=r(0);n(n.S,"Reflect",{ownKeys:r(119)})},function(e,t,r){var n=r(0),i=r(3),o=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,r){var n=r(9),i=r(21),o=r(36),a=r(14),c=r(0),s=r(29),u=r(3),l=r(4);c(c.S,"Reflect",{set:function e(t,r,c){var d,f,p=arguments.length<4?t:arguments[3],h=i.f(u(t),r);if(!h){if(l(f=o(t)))return e(f,r,c,p);h=s(0)}if(a(h,"value")){if(!1===h.writable||!l(p))return!1;if(d=i.f(p,r)){if(d.get||d.set||!1===d.writable)return!1;d.value=c,n.f(p,r,d)}else n.f(p,r,s(0,c));return!0}return void 0!==h.set&&(h.set.call(p,c),!0)}})},function(e,t,r){var n=r(0),i=r(68);i&&n(n.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,r){r(282),e.exports=r(7).Array.includes},function(e,t,r){"use strict";var n=r(0),i=r(52)(!0);n(n.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(37)("includes")},function(e,t,r){r(284),e.exports=r(7).Array.flatMap},function(e,t,r){"use strict";var n=r(0),i=r(285),o=r(10),a=r(6),c=r(19),s=r(107);n(n.P,"Array",{flatMap:function(e){var t,r,n=o(this);return c(e),t=a(n.length),r=s(n,0),i(r,n,n,t,0,1,e,arguments[1]),r}}),r(37)("flatMap")},function(e,t,r){"use strict";var n=r(54),i=r(4),o=r(6),a=r(18),c=r(5)("isConcatSpreadable");e.exports=function e(t,r,s,u,l,d,f,p){for(var h,v,m=l,b=0,y=!!f&&a(f,p,3);b<u;){if(b in s){if(h=y?y(s[b],b,r):s[b],v=!1,i(h)&&(v=void 0!==(v=h[c])?!!v:n(h)),v&&d>0)m=e(t,r,h,o(h.length),m,d-1)-1;else{if(m>=9007199254740991)throw TypeError();t[m]=h}m++}b++}return m}},function(e,t,r){r(287),e.exports=r(7).String.padStart},function(e,t,r){"use strict";var n=r(0),i=r(120),o=r(60),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);n(n.P+n.F*a,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,r){r(289),e.exports=r(7).String.padEnd},function(e,t,r){"use strict";var n=r(0),i=r(120),o=r(60),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);n(n.P+n.F*a,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,r){r(291),e.exports=r(7).String.trimLeft},function(e,t,r){"use strict";r(40)("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},function(e,t,r){r(293),e.exports=r(7).String.trimRight},function(e,t,r){"use strict";r(40)("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},function(e,t,r){r(295),e.exports=r(64).f("asyncIterator")},function(e,t,r){r(92)("asyncIterator")},function(e,t,r){r(297),e.exports=r(7).Object.getOwnPropertyDescriptors},function(e,t,r){var n=r(0),i=r(119),o=r(16),a=r(21),c=r(80);n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,n=o(e),s=a.f,u=i(n),l={},d=0;u.length>d;)void 0!==(r=s(n,t=u[d++]))&&c(l,t,r);return l}})},function(e,t,r){r(299),e.exports=r(7).Object.values},function(e,t,r){var n=r(0),i=r(121)(!1);n(n.S,"Object",{values:function(e){return i(e)}})},function(e,t,r){r(301),e.exports=r(7).Object.entries},function(e,t,r){var n=r(0),i=r(121)(!0);n(n.S,"Object",{entries:function(e){return i(e)}})},function(e,t,r){"use strict";r(113),r(303),e.exports=r(7).Promise.finally},function(e,t,r){"use strict";var n=r(0),i=r(7),o=r(1),a=r(49),c=r(115);n(n.P+n.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),r="function"==typeof e;return this.then(r?function(r){return c(t,e()).then((function(){return r}))}:e,r?function(r){return c(t,e()).then((function(){throw r}))}:e)}})},function(e,t,r){r(305),r(306),r(307),e.exports=r(7)},function(e,t,r){var n=r(1),i=r(0),o=r(60),a=[].slice,c=/MSIE .\./.test(o),s=function(e){return function(t,r){var n=arguments.length>2,i=!!n&&a.call(arguments,2);return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,r)}};i(i.G+i.B+i.F*c,{setTimeout:s(n.setTimeout),setInterval:s(n.setInterval)})},function(e,t,r){var n=r(0),i=r(86);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,r){for(var n=r(83),i=r(32),o=r(11),a=r(1),c=r(15),s=r(41),u=r(5),l=u("iterator"),d=u("toStringTag"),f=s.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(p),v=0;v<h.length;v++){var m,b=h[v],y=p[b],g=a[b],_=g&&g.prototype;if(_&&(_[l]||c(_,l,f),_[d]||c(_,d,b),s[b]=f,y))for(m in n)_[m]||o(_,m,n[m],!0)}},function(e,t,r){var n=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r,n){var i=t&&t.prototype instanceof l?t:l,o=Object.create(i.prototype),a=new E(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return w()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var c=g(a,r);if(c){if(c===u)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,a),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function l(){}function d(){}function f(){}var p={};p[i]=function(){return this};var h=Object.getPrototypeOf,v=h&&h(h(T([])));v&&v!==t&&r.call(v,i)&&(p=v);var m=f.prototype=l.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function y(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,c){var u=s(e[i],e,o);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(u.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function g(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,g(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:w}}function w(){return{value:void 0,done:!0}}return d.prototype=m.constructor=f,f.constructor=d,f[a]=d.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},b(y.prototype),y.prototype[o]=function(){return this},e.AsyncIterator=y,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new y(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(m),m[a]="Generator",m[i]=function(){return this},m.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=T,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},function(e,t,r){r(310),e.exports=r(122).global},function(e,t,r){var n=r(311);n(n.G,{global:r(88)})},function(e,t,r){var n=r(88),i=r(122),o=r(312),a=r(314),c=r(321),s=function(e,t,r){var u,l,d,f=e&s.F,p=e&s.G,h=e&s.S,v=e&s.P,m=e&s.B,b=e&s.W,y=p?i:i[t]||(i[t]={}),g=y.prototype,_=p?n:h?n[t]:(n[t]||{}).prototype;for(u in p&&(r=t),r)(l=!f&&_&&void 0!==_[u])&&c(y,u)||(d=l?_[u]:r[u],y[u]=p&&"function"!=typeof _[u]?r[u]:m&&l?o(d,n):b&&_[u]==d?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):v&&"function"==typeof d?o(Function.call,d):d,v&&((y.virtual||(y.virtual={}))[u]=d,e&s.R&&g&&!g[u]&&a(g,u,d)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,r){var n=r(313);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){var n=r(315),i=r(320);e.exports=r(90)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(316),i=r(317),o=r(319),a=Object.defineProperty;t.f=r(90)?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(89);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){e.exports=!r(90)&&!r(123)((function(){return 7!=Object.defineProperty(r(318)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,r){var n=r(89),i=r(88).document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,r){var n=r(89);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){"use strict";var n=r(13),i=r(124),o=r(323),a=r(130);function c(e){var t=new o(e),r=i(o.prototype.request,t);return n.extend(r,o.prototype,t),n.extend(r,t),r}var s=c(r(127));s.Axios=o,s.create=function(e){return c(a(s.defaults,e))},s.Cancel=r(131),s.CancelToken=r(337),s.isCancel=r(126),s.all=function(e){return Promise.all(e)},s.spread=r(338),e.exports=s,e.exports.default=s},function(e,t,r){"use strict";var n=r(13),i=r(125),o=r(324),a=r(325),c=r(130);function s(e){this.defaults=e,this.interceptors={request:new o,response:new o}}s.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=c(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},s.prototype.getUri=function(e){return e=c(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){s.prototype[e]=function(t,r){return this.request(n.merge(r||{},{method:e,url:t}))}})),n.forEach(["post","put","patch"],(function(e){s.prototype[e]=function(t,r,i){return this.request(n.merge(i||{},{method:e,url:t,data:r}))}})),e.exports=s},function(e,t,r){"use strict";var n=r(13);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,r){"use strict";var n=r(13),i=r(326),o=r(126),a=r(127);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return c(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(c(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,r){"use strict";var n=r(13);e.exports=function(e,t,r){return n.forEach(r,(function(r){e=r(e,t)})),e}},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var s,u=[],l=!1,d=-1;function f(){l&&s&&(l=!1,s.length?u=s.concat(u):d=-1,u.length&&p())}function p(){if(!l){var e=c(f);l=!0;for(var t=u.length;t;){for(s=u,u=[];++d<t;)s&&s[d].run();d=-1,t=u.length}s=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new h(e,t)),1!==u.length||l||c(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";var n=r(13);e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},function(e,t,r){"use strict";var n=r(129);e.exports=function(e,t,r){var i=r.config.validateStatus;!i||i(r.status)?e(r):t(n("Request failed with status code "+r.status,r.config,null,r.request,r))}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,r){"use strict";var n=r(332),i=r(333);e.exports=function(e,t){return e&&!n(t)?i(e,t):t}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var n=r(13),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,o,a={};return e?(n.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=n.trim(e.substr(0,o)).toLowerCase(),r=n.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([r]):a[t]?a[t]+", "+r:r}})),a):a}},function(e,t,r){"use strict";var n=r(13);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=i(window.location.href),function(t){var r=n.isString(t)?i(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var n=r(13);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,i,o,a){var c=[];c.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&c.push("expires="+new Date(r).toGMTString()),n.isString(i)&&c.push("path="+i),n.isString(o)&&c.push("domain="+o),!0===a&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";var n=r(131);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"shimGetUserMedia",(function(){return ve})),r.d(n,"shimGetDisplayMedia",(function(){return me})),r.d(n,"shimMediaStream",(function(){return be})),r.d(n,"shimOnTrack",(function(){return ye})),r.d(n,"shimGetSendersWithDtmf",(function(){return ge})),r.d(n,"shimGetStats",(function(){return _e})),r.d(n,"shimSenderReceiverGetStats",(function(){return Se})),r.d(n,"shimAddTrackRemoveTrackWithNative",(function(){return Ee})),r.d(n,"shimAddTrackRemoveTrack",(function(){return Te})),r.d(n,"shimPeerConnection",(function(){return we})),r.d(n,"fixNegotiationNeeded",(function(){return Oe}));var i={};r.r(i),r.d(i,"shimGetUserMedia",(function(){return Re})),r.d(i,"shimGetDisplayMedia",(function(){return Ie})),r.d(i,"shimPeerConnection",(function(){return Ne})),r.d(i,"shimReplaceTrack",(function(){return Ae}));var o={};r.r(o),r.d(o,"shimGetUserMedia",(function(){return ke})),r.d(o,"shimGetDisplayMedia",(function(){return De})),r.d(o,"shimOnTrack",(function(){return je})),r.d(o,"shimPeerConnection",(function(){return xe})),r.d(o,"shimSenderGetStats",(function(){return Me})),r.d(o,"shimReceiverGetStats",(function(){return Le})),r.d(o,"shimRemoveStream",(function(){return Fe})),r.d(o,"shimRTCDataChannel",(function(){return Ue})),r.d(o,"shimAddTransceiver",(function(){return Ve})),r.d(o,"shimCreateOffer",(function(){return Be})),r.d(o,"shimCreateAnswer",(function(){return Ge}));var a={};r.r(a),r.d(a,"shimLocalStreamsAPI",(function(){return We})),r.d(a,"shimRemoteStreamsAPI",(function(){return He})),r.d(a,"shimCallbacksAPI",(function(){return Ke})),r.d(a,"shimGetUserMedia",(function(){return Je})),r.d(a,"shimConstraints",(function(){return ze})),r.d(a,"shimRTCIceServerUrls",(function(){return Ye})),r.d(a,"shimTrackEventTransceiver",(function(){return Xe})),r.d(a,"shimCreateOfferLegacy",(function(){return qe}));var c={};r.r(c),r.d(c,"shimRTCIceCandidate",(function(){return Ze})),r.d(c,"shimMaxMessageSize",(function(){return et})),r.d(c,"shimSendThrowTypeError",(function(){return tt})),r.d(c,"shimConnectionState",(function(){return rt})),r.d(c,"removeAllowExtmapMixed",(function(){return nt}));var s,u,l,d,f,p,h,v,m={SDK_VERSION:r(132).version,PROCESS_ID:"",WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-ap-web-2.agoraio.cn"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-ap-web-4.agoraio.cn"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-2.agoraio.cn","cds-ap-web-3.agora.io","cds-ap-web-4.agoraio.cn"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-2.agoraio.cn","sua-ap-web-3.agora.io","sua-ap-web-4.agoraio.cn"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-2.agoraio.cn","uap-ap-web-3.agora.io","uap-ap-web-4.agoraio.cn"],GATEWAY_ADDRESS:"http://101.133.215.203:6080",GATEWAY_CONNECT_TIMEOUT:2e3,GATEWAY_ERTRY_TIMEOUT:12e5,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"192.168.199.245",EVENT_REPORT_BACKUP_DOMAIN:"192.168.199.245",WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,HTTP_CONNECT_TIMEOUT:5e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_TIMEOUT:1e4,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],FILEPATH_LENMAX:255,SUBSCRIBE_TCC:!1,PING_PONG_TIME_OUT:10,DUALSTREAM_OPERATION_CHECK:!0,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:1e3,MEDIA_ELEMENT_EXISTS_DEPTH:3,CANDIDATE_TIMEOUT:2e3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,SHOW_REPORT_INVOKER_LOG:!1,STATS_FILTER:{transportId:!0,googTrackId:!0},JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:200,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:200,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3};!function(e){e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS_X="Mac OS X",e.MAC_OS="Mac OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot"}(s||(s={})),function(e){e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED",e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED"}(u||(u={})),function(e){e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED"}(l||(l={})),function(e){e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE",e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING"}(d||(d={})),function(e){e.CHANNEL_BANNED="CHANNEL_BANNED",e.IP_BANNED="IP_BANNED",e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED",e.DEVELOPER_INVALID="DEVELOPER_INVALID",e.TOKEN_INVALID="TOKEN_INVALID"}(f||(f={})),function(e){e[e.AUDIO_ONLY=2]="AUDIO_ONLY",e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM"}(p||(p={})),function(e){e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM"}(h||(h={})),function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_SUPPORT="NOT_SUPPORT",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORT="OPERATION_ABORT",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOTE_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.STREAM_ALREADY_INITIALIZED="STREAM_ALREADY_INITIALIZED",e.STREAM_IS_CLOSED="STREAM_IS_CLOSED",e.ABORT_OTHER_INIT="ABORT_OTHER_INIT",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.CAN_NOT_AUTOPLAY="CAN_NOT_AUTOPLAY",e.HIGH_STREAM_NO_VIDEO_TRACK="HIGH_STREAM_NO_VIDEO_TRACK",e.SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM="SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM",e.TOKEN_GENERATOR_FUNCTION_ERROR="TOKEN_GENERATOR_FUNCTION_ERROR",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.UID_CONFLICT="UID_CONFLICT",e.TRACK_ALREADY_PUBLISHED="TRACK_ALREADY_PUBLISHED",e.TRACK_IS_NOT_PUBLISHED="TRACK_IS_NOT_PUBLISHED",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.TRACK_IS_NOT_SUBSCRIBED="TRACK_IS_NOT_SUBSCRIBED",e.SUBSCRIPTION_IS_IN_PROGRESS="SUBSCRIPTION_IS_IN_PROGRESS",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.EFFECT_ID_CONFLICTED="EFFECT_ID_CONFLICTED",e.EFFECT_SOUND_ID_NOT_FOUND="EFFECT_SOUND_ID_NOT_FOUND",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER="CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER",e.REQUEST_TO_LIVE_STREAMING_WORKER_FAILED="REQUEST_TO_LIVE_STREAMING_WORKER_FAILED",e.PUSH_RTMP_URL_CONFLICT="PUSH_RTMP_URL_CONFLICT",e.PULL_URL_CONFLICT="PULL_URL_CONFLICT",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE"}(v||(v={}));var b=r(133),y=new(r.n(b).a);y.setLogLevel(y.DEBUG);var g,_,S=y,E=Array.prototype,T=function(){function e(){Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"addListener",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.addListener=this.on}return Object.defineProperty(e.prototype,"getListeners",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._events[e]?E.map.call(this._events[e],(function(e){return e.listener})):[]}}),Object.defineProperty(e.prototype,"on",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._events[e]||(this._events[e]=[]);var r=this._events[e];-1===this._indexOfListener(r,t)&&r.push({listener:t,once:!1})}}),Object.defineProperty(e.prototype,"once",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._events[e]||(this._events[e]=[]);var r=this._events[e];-1===this._indexOfListener(r,t)&&r.push({listener:t,once:!0})}}),Object.defineProperty(e.prototype,"off",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._events[e]||(this._events[e]=[]);var r=this._events[e],n=this._indexOfListener(r,t);-1!==n&&E.splice.call(r,n,1)}}),Object.defineProperty(e.prototype,"removeAllListeners",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e?delete this._events[e]:this._events={}}}),Object.defineProperty(e.prototype,"emit",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._events[e]||(this._events[e]=[]);for(var n=this._events[e],i=0;i<n.length;i+=1){var o=n[i];o.once&&this.off(e,o.listener),o.listener.apply(this,t||[])}}}),Object.defineProperty(e.prototype,"_indexOfListener",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){for(var r=e.length;r--;)if(e[r].listener===t)return r;return-1}}),e}(),w=function(e){var t=e;void 0===t&&(t=7);var r=Math.random().toString(16).substr(2,t).toLowerCase();return r.length===t?r:r+w(t-r.length)},O=(g=function(e,t){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),C=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},P=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},R=function(e){function t(t){var r=e.call(this)||this;Object.defineProperty(r,"_appId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(r,"_serverUrl",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(r,"_serverPort",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"_connectBeginTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_revState",{enumerable:!0,configurable:!0,writable:!0,value:"DISCONNECTED"}),Object.defineProperty(r,"_curState",{enumerable:!0,configurable:!0,writable:!0,value:"DISCONNECTED"}),Object.defineProperty(r,"_webSocket",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_userId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_keepLiveInterval",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"_handleOnline",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(r,"_connectTimeout",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"handleMediaServerEvents",{enumerable:!0,configurable:!0,writable:!0,value:function(){}});var n=r;return t&&t.appId&&(n._appId=t.appId),r}return O(t,e),Object.defineProperty(t.prototype,"setAppInfo",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.appId;this._appId=t}}),Object.defineProperty(t.prototype,"configServer",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._serverUrl=e,this._serverPort=t}}),Object.defineProperty(t.prototype,"connectCTS",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;return new Promise((function(e,r){if(!t._connectBeginTime&&(t._connectBeginTime=Date.now()),t._webSocket)return S.error("[connectCTS] alreadly connected."),!1;var n="ws://"+t._serverUrl+":"+t._serverPort;t._connectTimeout=window.setTimeout((function(){clearTimeout(t._connectTimeout),t._emitConnectionState("DISCONNECTING",t._revState,f.NETWORK_ERROR)}),1e4);var i=new WebSocket(n);t._webSocket=i,t._emitConnectionState("CONNECTING",t._revState),i.onopen=function(){S.info(" serve connected..."),t._connectTimeout&&clearTimeout(t._connectTimeout),t._connectBeginTime=void 0,t._emitConnectionState("CONNECTED",t._revState),t._keepLiveInterval=window.setInterval((function(){t.doKeepLive()}),1e4),e()},i.onclose=function(e){t._keepLiveInterval&&clearInterval(t._keepLiveInterval),t._connectTimeout&&clearTimeout(t._connectTimeout),S.info(" serve disconnected...",e.code),"RECONNECTING"!==t._curState&&t._emitConnectionState("DISCONNECTING",t._revState),1e3===e.code||1005===e.code?"RECONNECTING"!==t._curState&&t._emitConnectionState("DISCONNECTING",t._revState,f.LEAVE):"RECONNECTING"!==t._curState&&t._emitConnectionState("RECONNECTING",t._revState),t._webSocket=null,r()},t._webSocket.onerror=function(e){S.error("WebSocket with some error ",e)},i.onmessage=function(e){var r=JSON.parse(e.data),n=r.Cmd,i=(r.Encrypt,r.Content),o=JSON.parse(i),a=o.Code;switch(n){case"Online":if(0===a){var c=o.UserId;t._userId=c,t._handleOnline&&t._handleOnline(!0,t._userId)}else t._handleOnline&&t._handleOnline(!1,a);break;default:t.handleMediaServerEvents&&t.handleMediaServerEvents(n,o)}}}))}}),Object.defineProperty(t.prototype,"doKeepLive",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e={Cmd:"KeepLive",Content:""};this._sendMessage(e)}}),Object.defineProperty(t.prototype,"doOnline",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return C(this,void 0,void 0,(function(){var t;return P(this,(function(r){return t=this,[2,new Promise((function(r,n){var i={Cmd:"Online"};i.AppId=t._appId,i.Content=JSON.stringify(Object.assign({},e)),t._handleOnline=function(e,t){e?r(t):(S.error("user online failure, code => ",t),n(t))},t._sendMessage(i)}))]}))}))}}),Object.defineProperty(t.prototype,"doOffline",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"Offline"};t.Content=JSON.stringify({UserId:this._userId,UserSId:e}),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"doPublish",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r={Cmd:"DoPublish"},n={StreamId:this._userId,ClientType:"sdk"};if("[object Object]"===Object.prototype.toString.call(e)&&(n.AVSetting=JSON.stringify(Object.assign({HasAudio:!0,HasVideo:!0},e))),t){var i=t.Uri,o=t.Account,a=t.Pwd;r.Content={Uri:i||"",Account:o||"",Pwd:a||""}}r.Content=JSON.stringify(n),this._sendMessage(r)}}),Object.defineProperty(t.prototype,"doRePublish",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"DoRePublish"},r={StreamId:this._userId,ClientType:"sdk"};"[object Object]"===Object.prototype.toString.call(e)&&(r.AVSetting=JSON.stringify(Object.assign({HasAudio:!0,HasVideo:!0},e))),t.Content=JSON.stringify(r),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"doPublishS",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"DoPublishS"},r={StreamId:this._userId};if(e){var n=e.Uri,i=e.Account,o=e.Pwd;t.Content={Uri:n||"",Account:i||"",Pwd:o||""}}t.Content=JSON.stringify(r),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"doUnPublish",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e={Cmd:"DoUnPublish"};e.Content=JSON.stringify({StreamId:this._userId}),this._sendMessage(e)}}),Object.defineProperty(t.prototype,"doUnPublishS",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e={Cmd:"DoUnPublishS"};e.Content=JSON.stringify({StreamId:this._userId}),this._sendMessage(e)}}),Object.defineProperty(t.prototype,"doSubscribe",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"DoSubscribe"};t.Content=JSON.stringify(Object.assign({SubSessId:w(32)},e)),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"doUnSubscribe",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"DoUnSubscribe"};t.Content=JSON.stringify(Object.assign({StreamId:e})),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"doReNewToken",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"RenewAcsToken"};t.Content=JSON.stringify({AcsToken:e}),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"sendAnswer",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n={Cmd:"Answer"},i={StreamId:e,Sdp:t};void 0!==r&&(i.SubStream=r),n.Content=JSON.stringify(i),this._sendMessage(n)}}),Object.defineProperty(t.prototype,"sendIceCandidate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n={Cmd:"Ice"},i={StreamId:e,Sdp:t};void 0!==r&&(i.SubStream=r),n.Content=JSON.stringify(i),this._sendMessage(n)}}),Object.defineProperty(t.prototype,"setClientRole",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"ChanMsg"};t.Content=JSON.stringify({Cmd:"SetRole",UserId:this._userId,Role:e,ToSvr:"MNode"}),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"enableDualStream",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"ChanMsg"};t.Content=JSON.stringify({Cmd:"DualStream",UserId:this._userId,Enable:e,ToSvr:"MNode"}),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"setAVStatus",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n={Cmd:"ChanMsg"};n.Content=JSON.stringify({Cmd:"SetAVStatus",StreamId:e,RecvAudio:t,RecvVideo:r,ToSvr:"GNode"}),this._sendMessage(n)}}),Object.defineProperty(t.prototype,"setRemoteVStrmType",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r={Cmd:"ChanMsg"};r.Content=JSON.stringify({Cmd:"SetRemoteVStrmType",UserId:this._userId,StreamId:e,StrmType:t,ToSvr:"GNode"}),this._sendMessage(r)}}),Object.defineProperty(t.prototype,"reportAVStat",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.TimeUsed,r=e.AudNum,n=e.VidSize,i={Cmd:"ReportAVStat"};i.TimeUsed=t,i.AudNum=r,i.VidSize=n,i.AudBitrate=0,i.VidBitrate=0,i.Content="",this._sendMessage(i)}}),Object.defineProperty(t.prototype,"reportArStats",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"ReportArStats"};t.Content=JSON.stringify(e),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"enableLocalVideo",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"ChanMsg"};t.Content=JSON.stringify({Cmd:"EnableLocalVideo",UserId:this._userId,Enable:e,ToSvr:"MNode"}),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"enableLocalAudio",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"ChanMsg"};t.Content=JSON.stringify({Cmd:"EnableLocalAudio",UserId:this._userId,Enable:e,ToSvr:"MNode"}),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"muteLocalVideoStream",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"ChanMsg"};t.Content=JSON.stringify({Cmd:"MuteLocalVideoStream",UserId:this._userId,Mute:e,ToSvr:"MNode"}),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"muteLocalAudioStream",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"ChanMsg"};t.Content=JSON.stringify({Cmd:"MuteLocalAudioStream",UserId:this._userId,Mute:e,ToSvr:"MNode"}),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"disconnectCTS",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._webSocket&&this._webSocket.close(),this._webSocket=null}}),Object.defineProperty(t.prototype,"clearEventEmitter",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.removeAllListeners()}}),Object.defineProperty(t.prototype,"_sendMessage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return"object"!=typeof e?(S.error("[_sendMessage] msg must be object."),!1):(this._webSocket&&this._webSocket.send(JSON.stringify(e)),!0)}}),Object.defineProperty(t.prototype,"_emitGateWayEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.emit("@gateway_events",{type:e,data:t})}}),Object.defineProperty(t.prototype,"_emitConnectionState",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){e!==this._revState&&("RECONNECTING"===this._curState&&"CONNECTED"!==e||(this.handleMediaServerEvents&&this.handleMediaServerEvents("connection-state-change",{curState:e,revState:t,reason:r}),this._curState=e,this._revState=e,S.debug("["+this._userId+"] connection state change: "+t+" -> "+e)))}}),t}(T);!function(e){e.CONNECTION_STATE_CHANGE="@connectionStateChange",e.ICE_CONNECTION_STATE_CHANGE="@iceConnectionStateChange",e.ICE_CANDIDATE="@iceCandidate",e.CREATE_ANSWER="@createAnswer",e.TRACK_ADDED="@trackAdded",e.RTC_NEED_RENEGOTIATE="@need_renegotiate",e.TRACK_ENDED="track-ened",e.FIRST_FRAME_DECODED="first-frame-decoded",e.UPDATE_MUTE_STATE="@updateMuteState",e.VIDEO_SIZE_CHANGE="video-resize",e.FIRST_VIDEO_DECODE="first-video-decode",e.FIRST_VIDEO_RECEIVED="first-video-received",e.FIRST_AUDIO_DECODE="first-audio-decode",e.FIRST_AUDIO_RECEIVED="first-audio-receivd",e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.ON_SESSION_INIT="SessInit",e.ON_PUBLISH="DoPublish",e.ON_PUBLISH_EX="DoPublishS",e.ON_RE_PUBLISH="DoRePublish",e.ON_SUBSCRIBE="DoSubscribe",e.ON_ICE="Ice",e.ON_CHANNEL_MESSAGE="ChanMsg",e.ON_CHANNEL_USER_ONLINE="B_UserOnline",e.ON_CHANNEL_USER_OFFLINE="B_UserOffline",e.ON_CHANNEL_SET_USER_ROLE="SetRole",e.ON_CHANNEL_DUALSTREAM_ENABLE="DualStream",e.ON_CHANNEL_USER_STREAM_OPEN="B_StreamOpen",e.ON_CHANNEL_USER_STREAM_CLOSE="B_StreamClose",e.ON_CHANNEL_USER_ENABLE_VIDEO="EnableLocalVideo",e.ON_CHANNEL_USER_ENABLE_AUDIO="EnableLocalAudio",e.ON_CHANNEL_USER_MUTE_VIDEO="MuteLocalVideoStream",e.ON_CHANNEL_USER_MUTE_AUDIO="MuteLocalAudioStream"}(_||(_={}));var I,N=_,A=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ArRTCException"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=e;var n="ArRTCError".concat(" ").concat(this.code,": ");this.message=t[0]?n.concat(t[0]):n,this.data=t[1]?t[1]:{}},k=r(50),D=r.n(k),j=function(){return(j=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},x=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},M=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};!function(e){var t,r;function n(e,t){return x(this,void 0,void 0,(function(){return M(this,(function(n){switch(n.label){case 0:return[4,r.post(e,j({},t)).then((function(e){return e.data})).catch((function(e){e.config;return Promise.resolve({code:-1,msg:e.message})}))];case 1:return[2,n.sent()]}}))}))}e.joinGateway=function(e){return new Promise((function(i,o){t=m.GATEWAY_ADDRESS,r=D.a.create({baseURL:t,timeout:m.GATEWAY_CONNECT_TIMEOUT});var a="/arapi/v1?action=".concat("wrtc_gateway"),c={opid:133,ts:Date.now()};!function t(){return Promise.race([n(a,j(j({},c),e)),n(a,j(j({},c),e))]).then((function(e){var r=e.code;e.msg;if(0===r)i(e);else{if(-1!==r)throw 13===r?(o("DEVELOPER_INVALID"),new A("DEVELOPER_INVALID")):14===r?(o("UID_BANNED"),new A("UID_BANNED")):15===r?(o("IP_BANNED"),new A("IP_BANNED")):16===r?(o("CHANNEL_BANNED"),new A("CHANNEL_BANNED")):101===r?(o("APPID_INVALID"),new A("APPID_INVALID")):2002===r?(o("DEVELOPER_INVALID"),new A("DEVELOPER_INVALID")):109===r?(o("TOKEN_EXPIRED"),new A("TOKEN_EXPIRED","You must request a new token from your server and call join to use the new token to join the channel")):110===r?new A("TOKEN_INVALID","make sure token is right and try angain please"):(o("SERVER_ERROR"),new A("SERVER_ERROR","there are some problem whth error code : "+r));setTimeout((function(){t()}),m.GATEWAY_CONNECT_TIMEOUT)}}))}()}))}}(I||(I={}));var L=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),F=function(e){function t(t,r){var n=e.call(this)||this;return Object.defineProperty(n,"peer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_ID",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_originMediaStreamTrack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_mediaStreamTrack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_latestRTCStatsReport",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"trackMediaType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._ID=r||w(8),n._originMediaStreamTrack=t,n._mediaStreamTrack=t,n}return L(t,e),Object.defineProperty(t.prototype,"getTrackId",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._ID}}),Object.defineProperty(t.prototype,"getMediaStreamTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._mediaStreamTrack}}),t}(T),U=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),V=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},B=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},G=function(e){function t(t,r){var n=e.call(this,t,r)||this;return Object.defineProperty(n,"trackMediaType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"isMuted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_userId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_isClosed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_handleTrackEnded",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.isMuted=!1,n._userId=null,n._isClosed=!1,t.addEventListener("ended",n.emit.bind(n,"track-ended")),n}return U(t,e),Object.defineProperty(t.prototype,"getUserId",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._userId}}),Object.defineProperty(t.prototype,"setMute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"boolean"==typeof e&&(this.isMuted=!!e,this._originMediaStreamTrack.enabled=!e,this.emit(N.UPDATE_MUTE_STATE,this.isMuted))}}),Object.defineProperty(t.prototype,"close",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&this._mediaStreamTrack.stop(),this._isClosed=!0}}),Object.defineProperty(t.prototype,"_setUserId",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._userId=e}}),Object.defineProperty(t.prototype,"_updateOriginMediaStreamTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return V(this,void 0,void 0,(function(){return B(this,(function(e){return[2]}))}))}}),Object.defineProperty(t.prototype,"_updatePlayerSource",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_getDefaultPlayerConfig",{enumerable:!1,configurable:!0,writable:!0,value:function(){return{}}}),t}(F),W=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),H=function(e){function t(t,r){var n=e.call(this,t,r)||this;Object.defineProperty(n,"trackMediaType",{enumerable:!0,configurable:!0,writable:!0,value:void 0});n.getMediaStreamTrack();return n}return W(t,e),t}(F);function K(e,t,r){return{sampleRate:e,stereo:t,bitrate:r}}function J(e,t,r,n,i,o){return{width:e,height:t,frameRate:r||n?{ideal:r,max:n}:void 0,bitrateMin:i,bitrateMax:o}}var z={"90p":J(160,90),"90p_1":J(160,90),"120p":J(160,120,15,15,30,65),"120p_1":J(160,120,15,15,30,65),"120p_3":J(120,120,15,15,30,50),"120p_4":J(212,120),"180p":J(320,180,15,15,30,140),"180p_1":J(320,180,15,15,30,140),"180p_3":J(180,180,15,15,30,100),"180p_4":J(240,180,15,15,30,120),"240p":J(320,240,15,15,40,200),"240p_1":J(320,240,15,15,40,200),"240p_3":J(240,240,15,15,40,140),"240p_4":J(424,240,15,15,40,220),"360p":J(640,360,15,15,80,400),"360p_1":J(640,360,15,15,80,400),"360p_3":J(360,360,15,15,80,260),"360p_4":J(640,360,30,30,80,600),"360p_6":J(360,360,30,30,80,400),"360p_7":J(480,360,15,15,80,320),"360p_8":J(480,360,30,30,80,490),"360p_9":J(640,360,15,15,80,800),"360p_10":J(640,360,24,24,80,800),"360p_11":J(640,360,24,24,80,1e3),"480p":J(640,480,15,15,100,500),"480p_1":J(640,480,15,15,100,500),"480p_2":J(640,480,30,30,100,1e3),"480p_3":J(480,480,15,15,100,400),"480p_4":J(640,480,30,30,100,750),"480p_6":J(480,480,30,30,100,600),"480p_8":J(848,480,15,15,100,610),"480p_9":J(848,480,30,30,100,930),"480p_10":J(640,480,10,10,100,400),"720p":J(1280,720,15,15,120,1130),"720p_1":J(1280,720,15,15,120,1130),"720p_2":J(1280,720,30,30,120,2e3),"720p_3":J(1280,720,30,30,120,1710),"720p_5":J(960,720,15,15,120,910),"720p_6":J(960,720,30,30,120,1380),"1080p":J(1920,1080,15,15,120,2080),"1080p_1":J(1920,1080,15,15,120,2080),"1080p_2":J(1920,1080,30,30,120,3e3),"1080p_3":J(1920,1080,30,30,120,3150),"1080p_5":J(1920,1080,60,60,120,4780),"1440p":J(2560,1440,30,30,120,4850),"1440p_1":J(2560,1440,30,30,120,4850),"1440p_2":J(2560,1440,60,60,120,7350),"4k":J(3840,2160,30,30,120,8910),"4k_1":J(3840,2160,30,30,120,8910),"4k_3":J(3840,2160,60,60,120,13500)},Y={"480p":J(640,480,1,5),"480p_1":J(640,480,1,5),"480p_2":J(640,480,25,30),"720p":J(1280,720,1,5),"720p_1":J(1280,720,1,5),"720p_2":J(1280,720,25,30),"1080p":J(1920,1080,1,5),"1080p_1":J(1920,1080,1,5),"1080p_2":J(1920,1080,25,30)},X={speech_low_quality:K(16e3,!1,void 0),speech_standard:K(32e3,!1,18),music_standard:K(48e3,!1,void 0),standard_stereo:K(48e3,!0,56),high_quality:K(48e3,!1,128),high_quality_stereo:K(48e3,!0,192)},q={},$=function(){return function(){var e=void 0,t=navigator.userAgent,r=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];"Chrome"===r[1]&&null!=(e=t.match(/(OPR(?=\/))\/?(\d+)/i))&&(r=e),"Safari"===r[1]&&null!=(e=t.match(/version\/(\d+)/i))&&(r[2]=e[1]),~t.toLowerCase().indexOf("qqbrowser")&&null!=(e=t.match(/(qqbrowser(?=\/))\/?(\d+)/i))&&(r=e),~t.toLowerCase().indexOf("micromessenger")&&null!=(e=t.match(/(micromessenger(?=\/))\/?(\d+)/i))&&(r=e),~t.toLowerCase().indexOf("edge")&&null!=(e=t.match(/(edge(?=\/))\/?(\d+)/i))&&(r=e),~t.toLowerCase().indexOf("trident")&&null!=(e=/\brv[ :]+(\d+)/g.exec(t)||[])&&(r=[null,"IE",e[1]]);var n=void 0,i=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var o in i){var a=i[o];if(a.r.test(navigator.userAgent)){n=a.s;break}}return{name:r[1],version:r[2],os:n}}()},Q=function(){return $().os};q.getBrowserInfo=$,q.getBrowserOS=Q,q.isChrome=function(){var e=$();return e.name&&"Chrome"===e.name},q.isSafari=function(){var e=$();return e.name&&"Safari"===e.name},q.isEdge=function(){var e=$();return e.name&&"Edge"===e.name},q.isFireFox=function(){var e=$();return e.name&&"Firefox"===e.name},q.isOpera=function(){var e=$();return e.name&&"OPR"===e.name},q.isQQBrowser=function(){var e=$();return e.name&&"QQBrowser"===e.name},q.isWeChatBrowser=function(){var e=$();return e.name&&"MicroMessenger"===e.name},q.isSupportedPC=function(){var e=Q();return"Linux"===e||"Mac OS X"===e||"Mac OS"===e||-1!==e.indexOf("Windows")},q.isSupportedMobile=function(){var e=Q();return"Android"===e||"iOS"===e},q.getBrowserVersion=function(){return $().version},q.isChromeKernel=function(){return!!navigator.userAgent.match(/chrome\/[\d]./i)},q.isLegacyChrome=function(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35};var Z,ee=q;!function(e){var t=!0;ee.getBrowserInfo().os!==s.IOS&&"MicroMessenger"!==ee.getBrowserInfo().name||(t=!1);var r=!1;navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)||(r=!0),e.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),e.getStreamFromExtension="Chrome"===ee.getBrowserInfo().name&&34<Number(ee.getBrowserInfo().version),e.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var e=new RTCPeerConnection,t=!1;try{e.addTransceiver("audio"),t=!0}catch(e){}return e.close(),t}(),e.supportMinBitrate="Chrome"===ee.getBrowserInfo().name||"Edge"===ee.getBrowserInfo().name,e.supportMaxBitrateInEncodingParameters="Chrome"===ee.getBrowserInfo().name&&68<=Number(ee.getBrowserInfo().version)||"Firefox"===ee.getBrowserInfo().name&&64<=Number(ee.getBrowserInfo().version),e.supportDualStream=t,e.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,e.supportWebGL="undefined"!=typeof WebGLRenderingContext,e.webAudioWithAEC=r}(Z||(Z={}));var te=Z;let re=!0,ne=!0;function ie(e,t,r){const n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}function oe(e,t,r){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return i.apply(this,arguments);const o=e=>{const t=r(e);t&&n(t)};return this._eventMap=this._eventMap||{},this._eventMap[n]=o,i.apply(this,[e,o])};const o=n.removeEventListener;n.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[r])return o.apply(this,arguments);const n=this._eventMap[r];return delete this._eventMap[r],o.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function ae(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(re=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function ce(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(ne=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function se(){if("object"==typeof window){if(re)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function ue(e,t){ne&&console.warn(e+" is deprecated, please use "+t+" instead.")}function le(e){const{navigator:t}=e,r={browser:null,version:null};if(void 0===e||!e.navigator)return r.browser="Not a browser.",r;if(t.mozGetUserMedia)r.browser="firefox",r.version=ie(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)r.browser="chrome",r.version=ie(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))r.browser="edge",r.version=ie(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return r.browser="Not a supported browser.",r;r.browser="safari",r.version=ie(t.userAgent,/AppleWebKit\/(\d+)\./,1),r.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return r}function de(e){return"[object Object]"===Object.prototype.toString.call(e)}function fe(e){return de(e)?Object.keys(e).reduce((function(t,r){const n=de(e[r]),i=n?fe(e[r]):e[r],o=n&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[r]:i})}),{}):e}function pe(e,t,r){const n=r?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return e.forEach(e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(t=>{e.forEach(r=>{r.type===n&&r.trackId===t.id&&function e(t,r,n){r&&!n.has(r.id)&&(n.set(r.id,r),Object.keys(r).forEach(i=>{i.endsWith("Id")?e(t,t.get(r[i]),n):i.endsWith("Ids")&&r[i].forEach(r=>{e(t,t.get(r),n)})}))}(e,r,i)})}),i}const he=se;function ve(e){const t=e&&e.navigator;if(!t.mediaDevices)return;const r=le(e),n=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach(r=>{if("require"===r||"advanced"===r||"mediaSource"===r)return;const n="object"==typeof e[r]?e[r]:{ideal:e[r]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];let e={};"number"==typeof n.ideal?(e[i("min",r)]=n.ideal,t.optional.push(e),e={},e[i("max",r)]=n.ideal,t.optional.push(e)):(e[i("",r)]=n.ideal,t.optional.push(e))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",r)]=n.exact):["min","max"].forEach(e=>{void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,r)]=n[e])})}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(r.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=n(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const a=r.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||a)){let r;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?r=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(r=["front"]),r)return t.mediaDevices.enumerateDevices().then(t=>{let a=(t=t.filter(e=>"videoinput"===e.kind)).find(e=>r.some(t=>e.label.toLowerCase().includes(t)));return!a&&t.length&&r.includes("back")&&(a=t[t.length-1]),a&&(e.video.deviceId=o.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=n(e.video),he("chrome: "+JSON.stringify(e)),i(e)})}e.video=n(e.video)}return he("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return r.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,r,n){i(e,e=>{t.webkitGetUserMedia(e,r,e=>{n&&n(o(e))})})}.bind(t),t.mediaDevices.getUserMedia){const e=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(t){return i(t,t=>e(t).then(e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(e=>{e.stop()}),new DOMException("","NotFoundError");return e},e=>Promise.reject(o(e))))}}}function me(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(t=>{const n=r.video&&r.video.width,i=r.video&&r.video.height,o=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},n&&(r.video.mandatory.maxWidth=n),i&&(r.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(r)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function be(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function ye(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",r=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===r.track.id):{track:r.track};const i=new Event("track");i.track=r.track,i.receiver=n,i.transceiver={receiver:n},i.streams=[t.stream],this.dispatchEvent(i)}),t.stream.getTracks().forEach(r=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===r.id):{track:r};const i=new Event("track");i.track=r,i.receiver=n,i.transceiver={receiver:n},i.streams=[t.stream],this.dispatchEvent(i)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else oe(e,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function ge(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){let i=r.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach(e=>{this._senders.push(t(this,e))})};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(e=>{const t=this._senders.find(t=>t.track===e);t&&this._senders.splice(this._senders.indexOf(t),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function _e(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,n]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach(e=>{const r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(t=>{r[t]=e.stat(t)}),t[r.id]=r}),t},o=function(e){return new Map(Object.keys(e).map(t=>[t,e[t]]))};if(arguments.length>=2){const n=function(e){r(o(i(e)))};return t.apply(this,[n,e])}return new Promise((e,r)=>{t.apply(this,[function(t){e(o(i(t)))},r])}).then(r,n)}}function Se(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>pe(t,e.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),oe(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>pe(t,e.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,r,n;return this.getSenders().forEach(r=>{r.track===e&&(t?n=!0:t=r)}),this.getReceivers().forEach(t=>(t.track===e&&(r?n=!0:r=t),t.track===e)),n||t&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Ee(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(e=>this._shimmedLocalStreams[e][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")});const t=this.getSenders();r.apply(this,arguments);const n=this.getSenders().filter(e=>-1===t.indexOf(e));this._shimmedLocalStreams[e.id]=[e].concat(n)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(t=>{const r=this._shimmedLocalStreams[t].indexOf(e);-1!==r&&this._shimmedLocalStreams[t].splice(r,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),i.apply(this,arguments)}}function Te(e){if(!e.RTCPeerConnection)return;const t=le(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Ee(e);const r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=r.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(e=>this._reverseStreams[e.id])};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){const r=new e.MediaStream(t.getTracks());this._streams[t.id]=r,this._reverseStreams[r.id]=t,t=r}n.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(i.id,"g"),n.id)}),new RTCSessionDescription({type:t.type,sdp:r})}function a(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:r})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const n=[].slice.call(arguments,1);if(1!==n.length||!n[0].getTracks().find(e=>e===t))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const i=this.getSenders().find(e=>e.track===t);if(i)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[r.id];if(o)o.addTrack(t),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const n=new e.MediaStream([t]);this._streams[r.id]=n,this._reverseStreams[n.id]=r,this.addStream(n)}return this.getSenders().find(e=>e.track===t)},["createOffer","createAnswer"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],n={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[t=>{const r=o(this,t);e[0].apply(null,[r])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):r.apply(this,arguments).then(e=>o(this,e))}};e.RTCPeerConnection.prototype[t]=n[t]}));const c=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=a(this,arguments[0]),c.apply(this,arguments)):c.apply(this,arguments)};const s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=s.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach(r=>{this._streams[r].getTracks().find(t=>e.track===t)&&(t=this._streams[r])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function we(e){const t=le(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),!e.RTCPeerConnection)return;const r=0===e.RTCPeerConnection.prototype.addIceCandidate.length;t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]}));const n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return r||arguments[0]?t.version<78&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}function Oe(e){oe(e,"negotiationneeded",e=>{if("stable"===e.target.signalingState)return e})}var Ce=r(134),Pe=r.n(Ce);function Re(e){const t=e&&e.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch(e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e)))}}function Ie(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function Ne(e){const t=le(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const r=new Event("enabled");r.enabled=e,this.dispatchEvent(r)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const r=Pe()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let r=!1;return(e=JSON.parse(JSON.stringify(e))).filter(e=>{if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&ue("RTCIceServer.url","RTCIceServer.urls");const n="string"==typeof t;return n&&(t=[t]),t=t.filter(e=>{if(0===e.indexOf("stun:"))return!1;const t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!r?(r=!0,!0):t&&!r}),delete e.url,e.urls=n?t[0]:t,!!t.length}})}(e.iceServers,t.version),se("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function Ae(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function ke(e){const t=le(e),r=e&&e.navigator,n=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,n){ue("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const e=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},t=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(r){return"object"==typeof r&&"object"==typeof r.audio&&(r=JSON.parse(JSON.stringify(r)),e(r.audio,"autoGainControl","mozAutoGainControl"),e(r.audio,"noiseSuppression","mozNoiseSuppression")),t(r)},n&&n.prototype.getSettings){const t=n.prototype.getSettings;n.prototype.getSettings=function(){const r=t.apply(this,arguments);return e(r,"mozAutoGainControl","autoGainControl"),e(r,"mozNoiseSuppression","noiseSuppression"),r}}if(n&&n.prototype.applyConstraints){const t=n.prototype.applyConstraints;n.prototype.applyConstraints=function(r){return"audio"===this.kind&&"object"==typeof r&&(r=JSON.parse(JSON.stringify(r)),e(r,"autoGainControl","mozAutoGainControl"),e(r,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[r])}}}}function De(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function je(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function xe(e){const t=le(e);if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;if(!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]})),t.version<68){const t=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,o]=arguments;return n.apply(this,[e||null]).then(e=>{if(t.version<53&&!i)try{e.forEach(e=>{e.type=r[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach((t,n)=>{e.set(n,Object.assign({},t,{type:r[t.type]||t.type}))})}return e}).then(i,o)}}function Me(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Le(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),oe(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Fe(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){ue("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function Ue(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Ve(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],r=e&&"sendEncodings"in e;r&&e.sendEncodings.forEach(e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const n=t.apply(this,arguments);if(r){const{sender:t}=n,r=t.getParameters();"encodings"in r||(r.encodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(r).catch(()=>{})))}return n})}function Be(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function Ge(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function We(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(r=>t.call(this,r,e)),e.getVideoTracks().forEach(r=>t.call(this,r,e))},e.RTCPeerConnection.prototype.addTrack=function(e,...r){return r&&r.forEach(e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const r=e.getTracks();this.getSenders().forEach(e=>{r.includes(e.track)&&this.removeTrack(e)})})}}function He(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach(e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const r=new Event("addstream");r.stream=t,e.dispatchEvent(r)})}),t.apply(e,arguments)}}}function Ke(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i};let c=function(e,t,r){const n=i.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n};t.setLocalDescription=c,c=function(e,t,r){const n=o.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.setRemoteDescription=c,c=function(e,t,r){const n=a.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.addIceCandidate=c}function Je(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,r=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>r(ze(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,n){t.mediaDevices.getUserMedia(e).then(r,n)}.bind(t))}function ze(e){return e&&void 0!==e.video?Object.assign({},e,{video:fe(e.video)}):e}function Ye(e){const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){const t=[];for(let r=0;r<e.iceServers.length;r++){let n=e.iceServers[r];!n.hasOwnProperty("urls")&&n.hasOwnProperty("url")?(ue("RTCIceServer.url","RTCIceServer.urls"),n=JSON.parse(JSON.stringify(n)),n.urls=n.url,delete n.url,t.push(n)):t.push(e.iceServers[r])}e.iceServers=t}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function Xe(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function qe(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find(e=>"audio"===e.receiver.track.kind);!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const r=this.getTransceivers().find(e=>"video"===e.receiver.track.kind);!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}var $e=r(45),Qe=r.n($e);function Ze(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const r=new t(e),n=Qe.a.parseCandidate(e.candidate),i=Object.assign(r,n);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,oe(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function et(e){if(!e.RTCPeerConnection)return;const t=le(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const r=function(e){if(!e||!e.sdp)return!1;const t=Qe.a.splitSections(e.sdp);return t.shift(),t.some(e=>{const t=Qe.a.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})},n=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const r=parseInt(t[1],10);return r!=r?-1:r},i=function(e){let r=65536;return"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r},o=function(e,r){let n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);const i=Qe.a.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?n=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==r&&(n=2147483637),n},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const e=n(arguments[0]),t=i(e),r=o(arguments[0],e);let a;a=0===t&&0===r?Number.POSITIVE_INFINITY:0===t||0===r?Math.max(t,r):Math.min(t,r);const c={};Object.defineProperty(c,"maxMessageSize",{get:()=>a}),this._sctp=c}return a.apply(this,arguments)}}function tt(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const r=e.send;e.send=function(){const n=arguments[0],i=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return r.apply(e,arguments)}}const r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=r.apply(this,arguments);return t(e,this),e},oe(e,"datachannel",e=>(t(e.channel,e.target),e))}function rt(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{const r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const r=new Event("connectionstatechange",e);t.dispatchEvent(r)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function nt(e){if(!e.RTCPeerConnection)return;const t=le(e);if("chrome"===t.browser&&t.version>=71)return;const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter(e=>"a=extmap-allow-mixed"!==e.trim()).join("\n")),r.apply(this,arguments)}}var it=function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const r=se,s=le(e),u={browserDetails:s,commonShim:c,extractVersion:ie,disableLog:ae,disableWarnings:ce};switch(s.browser){case"chrome":if(!n||!we||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),u;r("adapter.js shimming chrome."),u.browserShim=n,ve(e),be(e),we(e),ye(e),Te(e),ge(e),_e(e),Se(e),Oe(e),Ze(e),rt(e),et(e),tt(e),nt(e);break;case"firefox":if(!o||!xe||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),u;r("adapter.js shimming firefox."),u.browserShim=o,ke(e),xe(e),je(e),Fe(e),Me(e),Le(e),Ue(e),Ve(e),Be(e),Ge(e),Ze(e),rt(e),et(e),tt(e);break;case"edge":if(!i||!Ne||!t.shimEdge)return r("MS edge shim is not included in this adapter release."),u;r("adapter.js shimming edge."),u.browserShim=i,Re(e),Ie(e),Ne(e),Ae(e),et(e),tt(e);break;case"safari":if(!a||!t.shimSafari)return r("Safari shim is not included in this adapter release."),u;r("adapter.js shimming safari."),u.browserShim=a,Ye(e),qe(e),Ke(e),We(e),He(e),Xe(e),Je(e),Ze(e),et(e),tt(e),nt(e);break;default:r("Unsupported browser!")}return u}({window:window}),ot=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},at=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};function ct(e,t){return ot(this,void 0,void 0,(function(){var r,n,i,o;return at(this,(function(a){switch(a.label){case 0:if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new A(v.NOT_SUPPORT+"can not find getUserMedia");return t&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height)),r=te,n=new MediaStream,e.audioSource&&n.addTrack(e.audioSource),e.videoSource&&n.addTrack(e.videoSource),e.audio||e.video||e.screen?e.audio||e.video?(o={video:e.video,audio:e.audio},[4,navigator.mediaDevices.getUserMedia(o)]):[3,2]:[3,4];case 1:return[2,a.sent()];case 2:return e.screen&&r.getDisplayMedia?(i=Object.assign({},{width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}),e.screen.mediaSource&&~["screen","window","application"].indexOf(e.screen.mediaSource)&&Object.assign(i,{displaySurface:"screen"===e.screen.mediaSource?"monitor":e.screen.mediaSource}),[4,navigator.mediaDevices.getDisplayMedia({video:i,audio:!!e.screenAudio})]):[3,4];case 3:return[2,a.sent()];case 4:return[2]}}))}))}function st(e){return new Promise((function(t,r){S.debug("start check mediaStreamTrack resolution",e);var n=document.createElement("video");n.setAttribute("autoplay",""),n.setAttribute("muted",""),n.muted=!0,n.autoplay=!0,n.setAttribute("playsinline",""),n.setAttribute("style","position: absolute; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(n),n.addEventListener("playing",(function(){var r="";(n.videoWidth||"Firefox"!==ee.getBrowserInfo().name)&&(r="".concat(n.videoWidth.toString()," x ").concat(n.videoHeight.toString()),S.debug("get track resolution: ",r,e),t([n.videoWidth,n.videoHeight]),document.body.removeChild(n))})),n.srcObject=new MediaStream([e])}))}function ut(e){return"string"==typeof e?Object.assign({},z[e]):"[object Object]"===Object.prototype.toString.call(e)&&e}function lt(e){return"string"==typeof e?Object.assign({},X[e]):"[object Object]"===Object.prototype.toString.call(e)&&e}function dt(e){var t={};if(e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId=e.cameraId),!e.encoderConfig)return t;var r=ut(e.encoderConfig);return r?(t.width=r.width,t.height=r.height,ee.isLegacyChrome()&&(t.frameRate=r.frameRate),"Edge"===ee.getBrowserInfo().name&&"object"===t.frameRate&&(t.frameRate.max=60),"Firefox"===ee.getBrowserInfo().name&&(t.frameRate={ideal:30,max:30}),t):t}function ft(e){var t={};if(e.screenSourceType&&"Firefox"===ee.getBrowserInfo().name&&(~["screen","window","application"].indexOf(e.screenSourceType)||(t.mediaSource=e.screenSourceType)),!e.encoderConfig)return t;var r,n="string"==typeof(r=e.encoderConfig)?Object.assign({},Y[r]):"[object Object]"===Object.prototype.toString.call(r)&&r;return n?(t.width=n.width,t.height=n.height,ee.isLegacyChrome()&&(t.frameRate=n.frameRate),"Edge"===ee.getBrowserInfo().name&&"object"===t.frameRate&&(t.frameRate.max=60),"Firefox"===ee.getBrowserInfo().name&&(t.frameRate={ideal:30,max:30}),t):t}var pt,ht=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},vt=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},mt={timestamp:0,bitrate:{actualEncoded:0,transmit:0},videoRecv:[],videoSend:[],audioRecv:[],audioSend:[]};!function(e){e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver"}(pt||(pt={}));var bt,yt,gt=function(){function e(e,t){Object.defineProperty(this,"_stats",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"stats",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mediaBytesSent",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"mediaBytesRetransmit",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"mediaBytesTargetEncode",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"lastVideoFramesSent",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"lastDecodeVideoReceiverStats",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"lastVideoFramesDecode",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"lastVideoFramesRecv",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"onFirstVideoDecoded",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFirstVideoReceived",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFirstAudioReceived",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFirstAudioDecoded",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"report",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isFirstVideoReceived",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isFirstVideoDecoded",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isFirstAudioReceived",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isFirstAudioDecoded",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"intervalTimer",{enumerable:!0,configurable:!0,writable:!0,value:void 0});var r=this;this.stats=Object.assign({},mt),this.isFirstVideoReceived=!1,this.isFirstVideoDecoded=!1,this.isFirstAudioReceived=!1,this.isFirstAudioDecoded=!1,this.pc=e,this.options=t,this.intervalTimer=window.setInterval((function(){r.updateStats()}),this.options.updateInterval)}return Object.defineProperty(e.prototype,"updateStats",{enumerable:!1,configurable:!0,writable:!0,value:function(){return ht(this,void 0,void 0,(function(){var e,t;return vt(this,(function(r){switch(r.label){case 0:return e=this,[4,this.pc.getStats()];case 1:return t=r.sent(),e.report=t,e._stats=Object.assign({},mt),t.forEach((function(t){switch(t.type){case pt.OUTBOUND:"audio"===t.mediaType?e.processAudioOutboundStats(t):"video"===t.mediaType&&e.processVideoOutboundStats(t);break;case pt.INBOUND:"audio"===t.mediaType?e.processAudioInboundStats(t):"video"===t.mediaType&&e.processVideoInboundStats(t);break;case pt.TRANSPORT:var r=e.report.get(t.selectedCandidatePairId);r&&e.processCandidatePairStats(r);break;case pt.CANDIDATE_PAIR:t.selected&&e.processCandidatePairStats(t)}})),this._stats.timestamp=Date.now(),this.stats=this._stats,[2]}}))}))}}),Object.defineProperty(e.prototype,"processAudioOutboundStats",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._stats.audioSend.find((function(t){return t.ssrc===e.ssrc}));if(t||(t=Object.assign({},{bytes:0,packets:0,packetsLost:0,ssrc:0,rttMs:0}),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.trackId&&this.processAudioTrackSenderStats(e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{var r=this.findRemoteStatsId(e.ssrc,pt.REMOTE_INBOUND);r&&this.processRemoteInboundStats(r,t)}}}),Object.defineProperty(e.prototype,"processAudioInboundStats",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._stats.audioRecv.find((function(t){return t.ssrc===e.ssrc}));t||(t=Object.assign({},{jitterBufferMs:0,bytes:0,packetsLost:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0}),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.jitterBufferMs=1e3*e.jitter,e.trackId&&this.processAudioTrackReceiverStats(e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),0<t.receivedFrames&&!this.isFirstAudioReceived&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(),this.isFirstAudioReceived=!0),t.outputLevel&&0<t.outputLevel&&!this.isFirstAudioDecoded&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(),this.isFirstAudioDecoded=!0)}}),Object.defineProperty(e.prototype,"processAudioMediaSource",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.report.get(e);t&&(t.inputLevel=r.audioLevel)}}),Object.defineProperty(e.prototype,"getCodecFromCodecStats",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.report.get(e);if(!t)return"";var r=t.mimeType.match(/\/(.*)$/);return r&&r[1]?r[1]:""}}),Object.defineProperty(e.prototype,"processAudioTrackSenderStats",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.report.get(e);r&&(t.aecReturnLoss=r.echoReturnLoss||0,t.aecReturnLossEnhancement=r.echoReturnLossEnhancement||0)}}),Object.defineProperty(e.prototype,"processRemoteInboundStats",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.report.get(e);r&&(t.packetsLost=r.packetsLost,r.roundTripTime&&(t.rttMs=1e3*r.roundTripTime))}}),Object.defineProperty(e.prototype,"findRemoteStatsId",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=Array.from(this.report.values()).find((function(r){return r.type===t&&r.ssrc===e}));return r?r.id:null}}),Object.defineProperty(e.prototype,"processVideoOutboundStats",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._stats.videoSend.find((function(t){return t.ssrc===e.ssrc}));t||(t=Object.assign({},{firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,ssrc:0,rttMs:0}),this._stats.videoSend.push(t));var r=this.mediaBytesSent.get(e.ssrc);if(r?r.current=e.bytesSent:this.mediaBytesSent.set(e.ssrc,{current:e.bytesSent}),void 0!==e.retransmittedBytesSent){var n=this.mediaBytesRetransmit.get(e.ssrc);n?n.current=e.retransmittedBytesSent:this.mediaBytesRetransmit.set(e.ssrc,{current:e.retransmittedBytesSent})}if(e.totalEncodedBytesTarget){var i=this.mediaBytesTargetEncode.get(e.ssrc);i?i.current=e.totalEncodedBytesTarget:this.mediaBytesTargetEncode.set(e.ssrc,{current:e.totalEncodedBytesTarget})}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,e.totalEncodeTime&&e.framesEncoded&&(t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),e.trackId&&this.processVideoTrackSenderStats(e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{var o=this.findRemoteStatsId(e.ssrc,pt.REMOTE_INBOUND);o&&this.processRemoteInboundStats(o,t)}}}),Object.defineProperty(e.prototype,"processVideoInboundStats",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._stats.videoRecv.find((function(t){return t.ssrc===e.ssrc}));t||(t=Object.assign({},{firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packets:0,ssrc:0}),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded;var r=this.lastDecodeVideoReceiverStats.get(e.ssrc),n=this.lastVideoFramesDecode.get(e.ssrc),i=Date.now();if(r){var o=r.stats,a=i-r.lts;t.framesDecodeFreezeTime=o.framesDecodeFreezeTime,t.framesDecodeInterval=o.framesDecodeInterval,t.framesDecodeCount>o.framesDecodeCount?(r.lts=Date.now(),t.framesDecodeInterval=a,500<=t.framesDecodeInterval&&(t.framesDecodeFreezeTime+=t.framesDecodeInterval)):t.framesDecodeCount<o.framesDecodeCount&&(t.framesDecodeInterval=0)}if(n&&800<=i-n.lts?(t.decodeFrameRate=Math.round((t.framesDecodeCount-n.count)/((i-n.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:i,rate:t.decodeFrameRate})):n?t.decodeFrameRate=n.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:i,rate:0}),e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime),e.trackId&&this.processVideoTrackReceiverStats(e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),0<t.packets&&!this.isFirstVideoReceived&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.receivedFrame?t.receivedFrame.width:0,t.receivedFrame?t.receivedFrame.height:0),this.isFirstVideoReceived=!0),0<t.framesDecodeCount&&!this.isFirstVideoDecoded){var c=t.decodedFrame?t.decodedFrame.width:0,s=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(c,s),this.isFirstVideoDecoded=!0}this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:Object.assign({},t),lts:r?r.lts:Date.now()})}}),Object.defineProperty(e.prototype,"processVideoTrackReceiverStats",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.report.get(e);if(r){var n=this.lastVideoFramesRecv.get(t.ssrc),i=Date.now();t.framesReceivedCount=r.framesReceived;var o=0;n&&800<=i-n.lts?(o=Math.round((r.framesReceived-n.count)/((i-n.lts)/1e3)),this.lastVideoFramesRecv.set(t.ssrc,{count:r.framesReceived,lts:i,rate:o})):n?o=n.rate:this.lastVideoFramesRecv.set(t.ssrc,{count:r.framesReceived,lts:i,rate:0}),t.receivedFrame={width:r.frameWidth||0,height:r.frameHeight||0,frameRate:o||0},t.decodedFrame={width:r.frameWidth||0,height:r.frameHeight||0,frameRate:t.decodeFrameRate||0},t.outputFrame={width:r.frameWidth||0,height:r.frameHeight||0,frameRate:t.decodeFrameRate||0},r.jitterBufferDelay&&r.jitterBufferEmittedCount&&(t.jitterBufferMs=1e3*r.jitterBufferDelay/r.jitterBufferEmittedCount,t.currentDelayMs=1e3*r.jitterBufferDelay/r.jitterBufferEmittedCount)}}}),Object.defineProperty(e.prototype,"processAudioTrackReceiverStats",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.report.get(e);if(r){t.accelerateRate=r.removedSamplesForAcceleration/r.totalSamplesReceived,t.jitterBufferMs=1e3*r.jitterBufferDelay/r.jitterBufferEmittedCount,t.outputLevel=r.audioLevel;var n=1920;r.totalSamplesDuration&&r.totalSamplesReceived&&(n=r.totalSamplesReceived/r.totalSamplesDuration/50,t.receivedFrames=Math.round(r.totalSamplesReceived/n)),r.concealedSamples&&(t.droppedFrames=Math.round(r.concealedSamples/n))}}}),Object.defineProperty(e.prototype,"processVideoMediaSource",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.report.get(e);r&&(t.inputFrame={width:r.width,height:r.height,frameRate:r.framesPerSecond})}}),Object.defineProperty(e.prototype,"processVideoTrackSenderStats",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.report.get(e);if(r){var n=0,i=Date.now(),o=this.lastVideoFramesSent.get(t.ssrc);o&&800<=i-o.lts?(n=Math.round((r.framesSent-o.count)/((i-o.lts)/1e3)),this.lastVideoFramesSent.set(t.ssrc,{count:r.framesSent,lts:i,rate:n})):o?n=o.rate:this.lastVideoFramesSent.set(t.ssrc,{count:r.framesSent,lts:i,rate:0}),t.sentFrame={width:r.frameWidth,height:r.frameHeight,frameRate:n}}}}),Object.defineProperty(e.prototype,"processCandidatePairStats",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._stats.sendBandwidth=e.availableOutgoingBitrate||0,this._stats.videoSend.forEach((function(t){!t.rttMs&&e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.audioSend.forEach((function(t){!t.rttMs&&e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)}))}}),Object.defineProperty(e.prototype,"getStats",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.stats}}),e}();!function(e){e.SERVER_CONNECTION_STATE="server_connection_state",e.AUDIO_SENDING_STOPPED="audio_sending_stopped",e.FIRST_AUDIO_DECODE="first_audio_decode",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_VIDEO_RECEIVED="first_video_received",e.JOIN_CHOOSE_SERVER="join_choose_server",e.JOIN_GATEWAY="join_gateway",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_UPDATE_STREAM="on_update_stream",e.PUBLISH="publish",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQ_USER_ACCOUNT="req_user_account",e.SESSION_INIT="session_init",e.STREAM_SWITCH="stream_switch",e.SUBSCRIBE="subscribe",e.VIDEO_SENDING_STOPPED="video_sending_stopped",e.LEAVE="leave"}(bt||(bt={})),function(e){e.API_INVOKE="io.artc.pb.Wrtc.ApiInvoke",e.AUDIO_SENDING_STOPPED="io.artc.pb.Wrtc.AudioSendingStopped",e.FIRST_AUDIO_DECODE="io.artc.pb.Wrtc.FirstAudioDecode",e.FIRST_AUDIO_RECEIVED="io.artc.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.artc.pb.Wrtc.FirstVideoDecode",e.FIRST_VIDEO_RECEIVED="io.artc.pb.Wrtc.FirstVideoReceived",e.JOIN_CHOOSE_SERVER="io.artc.pb.Wrtc.JoinChooseServer",e.JOIN_GATEWAT="io.artc.pb.Wrtc.JoinGateway",e.ON_ADD_AUDIO_STREAM="io.artc.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.artc.pb.Wrtc.OnAddVideoStream",e.ON_REMOVE_STREAM="io.artc.pb.Wrtc.OnRemoveStream",e.ON_UPDATE_STREAM="io.artc.pb.Wrtc.OnUpdateStream",e.PUBLISH="io.artc.pb.Wrtc.Publish",e.REQUEST_PROXY_APPCENTER="io.artc.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.artc.pb.Wrtc.RequestProxyWorkerManager",e.REQ_USER_ACCOUNT="io.artc.pb.Wrtc.ReqUserAccount",e.SESSION="io.artc.pb.Wrtc.Session",e.STREAM_SWITCH="io.artc.pb.Wrtc.StreamSwitch",e.SUBSCRIBE="io.artc.pb.Wrtc.Subscribe",e.SERVER_CONNECTION_STATE="io.artc.pb.Wrtc.ServerState",e.VIDEO_SENDING_STOPPED="io.artc.pb.Wrtc.VideoSendingStopped",e.LEAVE="io.artc.pb.Wrtc.Leave"}(yt||(yt={}));var _t=new(function(){function e(){Object.defineProperty(this,"defalutBaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:{cid:null,cname:null,elapse:null,extend:null,lts:0,sid:"",success:null,uid:null}}),Object.defineProperty(this,"baseInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"eventUploadPendingItems",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"apiInvokeUploadPendingItems",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"apiInvokeCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:"http://".concat(m.EVENT_REPORT_DOMAIN,":6089/arapi/v1/events/message")}),Object.defineProperty(this,"backupUrl",{enumerable:!0,configurable:!0,writable:!0,value:"http://".concat(m.EVENT_REPORT_BACKUP_DOMAIN,":6089/arapi/v1/events/message")}),setInterval(this.doSend.bind(this),1e3)}return Object.defineProperty(e.prototype,"createBaseInfo",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=Object.assign({},this.defalutBaseInfo);return r.sid=e,this.baseInfoMap.set(e,{info:r,startTime:t}),r}}),Object.defineProperty(e.prototype,"reportApiInvoke",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e.prototype,"sendApiInvoke",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e.prototype,"flushApiInvokeItems",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(e.prototype,"send",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.eventUploadPendingItems.push(e)}}),Object.defineProperty(e.prototype,"doSend",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.eventUploadPendingItems.shift();if(e){var t={};e.data.apiName?t.apiName=e.data.apiName:e.data.eventType&&(t.eventType=e.data.eventType);var r=new URLSearchParams(t).toString(),n=~this.url.indexOf("?")?this.url.concat(r):this.url.concat("?").concat(r);D.a.post(n,e.data).then().catch((function(){D.a.post(n)}))}}}),Object.defineProperty(e.prototype,"sessionInit",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=Date.now(),n=this.createBaseInfo(e,r);n.cname=t.cname;var i=Date.now(),o=Object.assign({},{willUploadConsoleLog:m.UPLOAD_LOG},t.extend),a=Object.assign({},n,{eventType:bt.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,build:"",lts:i,eventElapse:i-r,extend:JSON.stringify(o),mode:t.mode,role:"host"===t.role?1:2,process:m.PROCESS_ID,success:t.success,os:"web",osVersion:"",deviceType:navigator.userAgent,netType:"NETWORK_UNKNOWN",netOperator:"",sdkVersion:m.SDK_VERSION});this.send({type:yt.SESSION,data:a}),this.flushApiInvokeItems(n.sid)}}),Object.defineProperty(e.prototype,"chooseServer",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.baseInfoMap.get(e);if(r){var n=r.info,i=Date.now(),o=JSON.stringify(t.extend),a=Object.assign({},n,{eventType:bt.JOIN_CHOOSE_SERVER,lts:i,elapse:0,eventElapse:i-t.startTime,extend:JSON.stringify(o),success:t.success,uid:t.uid||"",cid:"",chooseServerAddr:t.chooseServer?JSON.stringify(t.chooseServer):"",chooseServerAddrList:t.serverList?JSON.stringify(t.serverList):"",errorCode:""});this.send({type:yt.JOIN_CHOOSE_SERVER,data:a})}}}),Object.defineProperty(e.prototype,"joinGateway",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.baseInfoMap.get(e);if(r.uid=t.uid,r.cid=t.cid,r.joinStartTime=t.joinStartTime,r){var n=r.info,i=Date.now(),o=JSON.stringify(t.extend),a=Object.assign({},n,{eventType:bt.JOIN_GATEWAY,lts:i,elapse:i-r.joinStartTime,eventElapse:i-t.startTime,extend:o?JSON.stringify(o):o,success:t.success,uid:r.uid,cid:r.cid,errorCode:""});this.send({type:yt.JOIN_GATEWAT,data:a})}}}),Object.defineProperty(e.prototype,"publish",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.baseInfoMap.get(e);if(r){var n=r.info,i=Date.now(),o=JSON.stringify(t.extend),a=Object.assign({},n,{eventType:bt.PUBLISH,lts:i,elapse:i-r.joinStartTime,eventElapse:i-t.startTime,extend:o?JSON.stringify(o):o,success:t.success,uid:r.uid,cid:r.cid,errorCode:"",videoName:t.cameraDeviceId,audioName:t.microphoneDeviceId});this.send({type:yt.PUBLISH,data:a})}}}),Object.defineProperty(e.prototype,"subscribe",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.baseInfoMap.get(e);if(r){var n=r.info,i=Date.now(),o=JSON.stringify(t.extend),a=Object.assign({},n,{eventType:bt.SUBSCRIBE,lts:i,elapse:i-r.joinStartTime,eventElapse:i-t.startTime,extend:o?JSON.stringify(o):o,success:t.success,uid:r.uid,cid:r.cid,peer:t.peerid,errorCode:"",video:t.video,audio:t.audio});this.send({type:yt.SUBSCRIBE,data:a})}}}),Object.defineProperty(e.prototype,"serverConnectionState",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.baseInfoMap.get(e);if(r){var n=r.info,i=Date.now(),o=JSON.stringify(t.extend),a=Object.assign({},n,{eventType:bt.SERVER_CONNECTION_STATE,lts:i,elapse:i-r.joinStartTime,eventElapse:i-t.startTime,extend:o?JSON.stringify(o):o,uid:r.uid,cid:r.cid});this.send({type:yt.SERVER_CONNECTION_STATE,data:a})}}}),Object.defineProperty(e.prototype,"firstRemoteFrame",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.baseInfoMap.get(e);if(r){var n=r.info,i=Date.now(),o=JSON.stringify(t.extend),a=Object.assign({},n,{eventType:bt.FIRST_VIDEO_RECEIVED,lts:i,elapse:i-r.joinStartTime,eventElapse:i-t.startTime,extend:o?JSON.stringify(o):o,uid:r.uid,cid:r.cid,peer:t.peerid});this.send({type:yt.FIRST_VIDEO_RECEIVED,data:a})}}}),Object.defineProperty(e.prototype,"firstRemoteAudio",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.baseInfoMap.get(e);if(r){var n=r.info,i=Date.now(),o=JSON.stringify(t.extend),a=Object.assign({},n,{eventType:bt.FIRST_VIDEO_RECEIVED,lts:i,elapse:i-r.joinStartTime,eventElapse:i-t.startTime,extend:o?JSON.stringify(o):o,uid:r.uid,cid:r.cid,peer:t.peerid});this.send({type:yt.FIRST_VIDEO_RECEIVED,data:a})}}}),Object.defineProperty(e.prototype,"firstLocalFrame",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.baseInfoMap.get(e);if(r){var n=r.info,i=Date.now(),o=JSON.stringify(t.extend),a=Object.assign({},n,{eventType:bt.FIRST_VIDEO_RECEIVED,lts:i,elapse:i-r.joinStartTime,eventElapse:i-t.startTime,extend:o?JSON.stringify(o):o,uid:r.uid,cid:r.cid,peer:t.peerid});this.send({type:yt.FIRST_VIDEO_RECEIVED,data:a})}}}),Object.defineProperty(e.prototype,"firstLocalAudio",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.baseInfoMap.get(e);if(r){var n=r.info,i=Date.now(),o=JSON.stringify(t.extend),a=Object.assign({},n,{eventType:bt.FIRST_AUDIO_DECODE,lts:i,elapse:i-r.joinStartTime,eventElapse:i-t.startTime,extend:o?JSON.stringify(o):o,uid:r.uid,cid:r.cid,peer:t.peerid});this.send({type:yt.FIRST_AUDIO_DECODE,data:a})}}}),Object.defineProperty(e.prototype,"leave",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.baseInfoMap.get(e);if(r){var n=r.info,i=Date.now(),o=JSON.stringify(t.extend),a=Object.assign({},n,{eventType:bt.LEAVE,lts:i,elapse:i-r.joinStartTime,eventElapse:i-t.startTime,extend:o?JSON.stringify(o):o,uid:r.uid,cid:r.cid,errorCode:0});this.send({type:yt.LEAVE,data:a})}}}),e}()),St=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Et=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},Tt=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};var wt,Ot,Ct,Pt,Rt,It,Nt,At,kt=function(e){function t(){var t=e.call(this)||this;return Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(t,"type",{enumerable:!0,configurable:!0,writable:!0,value:"pub"}),Object.defineProperty(t,"pc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"audioTrack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"videoTrack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"mediaStream",{enumerable:!0,configurable:!0,writable:!0,value:new MediaStream}),Object.defineProperty(t,"videoEncoderConfig",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(t,"audioEncoderConfig",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(t,"statsFilter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"joinInfo",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(t,"offerOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t.offerOptions={offerToReceiveAudio:!0,offerToReceiveVideo:!0},t.pc=t.createPeerConnection(),t.statsFilter=function(e,t){void 0===t&&(t=100);var r=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i),n=r&&r[0]?Number(r[0].split("/")[1]):null;return n?n<76?null:new gt(e,{updateInterval:t}):window.RTCStatsReport&&e.getStats()instanceof Promise?new gt(e,{updateInterval:t}):null}(t.pc,1e3),t.statsFilter&&(t.statsFilter.onFirstVideoDecoded=function(e,r){var n=Date.now();_t.firstLocalFrame(t.joinInfo.sid,{startTime:n,extend:{width:e,height:r},peerid:t.ID})},t.statsFilter.onFirstVideoReceived=function(e,r){var n=Date.now();_t.firstRemoteFrame(t.joinInfo.sid,{startTime:n,extend:{width:e,height:r},peerid:t.ID})},t.statsFilter.onFirstAudioDecoded=function(){var e=Date.now();_t.firstLocalAudio(t.joinInfo.sid,{startTime:e,extend:null,peerid:t.ID})},t.statsFilter.onFirstAudioReceived=function(){var e=Date.now();_t.firstRemoteAudio(t.joinInfo.sid,{startTime:e,extend:null,peerid:t.ID})}),t}return St(t,e),Object.defineProperty(t.prototype,"createPeerConnection",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=new RTCPeerConnection({sdpSemantics:"unified-plan",iceTransportPolicy:"all"});return t.oniceconnectionstatechange=function(r){S.debug("oniceconnectionstatechange: "+t.iceConnectionState),e.emit(N.ICE_CONNECTION_STATE_CHANGE,r)},t.onconnectionstatechange=function(t){e.emit(N.CONNECTION_STATE_CHANGE,t)},t.onicecandidate=function(t){if(t.candidate){var r={candidate:t.candidate.candidate,sdpMLineIndex:t.candidate.sdpMLineIndex,sdpMid:t.candidate.sdpMid};e.emit(N.ICE_CANDIDATE,JSON.stringify(r))}},t.ontrack=function(t){e.emit(N.TRACK_ADDED,t.track)},t}}),Object.defineProperty(t.prototype,"close",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.pc&&this.pc.close()}}),Object.defineProperty(t.prototype,"getSenders",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"pub"===this.type||"pubEx"===this.type?this.pc.getSenders():this.pc.getReceivers()}}),Object.defineProperty(t.prototype,"getStats",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.statsFilter.getStats()}}),Object.defineProperty(t.prototype,"createAnswer",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return void 0===t&&(t=!1),Et(this,void 0,void 0,(function(){var r,n;return Tt(this,(function(i){switch(i.label){case 0:return this.pc?(r=JSON.parse(e),512,r.sdp=(o=r.sdp,a=512,c="AS","firefox"===it.browserDetails.browser&&(a=1e3*(a>>>0),c="TIAS"),o=-1===o.indexOf("b="+c+":")?o.replace(/c=IN (.*)\r\n/,"c=IN $1\r\nb="+c+":"+a+"\r\n"):o.replace(new RegExp("b="+c+":.*\r\n"),"b="+c+":"+a+"\r\n")),[4,this.pc.setRemoteDescription(new RTCSessionDescription(r))]):[3,3];case 1:return i.sent(),[4,this.pc.createAnswer(t?{iceRestart:t}:{})];case 2:n=i.sent(),this.pc.setLocalDescription(n),this.emit(N.CREATE_ANSWER,JSON.stringify(n)),i.label=3;case 3:return[2]}var o,a,c}))}))}}),Object.defineProperty(t.prototype,"setIceCandidate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.pc){var t=JSON.parse(e),r=t.sdpMLineIndex,n=t.candidate,i=new RTCIceCandidate({sdpMLineIndex:r,candidate:n});this.pc.addIceCandidate(i)}}}),Object.defineProperty(t.prototype,"updateBandWidth",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return Et(this,void 0,void 0,(function(){var t,r;return Tt(this,(function(n){switch(n.label){case 0:return"pub"!==this.type&&"pubEx"!==this.type?[3,2]:(t=this.pc.getSenders()[0],(r=t.getParameters()).encodings||(r.encodings=[{}]),0===e?delete r.encodings[0].maxBitrate:r.encodings[0].maxBitrate=1e3*e,[4,t.setParameters(r).catch((function(e){return console.error(e)}))]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))}}),Object.defineProperty(t.prototype,"_mungeSdpForSimulcasting",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=e.split("\r\n"),r=!1,n=[-1],i=[-1],o=null,a=null,c=null,s=null,u=-1,l=0;l<t.length;l++){if(f=t[l].match(/m=(\w+) */)){if("video"===f[1]){if(!(n[0]<0)){u=l;break}r=!0}else if(n[0]>-1){u=l;break}}else if(r){var d=t[l].match(/a=ssrc-group:FID (\d+) (\d+)/);if(d)n[0]=d[1],i[0]=d[2],t.splice(l,1),l--;else{if(n[0]){if((h=t[l].match("a=ssrc:"+n[0]+" cname:(.+)"))&&(o=h[1]),(h=t[l].match("a=ssrc:"+n[0]+" msid:(.+)"))&&(a=h[1]),(h=t[l].match("a=ssrc:"+n[0]+" mslabel:(.+)"))&&(c=h[1]),(h=t[l].match("a=ssrc:"+n[0]+" label:(.+)"))&&(s=h[1]),0===t[l].indexOf("a=ssrc:"+i[0])){t.splice(l,1),l--;continue}if(0===t[l].indexOf("a=ssrc:"+n[0])){t.splice(l,1),l--;continue}}0!=t[l].length||(t.splice(l,1),l--)}}}if(n[0]<0){u=-1,r=!1;for(l=0;l<t.length;l++){var f;if(f=t[l].match(/m=(\w+) */)){if("video"===f[1]){if(!(n[0]<0)){u=l;break}r=!0}else if(n[0]>-1){u=l;break}}else if(r){if(n[0]<0){var p=t[l].match(/a=ssrc:(\d+)/);if(p){n[0]=p[1],t.splice(l,1),l--;continue}}else{var h;if((h=t[l].match("a=ssrc:"+n[0]+" cname:(.+)"))&&(o=h[1]),(h=t[l].match("a=ssrc:"+n[0]+" msid:(.+)"))&&(a=h[1]),(h=t[l].match("a=ssrc:"+n[0]+" mslabel:(.+)"))&&(c=h[1]),(h=t[l].match("a=ssrc:"+n[0]+" label:(.+)"))&&(s=h[1]),0===t[l].indexOf("a=ssrc:"+i[0])){t.splice(l,1),l--;continue}if(0===t[l].indexOf("a=ssrc:"+n[0])){t.splice(l,1),l--;continue}}0!==t[l].length||(t.splice(l,1),l--)}}}if(n[0]<0)return e;u<0&&(u=t.length),n[1]=Math.floor(4294967295*Math.random()),n[2]=Math.floor(4294967295*Math.random()),i[1]=Math.floor(4294967295*Math.random()),i[2]=Math.floor(4294967295*Math.random());for(l=0;l<n.length;l++)o&&(t.splice(u,0,"a=ssrc:"+n[l]+" cname:"+o),u++),a&&(t.splice(u,0,"a=ssrc:"+n[l]+" msid:"+a),u++),c&&(t.splice(u,0,"a=ssrc:"+n[l]+" mslabel:"+c),u++),s&&(t.splice(u,0,"a=ssrc:"+n[l]+" label:"+s),u++),o&&(t.splice(u,0,"a=ssrc:"+i[l]+" cname:"+o),u++),a&&(t.splice(u,0,"a=ssrc:"+i[l]+" msid:"+a),u++),c&&(t.splice(u,0,"a=ssrc:"+i[l]+" mslabel:"+c),u++),s&&(t.splice(u,0,"a=ssrc:"+i[l]+" label:"+s),u++);return t.splice(u,0,"a=ssrc-group:FID "+n[2]+" "+i[2]),t.splice(u,0,"a=ssrc-group:FID "+n[1]+" "+i[1]),t.splice(u,0,"a=ssrc-group:FID "+n[0]+" "+i[0]),t.splice(u,0,"a=ssrc-group:SIM "+n[0]+" "+n[1]+" "+n[2]),(e=t.join("\r\n")).endsWith("\r\n")||(e+="\r\n"),e}}),t}(T),Dt=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jt=function(e){function t(t,r){var n=e.call(this)||this;return n.ID=t,n.type="pub",n.joinInfo=r,n}return Dt(t,e),Object.defineProperty(t.prototype,"getAllTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=[];return this.audioTrack&&e.push(this.audioTrack),this.videoTrack&&e.push(this.videoTrack),e}}),Object.defineProperty(t.prototype,"addTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e instanceof MediaStreamTrack&&(this.pc.addTrack(e),"video"===e.kind?(this.videoTrack=e,this.videoEncoderConfig=t):"audio"===e.kind&&(this.audioTrack=e,this.audioEncoderConfig=t))}}),Object.defineProperty(t.prototype,"removeTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this.pc.getSenders().map((function(r){r.track===e&&("video"===r.track.kind?(t.videoTrack=void 0,t.videoEncoderConfig={}):"audio"===r.track.kind&&(t.audioTrack=void 0,t.audioEncoderConfig={}),t.pc.removeTrack(r))}))}}),t}(kt),xt=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mt=function(e){function t(t,r){var n=e.call(this)||this;return Object.defineProperty(n,"codec",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.ID=t,n.type="pubEx",n.joinInfo=r,n}return xt(t,e),Object.defineProperty(t.prototype,"getAllTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=[];return this.audioTrack&&e.push(this.audioTrack),this.videoTrack&&e.push(this.videoTrack),e}}),Object.defineProperty(t.prototype,"addTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e instanceof MediaStreamTrack&&(this.pc.addTrack(e),"video"===e.kind&&(this.videoTrack=e,this.videoEncoderConfig=t))}}),Object.defineProperty(t.prototype,"removeTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this.pc.getSenders().map((function(r){r.track===e&&("video"===r.track.kind&&(t.videoTrack=void 0,t.videoEncoderConfig={}),t.pc.removeTrack(r.track))}))}}),t}(kt),Lt=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ft=function(e){function t(t,r){var n=e.call(this)||this;return Object.defineProperty(n,"isLowStreamConnection",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"codec",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.ID=t,n.type="sub",n.joinInfo=r,n}return Lt(t,e),t}(kt),Ut=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vt=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"peer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"ID",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(r,"type",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(r,"startTime",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"connectionId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(r,"currentReconnectCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"statsCollector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"videoTrack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"audioTrack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_audioMuted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(r,"_videoMuted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(r,"_audioMediaStreamTrack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_videoMediaStreamTrack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r.ID=t,r}return Ut(t,e),Object.defineProperty(t.prototype,"_createPC",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r,n=this,i=this;switch(this.type){case"pub":r=new jt(this.ID,e);break;case"pubEx":r=new Mt(this.ID,e);break;case"sub":r=new Ft(this.ID,e)}return i.peer=r,t.handlePeerConnectionEvent&&(i.peer.on(N.CONNECTION_STATE_CHANGE,t.handlePeerConnectionEvent.bind(this,i.ID,i.type,N.CONNECTION_STATE_CHANGE)),i.peer.on(N.ICE_CONNECTION_STATE_CHANGE,t.handlePeerConnectionEvent.bind(this,i.ID,i.type,N.ICE_CONNECTION_STATE_CHANGE)),i.peer.on(N.ICE_CANDIDATE,t.handlePeerConnectionEvent.bind(this,i.ID,i.type,N.ICE_CANDIDATE)),i.peer.on(N.CREATE_ANSWER,t.handlePeerConnectionEvent.bind(this,i.ID,i.type,N.CREATE_ANSWER)),"sub"===i.type&&i.peer.on(N.TRACK_ADDED,(function(e){if(n["_"+e.kind+"MediaStreamTrack"]=e,"video"===e.kind){var r=document.createElement("video");r.srcObject=new MediaStream([e]),r.onresize=function(e){t.handleTrackEvent.call(n,{streamId:i.ID,peerType:i.type,trackMediaType:"video",eventName:N.VIDEO_SIZE_CHANGE},r.videoWidth*r.videoHeight)}}}))),i.peer}}),Object.defineProperty(t.prototype,"_closePC",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.peer&&(this.peer.close(),this.peer=void 0)}}),Object.defineProperty(t.prototype,"_getAllTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"addOriginTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(!e)throw new A(v.INVALID_PARAMS,"tracks is undefind");e instanceof Array||(e=[e]),e.map((function(e){"video"===e.kind?t._videoMediaStreamTrack||(t._videoMediaStreamTrack=e):"audio"===e.kind&&(t._audioMediaStreamTrack||(t._audioMediaStreamTrack=e))}))}}),Object.defineProperty(t.prototype,"clearOriginTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._videoMediaStreamTrack||(this._videoMediaStreamTrack=void 0),this._audioMediaStreamTrack||(this._audioMediaStreamTrack=void 0)}}),Object.defineProperty(t.prototype,"addTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r=this,n=this.ID;if(e instanceof G||e instanceof H){var i=e.trackMediaType,o=e.getMediaStreamTrack();"video"!==i||this.videoTrack?"audio"!==i||this.audioTrack||(this.audioTrack=e,this.audioTrack.getStats=function(){return r.videoTrack instanceof H?r.statsCollector.getRemoteAudioTrackStats(r.ID):r.statsCollector.getLocalAudioTrackStats(r.ID)},this._audioMediaStreamTrack=o):(this.videoTrack=e,this.videoTrack.getStats=function(){return r.videoTrack instanceof H?r.statsCollector.getRemoteVideoTrackStats(r.ID):r.statsCollector.getLocalVideoTrackStats(r.ID)},this._videoMediaStreamTrack=o),e.peer=this.peer,t.handleTrackEvent&&(e.on(N.UPDATE_MUTE_STATE,t.handleTrackEvent.bind(this,{streamId:n,peerType:this.type,trackMediaType:e.trackMediaType,eventName:N.UPDATE_MUTE_STATE})),e.on(N.TRACK_ENDED,t.handleTrackEvent.bind(this,{streamId:n,peerType:this.type,trackMediaType:e.trackMediaType,eventName:N.TRACK_ENDED})),this.type)}}}),Object.defineProperty(t.prototype,"removeTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e?(e===this.videoTrack?this.videoTrack=void 0:e===this.audioTrack&&(this.audioTrack=void 0),e.peer=void 0):this.removeAllTracks()}}),Object.defineProperty(t.prototype,"removeAllTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){void 0===e&&(e=!1),this.videoTrack&&(e&&this.videoTrack.stop(),this.videoTrack=void 0),this.audioTrack&&(e&&this.audioTrack.stop(),this.audioTrack=void 0)}}),Object.defineProperty(t.prototype,"destory",{enumerable:!1,configurable:!0,writable:!0,value:function(e){void 0===e&&(e=!0),this.removeAllTracks(e),this.clearOriginTracks(),this._closePC(),this.statsCollector&&this.statsCollector.removeConnection(this.ID),this.type="",this.ID=""}}),t}(T);Ot=wt||(wt={}),Pt=window.AudioContext||window.webkitAudioContext,Rt=[],It=null,Nt=null,At=null,Ot.checkSupports=function(){return!!Pt},Ot.getAudioContextInstance=function(){return Ct||(Ct=new Pt,Nt=Ct.destination,At=Ct.createMediaStreamDestination(),It=Ct.createDynamicsCompressor(),Ct.createDynamicsCompressor(),Ct)},Ot.decodeAsAudioBuffer=function(e){return new Promise((function(t,r){if(e instanceof File){var n=new FileReader;n.onload=function(e){o(e.target.result)},n.onerror=function(e){n.abort(),r("readFile ${source.name} error")},n.readAsArrayBuffer(e)}else if("string"==typeof e){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){o(i.response)},i.send()}else e instanceof ArrayBuffer&&o(e);function o(e){Ct.decodeAudioData(e,(function(e){t(e)}),(function(e){e.err}))}}))},Ot.getSourceNode=function(e){return Rt.find((function(t){return t.id===e}))},Ot.addSourceNode=function(e,t){var r=Ct.createGain();t.connect(r),Rt.push({id:e,isPlayed:!1,isPushing:!1,sourceNode:t,gainNode:r,startPlay:function(){this.isPlayed||(this.isPlayed=!0,this.gainNode.connect(Nt),function(){if(Ct){var e=Ct.state;"suspended"===e&&Ct.resume().then((function(){S.info("Playback resumed successfully")}))}}())},stopPlay:function(){this.isPlayed&&(this.isPlayed=!1,this.gainNode.disconnect(Nt))},startSend:function(){this.isPushing||(this.gainNode.connect(At),this.isPushing=!0)},stopSend:function(){this.isPushing&&(this.gainNode.disconnect(At),this.isPushing=!1)}})},Ot.removeSourceNode=function(e){var t=-1,r=Rt.find((function(r,n){return t=n,r.id===e}));r&&(r.isPlayed&&Ot.stop(r.id),Rt.splice(t,1))},Ot.getGainNode=function(e){var t=Rt.find((function(t){return t.id===e}));if(t)return t.gainNode},Ot.play=function(e){var t=Rt.find((function(t){return t.id===e}));if(t){if(t.isPlayed)return void S.warning("The audio has already been played.");t.isPlayed=!0,t.gainNode.connect(It)}},Ot.stop=function(e){var t=Rt.find((function(t){return t.id===e}));if(t){if(!t.isPlayed)return void S.warning("The audio has not been played yet.");t.isPlayed=!1,t.gainNode.disconnect(It)}},Ot.updateTrack=function(e,t){var r=Rt.find((function(t){return t.id===e}));r&&(r.sourceNode.disconnect(r.gainNode),r.sourceNode=Ct.createMediaStreamSource(new MediaStream([t])),r.sourceNode.connect(r.gainNode),r.isPlayed&&(Ot.stop(r.id),Ot.play(r.id)))},Ot.getOutputTrack=function(){return At.stream.getAudioTracks()[0]};var Bt,Gt=wt,Wt=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ht=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},Kt=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},Jt=function(e){function t(t,r,n){var i=e.call(this,t,n)||this;if(Object.defineProperty(i,"trackMediaType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_encoderConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_source",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),i.trackMediaType="audio",i._encoderConfig=r,!Gt.checkSupports())throw new A(v.NOT_SUPPORT,"can not create audio context");i._context=Gt.getAudioContextInstance();var o=i._context.createMediaStreamSource(new MediaStream([t]));return Gt.addSourceNode(n,o),i._source=Gt.getSourceNode(i.getTrackId()),i._mediaStreamTrack=Gt.getOutputTrack(),i}return Wt(t,e),Object.defineProperty(t.prototype,"setVolume",{enumerable:!1,configurable:!0,writable:!0,value:function(e){Gt.getGainNode(this.getTrackId()).gain.setValueAtTime(e/1e3,this._context.currentTime)}}),Object.defineProperty(t.prototype,"getVolumeLevel",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Gt.getGainNode(this.getTrackId()).gain.value}}),Object.defineProperty(t.prototype,"getStats",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"play",{enumerable:!1,configurable:!0,writable:!0,value:function(){Gt.getSourceNode(this.getTrackId()).startPlay()}}),Object.defineProperty(t.prototype,"stop",{enumerable:!1,configurable:!0,writable:!0,value:function(){Gt.getSourceNode(this.getTrackId()).stopPlay()}}),Object.defineProperty(t.prototype,"close",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.stop(),Gt.removeSourceNode(this.getTrackId()),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&this._mediaStreamTrack.stop(),this._isClosed=!0}}),Object.defineProperty(t.prototype,"_updatePlayerSource",{enumerable:!1,configurable:!0,writable:!0,value:function(){Gt.updateTrack(this.getTrackId(),this._originMediaStreamTrack)}}),Object.defineProperty(t.prototype,"_updateOriginMediaStreamTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return Ht(this,void 0,void 0,(function(){return Kt(this,(function(r){return this._originMediaStreamTrack===e||(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),e.addEventListener("ended",this._handleTrackEnded),t&&(this._originMediaStreamTrack.stop(),this._originMediaStreamTrack=e,this._updatePlayerSource())),[2]}))}))}}),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return Gt.getSourceNode(this.getTrackId()).isPlayed},enumerable:!0,configurable:!0}),t}(G),zt=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yt=function(e){function t(t,r,n){var i=e.call(this,t,r,n)||this;return Object.defineProperty(i,"trackList",{enumerable:!0,configurable:!0,writable:!0,value:[]}),i}return zt(t,e),Object.defineProperty(t.prototype,"hasAudioTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return-1!==this.trackList.findIndex((function(t){return t==e}))}}),Object.defineProperty(t.prototype,"addAudioTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.hasAudioTrack(e))S.warning("track is already added");else{this.trackList.push(e);var t=Gt.getSourceNode(e.getTrackId());e.peer=this.peer,t.startSend(),this.updateEncoderConfig()}}}),Object.defineProperty(t.prototype,"removeAudioTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.hasAudioTrack(e)){var t=Gt.getSourceNode(e.getTrackId());t&&t.gainNode.disconnect(t.compressorNode),this.trackList.splice(this.trackList.findIndex((function(t){return t==e})),1),this.updateEncoderConfig(),e.peer=void 0}}}),Object.defineProperty(t.prototype,"removeAllAudioTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.trackList.map((function(t){e.removeAudioTrack(t)}))}}),Object.defineProperty(t.prototype,"updateEncoderConfig",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e={};this.trackList.forEach((function(t){t._encoderConfig&&((t._encoderConfig.bitrate||0)>(e.bitrate||0)&&(e.bitrate=t._encoderConfig.bitrate),(t._encoderConfig.sampleRate||0)>(e.sampleRate||0)&&(e.sampleRate=t._encoderConfig.sampleRate),(t._encoderConfig.sampleSize||0)>(e.sampleSize||0)&&(e.sampleSize=t._encoderConfig.sampleSize),t._encoderConfig.stereo&&(e.stereo=!0))})),this._encoderConfig=e}}),t}(Jt),Xt=["play","playing","loadeddata","canplay","pause","resize","stalled","suspend","waiting"];!function(e){e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed"}(Bt||(Bt={}));var qt,$t=function(){function e(e){Object.defineProperty(this,"_videoElementStatus",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"videoElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"slot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trackId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"videoTrack",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"videoElementCheckInterval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"handleVideoEvents",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(this,"startGetVideoDimensions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFirstVideoFrameDecoded",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(this,"onVideoSizeChange",{enumerable:!0,configurable:!0,writable:!0,value:function(){}});var t=this;this.videoElementStatus=Bt.NONE,this.handleVideoEvents=function(e){switch(e.type){case"play":case"playing":t.startGetVideoDimensions(),t.videoElementStatus=Bt.PLAYING;break;case"loadeddata":t.onFirstVideoFrameDecoded&&t.onFirstVideoFrameDecoded();break;case"canplay":t.videoElementStatus=Bt.CANPLAY;break;case"resize":var r=this.videoWidth,n=this.videoWidth;S.debug("video resize => "+r+" * "+n);break;case"stalled":t.videoElementStatus=Bt.STALLED;break;case"suspend":t.videoElementStatus=Bt.SUSPEND;break;case"pause":t.videoElementStatus=Bt.PAUSED;break;case"waiting":t.videoElementStatus=Bt.WAITING}},this.startGetVideoDimensions=function(){!function e(){t.videoElement&&(4<t.videoElement.videoWidth*t.videoElement.videoHeight?S.debug("[".concat(t.trackId,"] video dimensions:"),t.videoElement.videoWidth,t.videoElement.videoHeight):setTimeout(e,50))}()},this.slot=e.element||document.body,this.trackId=e.trackId,this.updateConfig(e)}return Object.defineProperty(e.prototype,"videoElementStatus",{get:function(){return this._videoElementStatus},set:function(e){this._videoElementStatus=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateConfig",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.config=e,this.trackId=e.trackId;var t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}}),Object.defineProperty(e.prototype,"createElements",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;this.container||(this.container=document.createElement("div")),(e=this.container).id="artc-video-player-".concat(this.trackId),e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this.videoTrack?(e.style.backgroundColor="black",this.createVideoElement(),e.appendChild(this.videoElement)):(this.removeVideoElement(),this.slot.appendChild(this.container))}}),Object.defineProperty(e.prototype,"createVideoElement",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;e.videoElement||(e.videoElementStatus=Bt.INIT,e.videoElement=document.createElement("video"),e.videoElement.onerror=function(){return e.videoElementStatus=Bt.ERROR},e.container&&e.container.appendChild(e.videoElement),Xt.forEach((function(t){e.videoElement&&e.videoElement.addEventListener(t,e.handleVideoEvents)})),e.videoElementCheckInterval=window.setInterval((function(){!document.getElementById("video_".concat(e.trackId))&&e.videoElement&&(e.videoElementStatus=Bt.DESTROYED)}),1e3)),e.videoElement.id="video_".concat(e.trackId),e.videoElement.className="artc_video_player",e.videoElement.style.width="100%",e.videoElement.style.height="100%",e.videoElement.style.position="absolute",e.videoElement.setAttribute("autoplay",""),e.videoElement.autoplay=!0,e.videoElement.controls=!1,e.videoElement.setAttribute("playsinline",""),e.config.mirror&&(e.videoElement.style.transform="rotateY(180deg)"),e.config.fit?e.videoElement.style.objectFit=e.config.fit:e.videoElement.style.objectFit="cover",e.videoElement.setAttribute("muted",""),e.videoElement.muted=!0,e.videoElement.srcObject&&e.videoElement.srcObject instanceof MediaStream?e.videoElement.srcObject.getVideoTracks()[0]!==e.videoTrack&&(e.videoElement.srcObject=e.videoTrack?new MediaStream([e.videoTrack]):null):e.videoElement.srcObject=e.videoTrack?new MediaStream([e.videoTrack]):null,e.videoElement.play()}}),Object.defineProperty(e.prototype,"removeVideoElement",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;e.videoElement&&(Xt.forEach((function(t){e.videoElement&&e.videoElement.removeEventListener(t,e.handleVideoEvents)})),e.videoElementCheckInterval&&(window.clearInterval(e.videoElementCheckInterval),e.videoElementCheckInterval=void 0),e.container&&e.container.removeChild(e.videoElement),e.videoElement=void 0,e.videoElementStatus=Bt.NONE)}}),Object.defineProperty(e.prototype,"updateVideoTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}}),Object.defineProperty(e.prototype,"play",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(this.videoElement){var t=this.videoElement.play();t&&t.catch&&t.catch((function(t){S.warning("[".concat(e.trackId,"] play warning: "),t)}))}}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.videoElement&&(this.videoElement.srcObject=null,this.videoElement=void 0,S.info("[[track-"+this.trackId+"] is destroyed]")),this.container&&(this.slot.removeChild(this.container),this.container=void 0)}}),e}(),Qt=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zt=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},er=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},tr=function(e){function t(t,r,n){var i=e.call(this,t,n)||this;Object.defineProperty(i,"trackMediaType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_player",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_encoderConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_videoWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(i,"_videoHeight",{enumerable:!0,configurable:!0,writable:!0,value:0});var o=i;return i.trackMediaType="video",i._encoderConfig=r,st(t).then((function(e){o._videoHeight=e[0],o._videoWidth=e[1]})),i}return Qt(t,e),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return!!this._player},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"play",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this,n=void 0!==t&&"[object Object]"===Object.prototype.toString.call(t)?t:{};if("string"==typeof e){var i=void 0,o=document.getElementById(e);o?e=o:(i="[track-".concat(this.getTrackId(),'] can not find "#'),S.warning(i.concat(e,'" element, use document.body')),e=document.body)}S.debug("[track-".concat(this.getTrackId(),"] play"));var a=Object.assign({},this._getDefaultPlayerConfig(),{},n,{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(a):(this._player=new $t(a),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=function(){r.emit("first-video-frame")},this._player.onVideoSizeChange=function(e,t){r.emit("video-resize",e,t)}),"playing"!==this._player._playervideoElementStatus&&this._player.play()}}),Object.defineProperty(t.prototype,"stop",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._player&&(this._player.destroy(),this._player=void 0)}}),Object.defineProperty(t.prototype,"getStats",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_updateOriginMediaStreamTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return Zt(this,void 0,void 0,(function(){var r;return er(this,(function(n){return(r=this)._originMediaStreamTrack===e?[2]:(t&&(r._originMediaStreamTrack.removeEventListener("ended",r._handleTrackEnded),e.addEventListener("ended",r._handleTrackEnded),r._originMediaStreamTrack.stop(),r._originMediaStreamTrack=e),r._mediaStreamTrack=r._originMediaStreamTrack,r._updatePlayerSource(),[2,r.emit("@need_replace_track",r._mediaStreamTrack)])}))}))}}),Object.defineProperty(t.prototype,"_updatePlayerSource",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}}),Object.defineProperty(t.prototype,"_getDefaultPlayerConfig",{enumerable:!1,configurable:!0,writable:!0,value:function(){return{}}}),t}(G),rr=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nr=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},ir=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},or=function(e){function t(t,r,n){var i=e.call(this,t)||this;return Object.defineProperty(i,"_pubTracks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),i.type="pub",i._createPC(n),i.statsCollector=r,i.statsCollector.addLocalConnection(i),i}return rr(t,e),Object.defineProperty(t.prototype,"addTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return nr(this,void 0,void 0,(function(){var t=this;return ir(this,(function(r){if(!e)throw new A(v.INVALID_PARAMS,"tracks is undefind");return e instanceof Array||(e=[e]),e.map((function(e){if("video"===e.trackMediaType)if(t.videoTrack)S.error("only one videoTrack can be publish");else{if(!(e instanceof tr))throw new A(v.INVALID_OPERATION,"Unable to published a non-LocalVideoTrack");t._pubTracks.push(e),e.on(N.RTC_NEED_RENEGOTIATE,(function(){var r=e._encoderConfig.bitrateMax;t.peer.updateBandWidth(r)})),t.addTrack(e),t.peer.addTrack(t._videoMediaStreamTrack,e._encoderConfig)}else if("audio"===e.trackMediaType){if(!t.audioTrack){var r=new Yt(Gt.getOutputTrack(),{},w(8));t.addTrack(r),t.peer.audioTrack||t.peer.addTrack(Gt.getOutputTrack(),r._encoderConfig)}t.audioTrack.hasAudioTrack(e)||(t._pubTracks.push(e),t.audioTrack.addAudioTrack(e))}})),[2]}))}))}}),Object.defineProperty(t.prototype,"removeTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return nr(this,void 0,void 0,(function(){var t=this;return ir(this,(function(r){return e?(e instanceof Array||(e=[e]),e.map((function(e){if("video"===e.trackMediaType){if(t.videoTrack!==e)throw new A(v.INVALID_OPERATION,"You haven't published this track ",e);t.removeTrack(t.videoTrack),t.peer.removeTrack(t._videoMediaStreamTrack)}else if("audio"===e.trackMediaType&&t.audioTrack){var r=t.audioTrack;r.removeAudioTrack(e),0===r.trackList.length&&(t.removeTrack(r),t.peer.removeTrack(t._audioMediaStreamTrack))}var n=t._pubTracks.findIndex((function(t){return t===e}));~n&&t._pubTracks.splice(n,1)}))):(this.audioTrack&&(this.audioTrack.removeAllAudioTracks(),this.peer.removeTrack(this._audioMediaStreamTrack)),this.videoTrack&&this.peer.removeTrack(this._videoMediaStreamTrack),this._pubTracks=[],this.removeTrack()),[2]}))}))}}),t}(Vt),ar=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),cr=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.type="pubEx",i._createPC(n),i.statsCollector=r,i.statsCollector.addLocalConnection(i),i}return ar(t,e),Object.defineProperty(t.prototype,"addTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;"video"!==e.trackMediaType||this.videoTrack||(this.videoTrack=e,e.getStats=function(){return t.statsCollector.getLocalVideoTrackStats(t.ID)},this._videoMediaStreamTrack=e.getMediaStreamTrack().clone(),this.peer.addTrack(this._videoMediaStreamTrack,e._encoderConfig))}}),Object.defineProperty(t.prototype,"removeTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"video"===e.trackMediaType&&this.videoTrack&&(this.videoTrack=void 0,this.peer.removeTrack(this._videoMediaStreamTrack))}}),t}(Vt),sr=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ur=function(e){function t(t,r){var n=e.call(this,t,r)||this;return Object.defineProperty(n,"trackMediaType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_player",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.trackMediaType="video",n}return sr(t,e),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return!!this._player},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"play",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=void 0!==t&&"[object Object]"===Object.prototype.toString.call(t)?t:{};if("string"==typeof e){var n=void 0,i=document.getElementById(e);i?e=i:(n="[track-".concat(this.getTrackId(),'] can not find "#'),S.warning(n.concat(e,'" element, use document.body')),e=document.body)}S.debug("[track-".concat(this.getTrackId(),"] play"));var o=Object.assign({},{},r,{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(o):(this._player=new $t(o),this._player.updateVideoTrack(this._mediaStreamTrack)),"playing"!==this._player._playervideoElementStatus&&this._player.play()}}),Object.defineProperty(t.prototype,"stop",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._player&&(this._player.destroy(),this._player=void 0)}}),Object.defineProperty(t.prototype,"getStats",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),t}(H),lr=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dr=function(e){function t(t,r){var n=e.call(this,t,r)||this;Object.defineProperty(n,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"trackMediaType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.trackMediaType="audio",document.createElement("audio").srcObject=new MediaStream([t]),n._context=Gt.getAudioContextInstance();var i=n._context.createMediaStreamSource(new MediaStream([t]));return Gt.addSourceNode(r,i),n}return lr(t,e),Object.defineProperty(t.prototype,"isPlaying",{get:function(){throw new Error("Method not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"play",{enumerable:!1,configurable:!0,writable:!0,value:function(){Gt.getSourceNode(this.getTrackId()).startPlay()}}),Object.defineProperty(t.prototype,"stop",{enumerable:!1,configurable:!0,writable:!0,value:function(){Gt.getSourceNode(this.getTrackId()).stopPlay()}}),Object.defineProperty(t.prototype,"setVolume",{enumerable:!1,configurable:!0,writable:!0,value:function(e){Gt.getGainNode(this.getTrackId()).gain.setValueAtTime(e/1e3,this._context.currentTime)}}),Object.defineProperty(t.prototype,"getVolumeLevel",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Gt.getGainNode(this.getTrackId()).gain.value}}),Object.defineProperty(t.prototype,"getStats",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),t}(H),fr=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pr=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.type="sub",i._createPC(n),i.statsCollector=r,i.statsCollector.addRemoteConnection(i),i}return fr(t,e),Object.defineProperty(t.prototype,"addTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if("video"===e){var t=this._videoMediaStreamTrack,r=new ur(t,w(5));return this.addTrack(r),this.videoTrack}var n=this._audioMediaStreamTrack,i=new dr(n,w(5));return this.addTrack(i),this.audioTrack}}),Object.defineProperty(t.prototype,"remoteTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"video"===e?this.removeTrack(this.videoTrack):this.removeTrack(this.audioTrack)}}),Object.defineProperty(t.prototype,"closePC",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.peer&&(this.peer.close(),this.peer=void 0)}}),t}(Vt),hr={transportDelay:0,end2EndDelay:0,muteState:!1,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0},vr={transportDelay:0,end2EndDelay:0,muteState:!1,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0},mr={muteState:!1,sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0},br={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,muteState:!1,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0},yr=function(){function e(e){Object.defineProperty(this,"clientId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"localConnectionsMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"remoteConnectionsMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"updateStatsInterval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.clientId=e,this.updateStatsInterval=window.setInterval(this.updateStats.bind(this),1e3)}return Object.defineProperty(e.prototype,"updateStats",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.remoteConnectionsMap.forEach((function(e){var t=e.audioStats,r=e.videoStats,n=e.pcStats,i=Object.assign({},hr),o=Object.assign({},vr),a=e.connection.peer.getStats(),c=a.audioRecv[0],s=a.videoRecv[0];n&&n.videoRecv[0];i.muteState=!1,o.muteState=!1,c&&("opus"!==c.codec&&"aac"!==c.codec||(i.codecType=c.codec),c.outputLevel?i.receiveLevel=Math.round(32767*c.outputLevel):e.connection.audioTrack&&(i.receiveLevel=Math.round(32767*e.connection.audioTrack.getVolumeLevel())),i.receiveBytes=c.bytes,i.receivePackets=c.packets,i.receivePacketsLost=c.packetsLost,i.packetLossRate=i.receivePacketsLost/i.receivePackets,i.receiveBitrate=t?8*Math.max(0,i.receiveBytes-t.receiveBytes):0,i.totalDuration=t?t.totalDuration+1:1,i.totalFreezeTime=t?t.totalFreezeTime:0,i.freezeRate=i.totalFreezeTime/i.totalDuration,i.receiveDelay=c.jitterBufferMs),s&&("H264"!==s.codec&&"VP8"!==s.codec||(o.codecType=s.codec),o.receiveBytes=s.bytes,o.receiveBitrate=r?8*Math.max(0,o.receiveBytes-r.receiveBytes):0,o.decodeFrameRate=s.decodeFrameRate,o.renderFrameRate=s.decodeFrameRate,s.outputFrame&&(o.renderFrameRate=s.outputFrame.frameRate),s.receivedFrame?(o.receiveFrameRate=s.receivedFrame.frameRate,o.receiveResolutionHeight=s.receivedFrame.height,o.receiveResolutionWidth=s.receivedFrame.width):e.connection.videoTrack&&(o.receiveResolutionHeight=e.connection.videoTrack._videoHeight||0,o.receiveResolutionHeight=e.connection.videoTrack._videoWidth||0),void 0!==s.framesRateFirefox&&(o.receiveFrameRate=Math.round(s.framesRateFirefox)),o.receivePackets=s.packets,o.receivePacketsLost=s.packetsLost,o.packetLossRate=o.receivePacketsLost/o.receivePackets,o.totalDuration=r?r.totalDuration+1:1,o.totalFreezeTime=r?r.totalFreezeTime:0,o.receiveDelay=s.jitterBufferMs||0,o.freezeRate=o.totalFreezeTime/o.totalDuration),e.audioStats=i,e.videoStats=o,e.pcStats=a})),this.localConnectionsMap.forEach((function(e){var t=e.audioStats,r=e.videoStats,n=Object.assign({},mr),i=Object.assign({},br),o=e.connection.peer.getStats(),a=o.audioSend[0],c=o.videoSend[0];n.muteState=!!e.connection.audioTrack&&!e.connection.audioTrack._originMediaStreamTrack.enabled,i.muteState=!!e.connection.videoTrack&&!e.connection.videoTrack._originMediaStreamTrack.enabled,a&&("opus"!==a.codec&&"aac"!==a.codec||(n.codecType=a.codec),a.inputLevel?n.sendVolumeLevel=Math.round(32767*a.inputLevel):e.connection.audioTrack&&(n.sendVolumeLevel=Math.round(32767*e.connection.audioTrack.getVolumeLevel())),n.sendBytes=a.bytes,n.sendPackets=a.packets,n.sendPacketsLost=a.packetsLost,n.sendBitrate=t?8*Math.max(0,n.sendBytes-t.sendBytes):0),c&&("H264"!==c.codec&&"VP8"!==c.codec||(i.codecType=c.codec),i.sendBytes=c.bytes,i.sendBitrate=r?8*Math.max(0,i.sendBytes-r.sendBytes):0,c.inputFrame?(i.captureFrameRate=c.inputFrame.frameRate,i.captureResolutionHeight=c.inputFrame.height,i.captureResolutionWidth=c.inputFrame.width):e.connection.videoTrack&&(i.captureResolutionWidth=e.connection.videoTrack._videoWidth||0,i.captureResolutionHeight=e.connection.videoTrack._videoHeight||0),c.sentFrame?(i.sendFrameRate=c.sentFrame.frameRate,i.sendResolutionHeight=c.sentFrame.height,i.sendResolutionWidth=c.sentFrame.width):e.connection.videoTrack&&(i.sendResolutionWidth=e.connection.videoTrack._videoWidth||0,i.sendResolutionHeight=e.connection.videoTrack._videoHeight||0),c.avgEncodeMs&&(i.encodeDelay=c.avgEncodeMs),e.connection.videoTrack&&e.connection.videoTrack._encoderConfig&&e.connection.videoTrack._encoderConfig.bitrateMax&&(i.targetSendBitrate=1e3*e.connection.videoTrack._encoderConfig.bitrateMax),i.sendPackets=c.packets,i.sendPacketsLost=c.packetsLost,i.totalDuration=r?r.totalDuration+1:1,i.totalFreezeTime=r?r.totalFreezeTime:0),e.audioStats=n,e.videoStats=i}))}}),Object.defineProperty(e.prototype,"getLocalAudioTrackStats",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.localConnectionsMap.get(e);return t&&t.audioStats?t.audioStats:Object.assign({},hr)}}),Object.defineProperty(e.prototype,"getLocalVideoTrackStats",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.localConnectionsMap.get(e);return t&&t.videoStats?t.videoStats:Object.assign({},vr)}}),Object.defineProperty(e.prototype,"getRemoteAudioTrackStats",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.remoteConnectionsMap.get(e);return t&&t.audioStats?t.audioStats:Object.assign({},mr)}}),Object.defineProperty(e.prototype,"getRemoteVideoTrackStats",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.remoteConnectionsMap.get(e);return t&&t.videoStats?t.videoStats:Object.assign({},br)}}),Object.defineProperty(e.prototype,"getRTCStats",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=0,t=0,r=0,n=0;this.localConnectionsMap.forEach((function(r){r.audioStats&&(e+=r.audioStats.sendBytes,t+=r.audioStats.sendBitrate),r.videoStats&&(e+=r.videoStats.sendBytes,t+=r.videoStats.sendBitrate)})),this.remoteConnectionsMap.forEach((function(e){e.audioStats&&(n+=e.audioStats.receiveBytes,r+=e.audioStats.receiveBitrate),e.videoStats&&(n+=e.videoStats.receiveBytes,r+=e.videoStats.receiveBitrate)}));return{Duration:0,UserCount:1,SendBitrate:t,SendBytes:e,RecvBytes:n,RecvBitrate:r,OutgoingAvailableBandwidth:0,RTT:0}}}),Object.defineProperty(e.prototype,"removeConnection",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.localConnectionsMap.delete(e),this.remoteConnectionsMap.delete(e)}}),Object.defineProperty(e.prototype,"addLocalConnection",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.ID;this.localConnectionsMap.has(t)||this.localConnectionsMap.set(t,{connection:e})}}),Object.defineProperty(e.prototype,"addRemoteConnection",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.ID;this.remoteConnectionsMap.has(t)||this.remoteConnectionsMap.set(t,{connection:e})}}),Object.defineProperty(e.prototype,"updateTrafficStats",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(e.prototype,"updateUplinkStats",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(e.prototype,"isLocalVideoFreeze",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=!!t&&e.framesDecodeFreezeTime>t.framesDecodeFreezeTime,n=!t||e.framesDecodeCount>t.framesDecodeCount;return r||!n}}),Object.defineProperty(e.prototype,"isRemoteAudioFreeze",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){clearInterval(this.updateStatsInterval),this.clientId="",this.localConnectionsMap=new Map,this.remoteConnectionsMap=new Map}}),e}(),gr=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_r=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},Sr=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},Er=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(e){e.UN_PUBLISH="UN_PUBLISH",e.PUBLISH="PUBLISH",e.RE_PUBLISH="RE_PUBLISH"}(qt||(qt={}));var Tr,wr,Or=function(e){function t(t){var r=e.call(this)||this;if(Object.defineProperty(r,"channelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"connectionState",{enumerable:!0,configurable:!0,writable:!0,value:"DISCONNECTED"}),Object.defineProperty(r,"remoteUsers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(r,"uid",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(r,"_isStringUID",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(r,"_publishState",{enumerable:!0,configurable:!0,writable:!0,value:qt.UN_PUBLISH}),Object.defineProperty(r,"_msSub",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_turnServer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_isDualStreamEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(r,"_clientId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(r,"_sessionId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(r,"_gateway",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_config",{enumerable:!0,configurable:!0,writable:!0,value:{forceWaitGatewayResponse:!0,mode:"rtc",codec:"h264",role:"host"}}),Object.defineProperty(r,"_joinInfo",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(r,"_appId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(r,"_highStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_lowStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_latestRepInfo",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(r,"_AVStatsControlls",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_reportStatsInterval",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"_statsCollector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_latestEventLts",{enumerable:!0,configurable:!0,writable:!0,value:{}}),t){t.codec;var n=t.mode,i=t.role;"live"!==n||i||(t.role="audience"),r._config=Object.assign(r._config,t),"rtc"===n&&(r._config.role="host"),r._config.codec="h264",S.info("["+r._clientId+"] Initializing AgoraRTC client, mode: "+r._config.mode+", codec: "+r._config.codec)}return r._clientId=w(5),r._statsCollector=new yr(r._clientId),r._handleMediaServerEvents.call(r),r._handleTrackEvent.call(r),r._handlePeerConnectionEvent.call(r),r._setAVStatsRepTimer(),r}return gr(t,e),Object.defineProperty(t.prototype,"join",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var i=this,o=this;o._latestEventLts.joinStartTime=Date.now();return new Promise((function(a,c){return _r(i,void 0,void 0,(function(){var i,c,s;return Sr(this,(function(u){switch(u.label){case 0:if("DISCONNECTED"!==o.connectionState)throw new A(v.INVALID_OPERATION,"join failure Cause of current server state is "+o.connectionState);if("string"!=typeof e)throw new TypeError("appid must be string.");if(""===e)throw new TypeError("appid can not be empty.");if(o._appId=e,i=/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/,"string"!=typeof t)throw new TypeError("channel must be string.");if(!i.test(t))throw new A(v.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,");if(o.channelName=t,c=/^[a-zA-Z0-9]{1,48}$/,""!==n&&null!=n&&!c.test(n))throw new A(v.INVALID_PARAMS,"The length must be within 48 bytes. The supported characters: a-z,A-Z,0-9");return o._joinInfo.sid=w(32),r&&(o._joinInfo.token=r),[4,o._authGateWay(n,r).catch((function(e){switch(e){case"CHANNEL_BANNED":case"IP_BANNED":case"SERVER_ERROR":case"UID_BANNED":case"DEVELOPER_INVALID":case"APP_INVALID":case"TOKEN_INVALID":o.emit("connection-state-change","DISCONNECTING","CONNECTING",f[e]);break;case"TOKEN_EXPIRED":o.emit("token-privilege-did-expire"),S.debug("token privilege has expire")}S.error(e)}))];case 1:return(s=u.sent())&&a(s),[2]}}))}))}))}}),Object.defineProperty(t.prototype,"leave",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return new Promise((function(t,r){return _r(this,void 0,void 0,(function(){var n;return Sr(this,(function(i){switch(i.label){case 0:return Object.keys(e._joinInfo).length>0?(e.remoteUsers.map((function(e,t){e._mediaStream&&e._mediaStream.destory(),e.videoTrack&&e.videoTrack.stop(),e.videoTrack=void 0,e.audioTrack&&e.audioTrack.stop(),e.audioTrack=void 0})),e._sessionId="",e.remoteUsers=[],e._msSub=[],e.uid="",e._joinInfo={},e._statsCollector&&e._statsCollector.clear(),e._highStream?[4,e.unpublish()]:[3,2]):[3,3];case 1:i.sent(),i.label=2;case 2:return"CONNECTED"===e.connectionState&&(e._gateway.doOffline(e._joinInfo.sid),e._gateway.disconnectCTS(),e._gateway=void 0),n=Date.now(),_t.leave(e._joinInfo.sid,{startTime:n,extend:null}),t(),[2];case 3:return r(),[2]}}))}))}))}}),Object.defineProperty(t.prototype,"publish",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return _r(this,void 0,void 0,(function(){var t,r,n,i,o,a,c,s,u;return Sr(this,(function(l){switch(l.label){case 0:if((t=this)._latestEventLts.publishStartLts=Date.now(),"CONNECTED"!==t.connectionState)throw new A(v.INVALID_OPERATION,"Can't publish stream when connection state is not connected");if(Array.isArray(e)||(e=[e]),0===e.length)throw new A(v.INVALID_PARAMS,"track list is empty");if("live"===t._config.mode&&"audience"===t._config.role)throw new A(v.INVALID_OPERATION,"audience can not publish stream");return r=t._highStream||{},n=r.videoTrack,i=r.audioTrack,[4,t._publishHighStream(e)];case 1:return o=l.sent(),a=o.videoTrack,c=o.audioTrack,s=!!a,u=!!c,t._publishState===qt.UN_PUBLISH?(t._publishState=qt.PUBLISH,t._gateway.doPublish({LocalAudioEnable:u,LocalVideoEnable:s,LocalAudioMute:!!u&&c.isMuted,LocalVideoMute:!!s&&a.isMuted,DualStream:t._isDualStreamEnabled},t._turnServer)):t._publishState===qt.PUBLISH&&(u===!!i&&s===!!n||t._gateway.doRePublish({LocalAudioEnable:u,LocalVideoEnable:s,LocalAudioMute:!!u&&c.isMuted,LocalVideoMute:!!s&&a.isMuted,DualStream:t._isDualStreamEnabled})),[2]}}))}))}}),Object.defineProperty(t.prototype,"unpublish",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return _r(this,void 0,void 0,(function(){var t,r,n,i,o,a,c;return Sr(this,(function(s){switch(s.label){case 0:if(!(t=this)._highStream)throw new A(v.INVALID_OPERATION,"You haven't published track yet");return r=this._highStream,n=r.videoTrack,i=r.audioTrack,[4,t._highStream.removeTracks(e)];case 1:if(s.sent(),o=t._highStream,a=o.videoTrack,c=o.audioTrack,a||c){if(!Array.isArray(e))throw new A(v.INVALID_PARAMS,"tracks must be Array");i&&!c&&t._gateway.enableLocalAudio(!1),n&&!a&&t._gateway.enableLocalVideo(!1)}else t._gateway.doUnPublish(),t._highStream.destory(),t._highStream=void 0,t._publishState=qt.UN_PUBLISH;return t._isDualStreamEnabled&&(t.disableDualStream(),t._lowStream&&t._lowStream.destory()),[2]}}))}))}}),Object.defineProperty(t.prototype,"subscribe",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this,n=this;return new Promise((function(i,o){return _r(r,void 0,void 0,(function(){var r,o,a,c,s,u,l;return Sr(this,(function(d){switch(d.label){case 0:if(!(r=n.remoteUsers.find((function(t){return t.uid===e.uid}))))throw new A("user "+e.uid+" is not find");if("video"===t&&!r.hasVideo||"audio"===t&&!r.hasAudio)throw new A(v.INVALID_OPERATION,"the remote user ["+e.uid+"] has not been published "+t+" track");switch(o=r.hasVideo,a=r.hasAudio,c=!1,s=!1,u="",t){case"video":c=!!o,u="video";break;case"audio":s=!!a,u="audio";break;case"all":default:c=!!o,s=!!a,u="all"}return r.videoTrack||r.audioTrack?[3,2]:(n._latestEventLts.subscribeStartLts=Date.now(),n._gateway.doSubscribe({StreamId:e.uid,SvrIp:n._msSub[0].ip,SvrPort:n._msSub[0].port,RecvAudio:s,RecvVideo:c,StrmType:r._subStreamType,PubSessId:r._pubSid}),[4,new Promise((function(e){setTimeout((function(){e()}),1e3)}))]);case 1:return d.sent(),c&&(r.videoTrack=r._mediaStream.addTracks("video")),s&&(r.audioTrack=r._mediaStream.addTracks("audio")),l={startTime:n._latestEventLts.subscribeStartLts,peer:e.uid,success:!0,video:c,audio:s,extend:null},_t.subscribe(n._joinInfo.sid,l),i(),[3,3];case 2:"all"!==u&&"video"!==u||r.videoTrack||(r.videoTrack=r._mediaStream.addTracks("video")),"all"!==u&&"audio"!==u||r.audioTrack||(r.audioTrack=r._mediaStream.addTracks("audio")),n._gateway.setAVStatus(e.uid,r.hasAudio,r.hasVideo),i(),d.label=3;case 3:return[2]}}))}))}))}}),Object.defineProperty(t.prototype,"unsubscribe",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;return new Promise((function(n,i){var o=r._unsubscribe(e,t);o.hasAudio||o.hasVideo?r._gateway.setAVStatus(o.uid,o.hasAudio,o.hasVideo):(r._gateway.doUnSubscribe(o.uid),o._mediaStream.closePC())}))}}),Object.defineProperty(t.prototype,"setLowStreamParameter",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!e)throw new A(v.INVALID_PARAMS,"streamParameter must be object");if(this._isDualStreamEnabled&&this._lowStream){var t={};e.framerate&&(t.frameRate=e.framerate>15?15:e.framerate),e.height&&(t.height=e.height),e.width&&(t.width=e.width),this._lowStream._videoMediaStreamTrack.applyConstraints(t)}}}),Object.defineProperty(t.prototype,"enableDualStream",{enumerable:!1,configurable:!0,writable:!0,value:function(){return _r(this,void 0,void 0,(function(){var e,t=this;return Sr(this,(function(r){return e=this,[2,new Promise((function(r,n){return _r(t,void 0,void 0,(function(){return Sr(this,(function(t){if(!0===e._isDualStreamEnabled)return S.warning(v.INVALID_OPERATION,"Already enabled."),[2];if(e._isDualStreamEnabled=!0,!e._joinInfo||"CONNECTED"!==e.connectionState)throw new A(v.INVALID_OPERATION,"Can't publish stream when connection state is not connected");if(!e._highStream||!e._highStream.videoTrack)throw new A(v.INVALID_OPERATION,"Can't publish low stream cause of you did not publish high stream");return e._publishLowStream(),e._gateway.doPublishS(e._turnServer),e._gateway.enableDualStream(!0),[2]}))}))}))]}))}))}}),Object.defineProperty(t.prototype,"disableDualStream",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return new Promise((function(t,r){!1!==e._isDualStreamEnabled?(e._isDualStreamEnabled=!1,e._highStream.closeExPC(),e._gateway.doUnPublishS(),e._gateway.enableDualStream(!1)):S.warning(v.INVALID_OPERATION,"Already disabled.")}))}}),Object.defineProperty(t.prototype,"setParameters",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return _r(this,void 0,void 0,(function(){var t,r,n,i,o;return Sr(this,(function(a){return t=this,r=e.ConfPriCloudAddr,n=e.SetTurnSvr,r&&(i=r.ServerAdd,o=r.Port,i&&(m.GATEWAY_ADDRESS="http://"+i+(o?":"+o:""))),n&&(t._turnServer=n),[2]}))}))}}),Object.defineProperty(t.prototype,"setClientRole",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return _r(this,void 0,void 0,(function(){var t;return Sr(this,(function(r){if("rtc"===(t=this)._config.mode)throw S.warning("rtc mode can not use setClientRole"),new A(v.INVALID_OPERATION,"rtc mode can not use setClientRole");if("audience"===e&&t._highStream)throw new A(v.INVALID_OPERATION,"can not set client role to audience when publishing stream");return e!==t._config.role&&t._gateway.setClientRole(e),[2]}))}))}}),Object.defineProperty(t.prototype,"setProxyServer",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"startProxyServer",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"stopProxyServer",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"setRemoteVideoStreamType",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;return new Promise((function(n,i){var o=r.remoteUsers.find((function(t){return t.uid===e}));if(!o)throw S.warning("can not find remote user "+e),new A(v.INVALID_PARAMS,"can not find remote user "+e);if("number"!=typeof t)throw new A(v.INVALID_PARAMS,"streamType must be number");if(!o._dualStream)throw new A(v.INVALID_OPERATION,"The remote user "+e+" did not enable the dual stream");(null==o?void 0:o.hasVideo)?(r._gateway.setRemoteVStrmType(e,t),r.emit("stream-type-changed",e,t)):o._subStreamType=t}))}}),Object.defineProperty(t.prototype,"setStreamFallbackOption",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return new Promise((function(e,t){}))}}),Object.defineProperty(t.prototype,"setEncryptionConfig",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){}}),Object.defineProperty(t.prototype,"renewToken",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;return new Promise((function(r,n){if("CONNECTED"!==t.connectionState)throw new A(v.INVALID_OPERATION,"renewToken should not be called before user join");t._gateway.doReNewToken(e)}))}}),Object.defineProperty(t.prototype,"enableAudioVolumeIndicator",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"getRTCStats",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._statsCollector.getRTCStats()}}),Object.defineProperty(t.prototype,"setLiveTranscoding",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return new Promise((function(e,t){}))}}),Object.defineProperty(t.prototype,"startLiveStreaming",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return new Promise((function(e,t){}))}}),Object.defineProperty(t.prototype,"stopLiveStreaming",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return new Promise((function(e,t){}))}}),Object.defineProperty(t.prototype,"addInjectStreamUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return new Promise((function(e,t){}))}}),Object.defineProperty(t.prototype,"removeInjectStreamUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(){return new Promise((function(e,t){}))}}),Object.defineProperty(t.prototype,"startChannelMediaRelay",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return new Promise((function(e,t){}))}}),Object.defineProperty(t.prototype,"updateChannelMediaRelay",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return new Promise((function(e,t){}))}}),Object.defineProperty(t.prototype,"stopChannelMediaRelay",{enumerable:!1,configurable:!0,writable:!0,value:function(){return new Promise((function(e,t){}))}}),Object.defineProperty(t.prototype,"_authGateWay",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return _r(this,void 0,void 0,(function(){var r,n,i,o,a,c,s;return Sr(this,(function(u){switch(u.label){case 0:return r=this,[4,I.joinGateway({sid:r._joinInfo.sid,appId:r._appId,cname:r.channelName,uid:e||"",token:t||"",extend:"",proxyServer:""})];case 1:return(n=u.sent())?(n.uid,i=n.session_id,o=n.addresses,i&&(r._sessionId=i,_t.sessionInit(r._joinInfo.sid,{cname:r._joinInfo.cname,appid:r._joinInfo.appId,mode:r._config.mode,role:r._config.role,success:!0})),r._msSub=o.filter((function(e){return 1===e.type})),[4,r._connectMediaServer(n)]):[3,4];case 2:return u.sent(),a={ChanId:r.channelName,ChanSId:r._sessionId,UserId:r.uid,UserSId:r._joinInfo.sid,SdkVer:m.SDK_VERSION,VCodec:r._config.codec,ACodec:"opus",Role:r._config.role,AcsToken:t||""},c=Date.now(),[4,r._gateway.doOnline(a)];case 3:return s=u.sent(),_t.joinGateway(r._joinInfo.sid,{joinStartTime:r._latestEventLts.joinStartTime,startTime:c,uid:s,cid:r._joinInfo.cid,extend:null,success:!0}),r.uid=s,Object.assign(r._joinInfo,{apResponse:n,clientId:r._clientId,appId:r._appId,cname:r.channelName,uid:r.uid,turnServer:{},proxyServer:void 0,token:t||r._appId,useProxyServer:!1,startTime:Date.now()}),[2,r.uid];case 4:return[2]}}))}))}}),Object.defineProperty(t.prototype,"_connectMediaServer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return _r(this,void 0,void 0,(function(){var t,r,n,i;return Sr(this,(function(o){return t=this,r=e.addresses,e.detail[8],n=Date.now(),i=r.filter((function(e){return 0===e.type})),[2,new Promise((function(o,a){return _r(this,void 0,void 0,(function(){var c,s,u,l,d,p,h,b;return Sr(this,(function(y){switch(y.label){case 0:if(c=!1,!(i.length>0))return[3,9];y.label=1;case 1:y.trys.push([1,6,7,8]),s=Er(i),u=s.next(),y.label=2;case 2:return u.done?[3,5]:(l=u.value,S.debug("begin connect media server ",l),t._gateway.setAppInfo({appId:t._appId}),t._gateway.configServer(l.ip,l.port),[4,t._gateway.connectCTS()]);case 3:return y.sent(),o(),c=!0,d=Date.now(),_t.chooseServer(t._joinInfo.sid,{startTime:n,success:!0,uid:t._joinInfo.uid,cid:"",elapse:d-t._latestEventLts.joinStartTime,extend:null,eventElapse:d-n,chooseServer:{pullServer:"https://webrtc2-ap-web-1.agora.io/api/v1",pushServer:"https://webrtc2-ap-web-1.agora.io/api/v1"},serverList:r,errorCode:"NETWORK_ERROR"}),[3,5];case 4:return u=s.next(),[3,2];case 5:return[3,8];case 6:return p=y.sent(),h={error:p},[3,8];case 7:try{u&&!u.done&&(b=s.return)&&b.call(s)}finally{if(h)throw h.error}return[7];case 8:return c||(Date.now()-t._gateway._connectBeginTime<m.GATEWAY_ERTRY_TIMEOUT?t._connectMediaServer(e):t.emit("connection-state-change","DISCONNECTING",t._gateway._revState,f.NETWORK_ERROR)),[3,10];case 9:throw a(v.CAN_NOT_GET_GATEWAY_SERVER),new A(v.CAN_NOT_GET_GATEWAY_SERVER);case 10:return[2]}}))}))}))]}))}))}}),Object.defineProperty(t.prototype,"_unsubscribe",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.remoteUsers.find((function(t){return t.uid===e.uid}));if(!r)throw new A("user "+r.uid+" is not find");var n=r.hasVideo,i=r.hasAudio;return void 0!==t&&"all"!==t&&"video"!==t||!n||(r.videoTrack.stop(),r.videoTrack=void 0,r.hasVideo=!1,r._res=0),void 0!==t&&"all"!==t&&"audio"!==t||!i||(r.audioTrack.stop(),r.audioTrack=void 0,r.hasAudio=!1),this._calculate(),this._setAVStatsRepTimer(),r}}),Object.defineProperty(t.prototype,"_publishHighStream",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return _r(this,void 0,void 0,(function(){var t;return Sr(this,(function(r){if((t=this)._joinInfo&&"CONNECTED"===t.connectionState)return t._highStream?(t._highStream.addTracks(e),[2,t._highStream]):(t._highStream=new or(t.uid,t._statsCollector,t._joinInfo),t._highStream.addTracks(e),[2,t._highStream]);throw new A(v.INVALID_OPERATION,"Can't publish stream when connection state is not connected")}))}))}}),Object.defineProperty(t.prototype,"_publishLowStream",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._lowStream=new cr(this.uid,this._statsCollector,this._joinInfo),this._lowStream.addTracks(this._highStream.videoTrack),this.setLowStreamParameter({width:320,height:240,framerate:15}),this._lowStream}}),Object.defineProperty(t.prototype,"_createLiveStreamingClient",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_createChannelMediaRelayClient",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_handleDeviceEvents",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_handleRVChange",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_calculate",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=[],t=0,r=this.remoteUsers.filter((function(e){return e.audioTrack||e.videoTrack}));if(!(r.length<1)){r.map((function(r){e.push(r._res),r.hasAudio&&r.audioTrack&&t++}));var n=e.reduce((function(e,t){return e+t})),i={audioNumber:t,videoSize:n,lts:Date.now()};i!==this._latestRepInfo&&(this._latestRepInfo=i,this._repRes())}}}),Object.defineProperty(t.prototype,"_repRes",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._latestRepInfo,t=e.videoSize,r=e.audioNumber,n=e.lts;this._gateway&&this._gateway.reportAVStat({TimeUsed:Date.now()-n,AudNum:r,VidSize:t})}}),Object.defineProperty(t.prototype,"_setAVStatsRepTimer",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;e._clearAVStatsRepTimer(),e._AVStatsControlls=setInterval((function(){e._calculate()}),1e4)}}),Object.defineProperty(t.prototype,"_clearAVStatsRepTimer",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._AVStatsControlls&&clearInterval(this._AVStatsControlls)}}),Object.defineProperty(t.prototype,"_handleMediaServerEvents",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;e._gateway||(e._gateway=new R),e._gateway.handleMediaServerEvents=function(t,r){var n=r.Code;switch(t){case"connection-state-change":console.log("msgContent => ",r);var i=r.curState,o=r.revState,a=r.reason;e.connectionState=i,e.emit("connection-state-change",i,o,a);var c=Date.now();_t.serverConnectionState(e._joinInfo.sid,{startTime:c,extend:null}),"RECONNECTING"===i&&(e.remoteUsers.map((function(t,r){t._mediaStream&&t._mediaStream.destory(),e.emit("user-unpublished",t,"all"),e.remoteUsers.splice(r,1)})),e._joinInfo.sid=w(32),e._authGateWay(e._joinInfo.uid,e._joinInfo.token).then((function(t){if(e._highStream){var r=e._highStream._pubTracks;e._publishState=qt.UN_PUBLISH,e._highStream.destory(!1),e._highStream=void 0,e.publish(r),e._lowStream&&(e._isDualStreamEnabled=!1,e.enableDualStream())}})));break;case"token-privilege-did-expire":e.emit("token-privilege-did-expire");break;case"token-privilege-will-expire":e.emit("token-privilege-will-expire");break;case N.ON_PUBLISH:var s={startTime:e._latestEventLts.publishStartLts,success:!0,cameraDeviceId:e._highStream.videoTrack?e._highStream.videoTrack.getMediaStreamTrack().label:"",microphoneDeviceId:e._highStream.audioTrack?e._highStream.audioTrack.getMediaStreamTrack().label:""};if(0===n){r.StreamId;var u=r.Offer,l=e._highStream.peer;s.success=!0,l.createAnswer(u),e._isDualStreamEnabled&&(e._publishLowStream(),e._gateway.doPublishS(e._turnServer),e._gateway.enableDualStream(!0))}else s.success=!1;_t.publish(e._joinInfo.sid,s);break;case N.ON_RE_PUBLISH:if(0===n){r.StreamId,u=r.Offer;e._highStream.peer.createAnswer(u,!0)}break;case N.ON_PUBLISH_EX:if(0===n){r.StreamId,u=r.Offer;e._lowStream.peer.createAnswer(u)}break;case N.ON_SUBSCRIBE:if(0===n){var d,f=r.StreamId;u=r.Offer;if(f===e.uid)d=e._highStream.peer;else{var p=e.remoteUsers.find((function(e){return e.uid===f}));p||S.warning("can not find remote user "+f),d=p._mediaStream.peer}d.createAnswer(u)}break;case N.ON_ICE:var h=r.StreamId,v=r.Sdp,m=r.SubStream,b=void 0;if(h===e.uid)b=e._highStream.peer,m&&(b=e._lowStream.peer);else{var y=e.remoteUsers.find((function(e){return e.uid===h}));y||S.warning("can not find remote user "+h),b=y._mediaStream.peer}b.setIceCandidate(v);break;case N.ON_SESSION_INIT:var g=r.CId,_=r.Interval;e._joinInfo.cid=g,e._startReportStats(g,_);break;case N.ON_CHANNEL_MESSAGE:var E=r.Cmd;if(E===N.ON_CHANNEL_USER_ONLINE){var T={audioMuted:!1,videoMuted:!1,hasAudio:!1,hasVideo:!1,uid:r.UserId};e.remoteUsers.push(T),e.emit("user-joined",T)}else if(E===N.ON_CHANNEL_USER_OFFLINE){var O=r.UserId,C=r.Reason,P=e.remoteUsers.find((function(t,r){return t.uid===O&&(t._mediaStream&&t._mediaStream.destory(),e.remoteUsers.splice(r,1),e._statsCollector.removeConnection(t.uid)),t.uid===O}));if(P){var R="";switch(C){case"Dropped":case"Offline":R="Quit";break;case"BecomeAudience":R="BecomeAudience"}e.emit("user-left",P,R)}}else if(E===N.ON_CHANNEL_SET_USER_ROLE)r.AppId,r.UserId,r.Code,r.Role,r.ChanId;else if(E===N.ON_CHANNEL_DUALSTREAM_ENABLE){var I=r.UserId,k=r.Enable,D=e.remoteUsers.find((function(e){return e.uid===I}));D&&(D._dualStream=k)}else if(E===N.ON_CHANNEL_USER_STREAM_OPEN){var j=r.UserId,x=(r.StreamId,r.PubSessionId),M=r.DualStream,L=r.LocalAudioEnable,F=r.LocalVideoEnable,U=r.LocalAudioMute,V=r.LocalVideoMute,B=e.remoteUsers.find((function(e){return e.uid===j}));if(void 0!==B){var G=L,W=F;Object.assign(B,{audioMuted:U,videoMuted:V,hasAudio:G,hasVideo:W,_pubSid:x,_mediaStream:new pr(j,e._statsCollector,e._joinInfo),_dualStream:M,_subStreamType:0,_res:0});var H=G&&W?"all":W?"video":"audio";e.emit("user-published",B,H)}}else if(E===N.ON_CHANNEL_USER_STREAM_CLOSE){var K=r.UserId,J=(r.StreamId,x=r.PubSessionId,e.remoteUsers.find((function(e,t){return e.uid===K})));if(null!=J)e._unsubscribe(J,"all"),J._mediaStream.closePC(),e.emit("user-unpublished",J,"all")}else if(E===N.ON_CHANNEL_USER_ENABLE_VIDEO){var z=r.UserId,Y=(k=r.Enable,e.remoteUsers.find((function(e){return e.uid===z})));if(!Y)throw new A("user "+z+" is not find");if(k){if(!Y.hasVideo){Y.hasVideo=!0,e._gateway.setAVStatus(z,Y.hasAudio,Y.hasVideo),Y.videoTrack=Y._mediaStream.addTracks("video");H=Y.hasAudio&&Y.hasVideo?"all":Y.hasAudio?"video":"audio";e.emit("user-published",Y,H)}}else e._unsubscribe(Y,"video"),e._gateway.setAVStatus(z,Y.hasAudio,Y.hasVideo),S.info("stream removed with uid "+z);e._calculate(),e._setAVStatsRepTimer()}else if(E===N.ON_CHANNEL_USER_ENABLE_AUDIO){var X=r.UserId,q=(k=r.Enable,e.remoteUsers.find((function(e){return e.uid===X})));if(!q)throw new A("user "+X+" is not find");if(k){if(!q.hasAudio){q.hasAudio=!0,q.audioTrack=q._mediaStream.addTracks("audio");H=q.hasAudio&&q.hasVideo?"all":q.hasAudio?"video":"audio";e.emit("user-published",q,H)}}else e._unsubscribe(q,"audio"),e._gateway.setAVStatus(X,q.hasAudio,q.hasVideo);e._calculate(),e._setAVStatsRepTimer()}else if(E===N.ON_CHANNEL_USER_MUTE_VIDEO){var $=r.UserId,Q=r.Mute,Z=e.remoteUsers.find((function(e){return e.uid===$}));Z.videoMuted=Q,e.emit("user-mute-updated",Z)}else if(E===N.ON_CHANNEL_USER_MUTE_AUDIO){var ee=r.UserId,te=(Q=r.Mute,e.remoteUsers.find((function(e){return e.uid===ee})));te.audioMuted=Q,e.emit("user-mute-updated",te)}}}}}),Object.defineProperty(t.prototype,"_handleTrackEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;Vt.handleTrackEvent=function(t,r){var n=t.streamId,i=t.peerType,o=t.trackMediaType,a=t.eventName;if(a===N.UPDATE_MUTE_STATE)"pub"===i&&("audio"===o?e._gateway.muteLocalAudioStream(r):"video"===o&&e._gateway.muteLocalVideoStream(r));else if(a===N.TRACK_ENDED);else if(a===N.FIRST_FRAME_DECODED);else if(a===N.VIDEO_SIZE_CHANGE){var c=e.remoteUsers.find((function(e){return e.uid===n}));if(!c)return;c._res!==r&&(c._res=r,e._calculate(),e._setAVStatsRepTimer())}}}}),Object.defineProperty(t.prototype,"_handlePeerConnectionEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;Vt.handlePeerConnectionEvent=function(t,r,n,i){n===N.ICE_CANDIDATE?e._gateway.sendIceCandidate(t,i,"pubEx"===r||null):n===N.CREATE_ANSWER&&e._gateway.sendAnswer(t,i,"pubEx"===r||null)}}}),Object.defineProperty(t.prototype,"_startReportStats",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;r._reportStatsInterval&&clearInterval(r._reportStatsInterval),r._reportStatsInterval=window.setInterval((function(){if(r._highStream){var t={cid:e,lts:Date.now(),type:"local"};if(r._highStream.videoTrack){var n=r._highStream.videoTrack.getStats();t.lvid={sbr:n.sendBitrate,sfps:n.sendFrameRate,eofps:n.captureFrameRate,rofps:n.captureFrameRate,stbr:n.captureFrameRate,stfps:n.captureFrameRate,ebr:n.sendBytes,e_w:n.captureResolutionWidth,e_h:n.captureResolutionHeight,efps:n.captureFrameRate,ploss:n.sendPacketsLost},r._gateway.reportArStats(t)}if(r._highStream.audioTrack){var i=r._highStream.audioTrack.getStats();t.laud={nc:1,shz:0,sbr:i.sendBytes,vol:i.sendVolumeLevel,ploss:i.sendPacketsLost},r._gateway.reportArStats(t)}}r._lowStream,r.remoteUsers.length>0&&r.remoteUsers.forEach((function(t){var n={cid:e,peer:t.uid,lts:Date.now(),type:"peer"};if(t.videoTrack){var i=t.videoTrack.getStats();n.vif={w:i.receiveResolutionWidth,h:i.receiveResolutionHeight,rbr:i.receiveBitrate,dofps:i.receiveFrameRate,rofps:i.renderFrameRate,ploss:i.receivePacketsLost,rst:i._subStreamType,tft:i.totalFreezeTime,ffps:i.freezeRate},r._gateway.reportArStats(n)}if(t.audioTrack){var o=t.audioTrack.getStats();n.aif={ntd:o.end2EndDelay,jbd:o.receiveDelay,aloss:o.packetLossRate,nc:1,rhz:0,rb:o.receiveBitrate,tft:o.totalFreezeTime,ffps:o.freezeRate,vol:o.receiveLevel,ploss:o.receivePacketsLost},r._gateway.reportArStats(n)}}))}),t)}}),t}(T),Cr=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pr=function(e){function t(t,r){var n=e.call(this)||this;return Object.defineProperty(n,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"startPlayTime",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"startPlayOffset",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"pausePlayTime",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"currentLoopCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"audioBuffer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"options",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(n,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"sourceNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"mediaStreamDestination",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_currentState",{enumerable:!0,configurable:!0,writable:!0,value:"stopped"}),n.id=r,n.context=Gt.getAudioContextInstance(),n.mediaStreamDestination=n.context.createMediaStreamDestination(),n.audioBuffer=t,n.startPlayOffset=n.options.startPlayTime||0,n}return Cr(t,e),Object.defineProperty(t.prototype,"getAudioTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.mediaStreamDestination.stream.getAudioTracks()[0]}}),Object.defineProperty(t.prototype,"updateOptions",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"stopped"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):S.warning("can not set audio source options")}}),Object.defineProperty(t.prototype,"startProcessAudioBuffer",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}}),Object.defineProperty(t.prototype,"pauseProcessAudioBuffer",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}}),Object.defineProperty(t.prototype,"seekAudioBuffer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=e))}}),Object.defineProperty(t.prototype,"resumeProcessAudioBuffer",{enumerable:!1,configurable:!0,writable:!0,value:function(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}}),Object.defineProperty(t.prototype,"stopProcessAudioBuffer",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(e){}this.reset()}}}),Object.defineProperty(t.prototype,"startSourceNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}}),Object.defineProperty(t.prototype,"createSourceNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.mediaStreamDestination),e}}),Object.defineProperty(t.prototype,"handleSourceNodeEnded",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}}),Object.defineProperty(t.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}),Object.defineProperty(t.prototype,"currentState",{get:function(){return this._currentState},set:function(e){e!==this._currentState&&(this._currentState=e,this.emit(N.AUDIO_SOURCE_STATE_CHANGE,this._currentState))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.audioBuffer.duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:(this.context.currentTime-this.startPlayTime+this.startPlayOffset)%this.audioBuffer.duration},enumerable:!0,configurable:!0}),t}(T),Rr=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ir=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},Nr=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};!function(e){e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND"}(Tr||(Tr={})),function(e){e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(wr||(wr={}));var Ar,kr=function(e){function t(){var t=e.call(this)||this;Object.defineProperty(t,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"deviceInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map});var r=t;return r.init().then((function(){navigator.mediaDevices&&navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",r.updateDevicesInfo.bind(r)),window.setInterval(r.updateDevicesInfo.bind(r),5e3)})),t}return Rr(t,e),Object.defineProperty(t.prototype,"enumerateDevices",{enumerable:!1,configurable:!0,writable:!0,value:function(){return function(){return Ir(this,void 0,void 0,(function(){return Nr(this,(function(e){switch(e.label){case 0:return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?[4,navigator.mediaDevices.enumerateDevices().catch((function(e){new A(v.ENUMERATE_DEVICES_FAILED,e.toString())}))]:[3,2];case 1:return[2,e.sent()||[]];case 2:throw new A(v.NOT_SUPPORT,"enumerateDevices() not supported.")}}))}))}()}}),Object.defineProperty(t.prototype,"getRecordingDevices",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return function(){return Ir(this,void 0,void 0,(function(){var t;return Nr(this,(function(r){switch(r.label){case 0:return[4,e.enumerateDevices()];case 1:return void 0!==(t=r.sent())?[2,t.filter((function(e){return"audioinput"===e.kind}))]:[2]}}))}))}()}}),Object.defineProperty(t.prototype,"getPlayoutDevices",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return function(){return Ir(this,void 0,void 0,(function(){var t;return Nr(this,(function(r){switch(r.label){case 0:return[4,e.enumerateDevices()];case 1:return void 0!==(t=r.sent())?[2,t.filter((function(e){return"audiooutput"===e.kind}))]:[2]}}))}))}()}}),Object.defineProperty(t.prototype,"getCamerasDevices",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return function(){return Ir(this,void 0,void 0,(function(){var t;return Nr(this,(function(r){switch(r.label){case 0:return[4,e.enumerateDevices()];case 1:return void 0!==(t=r.sent())?[2,t.filter((function(e){return"videoinput"===e.kind}))]:[2]}}))}))}()}}),Object.defineProperty(t.prototype,"searchDeviceNameById",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.deviceInfoMap.get(e);return t?t.device.label||t.device.deviceId:null}}),Object.defineProperty(t.prototype,"getDeviceById",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;return function(){return Ir(this,void 0,void 0,(function(){var r,n;return Nr(this,(function(i){switch(i.label){case 0:return[4,t.enumerateDevices()];case 1:if(r=i.sent(),!(n=r.find((function(t){return t.deviceId===e}))))throw new A(v.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return[2,n]}}))}))}()}}),Object.defineProperty(t.prototype,"getVideoCameraIdByLabel",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;return function(){return Ir(this,void 0,void 0,(function(){var r,n;return Nr(this,(function(i){switch(i.label){case 0:return[4,t.enumerateDevices()];case 1:if(r=i.sent(),!(n=r.find((function(t){return"videoinput"===t.kind&&t.label===e}))))throw new A(v.DEVICE_NOT_FOUND,"camera label: ".concat(e));return[2,n.deviceId]}}))}))}()}}),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return function(){return Ir(this,void 0,void 0,(function(){return Nr(this,(function(t){switch(t.label){case 0:return e.state=Tr.INITING,[4,e.updateDevicesInfo().catch((function(t){e.state=Tr.IDLE}))];case 1:return t.sent(),e.state=Tr.INITEND,[2]}}))}))}()}}),Object.defineProperty(t.prototype,"updateDevicesInfo",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return function(){return Ir(this,void 0,void 0,(function(){var t,r,n;return Nr(this,(function(i){switch(i.label){case 0:return[4,e.enumerateDevices()];case 1:return t=i.sent(),r=Date.now(),n=[],t.forEach((function(t){var i=e.deviceInfoMap.get(t.deviceId);if("ACTIVE"!==(i?i.state:"INACTIVE")){var o={initAt:r,updateAt:r,device:t,state:"ACTIVE"};n.push(o),e.deviceInfoMap.set(t.deviceId,o)}i&&(i.updateAt=r)})),e.deviceInfoMap.forEach((function(e){"ACTIVE"===e.state&&e.updateAt!==r&&(e.state="INACTIVE",n.push(e))})),e.state!==Tr.INITEND?[2]:(n.forEach((function(t){switch(t.device.kind){case"audioinput":e.emit(wr.RECORDING_DEVICE_CHANGED,t);break;case"videoinput":e.emit(wr.CAMERA_DEVICE_CHANGED,t);break;case"audiooutput":e.emit(wr.PLAYOUT_DEVICE_CHANGED,t)}})),[2])}}))}))}()}}),t}(T),Dr=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jr=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},xr=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},Mr=function(e){function t(t,r,n,i){var o=e.call(this,t,r||{},i)||this;return Object.defineProperty(o,"_deviceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_constraints",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),o._deviceName="default",o._config=r||{},o._constraints=n,o._config&&(o._config.cameraId&&(o._deviceName=(new kr).searchDeviceNameById(o._config.cameraId)||"default"),o._config.encoderConfig&&(o._encoderConfig=o._config.encoderConfig)),o}return Dr(t,e),Object.defineProperty(t.prototype,"setDevice",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return jr(this,void 0,void 0,(function(){var t,r,n,i,o;return xr(this,(function(a){switch(a.label){case 0:return t=this,[4,(new kr).getDeviceById(e)];case 1:return r=a.sent(),(n={}).video=t._constraints,n.video.deviceId=e,[4,ct(n,t.getTrackId())];case 2:return i=a.sent(),[4,t._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!0)];case 3:return a.sent(),[4,st(t._originMediaStreamTrack)];case 4:return o=a.sent(),t._videoWidth=o[0],t._videoWidth=o[1],t._deviceName=r.label,[2]}}))}))}}),Object.defineProperty(t.prototype,"setEncoderConfiguration",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return jr(this,void 0,void 0,(function(){var t,r,n,i;return xr(this,(function(o){switch(o.label){case 0:if(t=this,!e)throw new A("");return r=ut(e),t._config.encoderConfig=r,[4,dt(t._config)];case 1:return n=o.sent(),[4,t._originMediaStreamTrack.applyConstraints(n)];case 2:return o.sent(),[4,st(t._originMediaStreamTrack)];case 3:return i=o.sent(),t._videoWidth=i[0],t._videoHeight=i[1],t._constraints=n,t._encoderConfig=t._config.encoderConfig,t.emit(N.RTC_NEED_RENEGOTIATE),[2]}}))}))}}),t}(tr),Lr=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fr=function(e){function t(t,r,n,i){var o=e.call(this,r.getAudioTrack(),n,i)||this;return Object.defineProperty(o,"_bufferSource",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),o._bufferSource=r,o._bufferSource.on(N.AUDIO_SOURCE_STATE_CHANGE,(function(e){o.emit(N.AUDIO_SOURCE_STATE_CHANGE,e)})),o}return Lr(t,e),Object.defineProperty(t.prototype,"getCurrentTime",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._bufferSource.currentTime}}),Object.defineProperty(t.prototype,"startProcessAudioBuffer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}}),Object.defineProperty(t.prototype,"pauseProcessAudioBuffer",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._bufferSource.pauseProcessAudioBuffer()}}),Object.defineProperty(t.prototype,"seekAudioBuffer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._bufferSource.seekAudioBuffer(e)}}),Object.defineProperty(t.prototype,"resumeProcessAudioBuffer",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._bufferSource.resumeProcessAudioBuffer()}}),Object.defineProperty(t.prototype,"stopProcessAudioBuffer",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._bufferSource.stopProcessAudioBuffer()}}),Object.defineProperty(t.prototype,"currentState",{get:function(){return this._bufferSource.currentState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._bufferSource.duration},enumerable:!0,configurable:!0}),t}(Jt),Ur=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vr=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},Br=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},Gr=function(e){function t(t,r,n,i){var o=e.call(this,t,r?lt(r):{},i)||this;return Object.defineProperty(o,"_deviceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_constraints",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),o._deviceName="default",o._config=r,o._constraints=n,r&&(r.microphoneId&&(o._deviceName=(new kr).searchDeviceNameById(r.microphoneId)||"default"),o._config.encoderConfig&&(o._encoderConfig=o._config.encoderConfig)),o}return Ur(t,e),Object.defineProperty(t.prototype,"setDevice",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return Vr(this,void 0,void 0,(function(){var t,r,n,i;return Br(this,(function(o){switch(o.label){case 0:return t=this,[4,(new kr).getDeviceById(e)];case 1:return r=o.sent(),(n={}).audio=t._constraints,n.audio.deviceId=e,[4,ct(n,t.getTrackId())];case 2:return i=o.sent(),[4,t._updateOriginMediaStreamTrack(i.getAudioTracks()[0],!0)];case 3:return o.sent(),t._deviceName=r.label,[2]}}))}))}}),t}(Jt),Wr=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},Hr=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};!function(e){var t=this;e.player=$t,S.use((function(e,t){m.UPLOAD_LOG,t()}));var r=new kr;r.on("recordingDeviceChanged",(function(t){S.info("recordingDeviceChanged ",t),e.onMicrophoneChanged&&e.onMicrophoneChanged(t)})),r.on("cameraDeviceChanged",(function(t){S.info("cameraDeviceChanged ",t),e.onCameraChanged&&e.onCameraChanged(t)})),e.onCameraChanged=function(){},e.onMicrophoneChanged=function(){},e.onAudioAutoplayFailed=function(){},e.VERSION=m.SDK_VERSION,e.createClient=function(e){void 0===e&&(e={codec:"h264",mode:"rtc"});try{["h264"].includes(e.codec),["rtc","live"].includes(e.mode)}catch(e){throw e}return new Or(e)},e.createCameraVideoTrack=function(e){return Wr(t,void 0,void 0,(function(){var t,r,n;return Hr(this,(function(i){switch(i.label){case 0:return[4,dt(t=null!=e?e:{})];case 1:return[4,ct({video:r=i.sent()})];case 2:return n=i.sent(),[2,new Mr(n.getVideoTracks()[0],t,r,w(5))]}}))}))},e.createMicrophoneAudioTrack=function(e){return Wr(t,void 0,void 0,(function(){var t,r,n,i;return Hr(this,(function(o){switch(o.label){case 0:return r=function(e){var t={};if(ee.isLegacyChrome()||(void 0!==e.AGC&&(t.autoGainControl=e.AGC,ee.isChrome&&(t.googAutoGainControl=e.AGC,t.googAutoGainControl2=e.AGC)),void 0!==e.AEC&&(t.echoCancellation=e.AEC),void 0!==e.ANS&&(t.noiseSuppression=e.ANS,ee.isChrome&&(t.googNoiseSuppression=e.ANS))),e.encoderConfig){var r=lt(e.encoderConfig);t.channelCount=r.stereo?2:1,t.sampleRate=r.sampleRate,t.sampleSize=r.sampleSize}return t}(t=null!=e?e:{}),n=null,[4,ct({audio:r},!0)];case 1:return i=o.sent(),n=i.getAudioTracks()[0],[2,new Gr(n,t,r,w(5))]}}))}))},e.createMicrophoneAndCameraTracks=function(r,n){return Wr(t,void 0,void 0,(function(){var t,i;return Hr(this,(function(o){switch(o.label){case 0:return[4,e.createMicrophoneAudioTrack(r)];case 1:return t=o.sent(),[4,e.createCameraVideoTrack(n)];case 2:return i=o.sent(),[2,[t,i]]}}))}))},e.createScreenVideoTrack=function(e,r){return Wr(t,void 0,void 0,(function(){var t,n,i,o,a,c,s,u,l,d,f;return Hr(this,(function(p){switch(p.label){case 0:return n=ft(t=null!=e?e:{}),(i={}).screen=n,o=ee.getBrowserInfo(),r&&("Chrome"===o.name&&73<=Number(o.version)?i.screenAudio=r:(r=!1,S.error(v.NOT_SUPPORT,"your browser or platform is not support share-screen with audio"))),[4,ct(i)];case 1:return a=p.sent(),c=null===(d=a)||void 0===d?void 0:d.getVideoTracks()[0],s=null===(f=a)||void 0===f?void 0:f.getAudioTracks()[0],r&&!s&&S.warning("you didn't check Share audio in the pop-up window when sharing the screen"),u=new tr(c,t,w(5)),l=null,s&&(l=new Jt(s,t,w(5))),[2,l?[u,l]:u]}}))}))},e.createBufferSourceAudioTrack=function(r){return Wr(t,void 0,void 0,(function(){var t,n,i,o,a;return Hr(this,(function(c){switch(c.label){case 0:if(t=r.source,r.cacheOnlineFile,n=r.encoderConfig,!t)throw new A(v.INVALID_PARAMS,"Cannot read property 'source' of undefined");return[4,e.AudioManager.decodeAsAudioBuffer(t)];case 1:return i=c.sent(),o=w(5),a=new Pr(i,o),[2,new Fr(t,a,n||{},o)]}}))}))},e.createCustomAudioTrack=function(e){var t=e||{},r=t.encoderConfig,n=t.mediaStreamTrack;if(!(n instanceof MediaStreamTrack))throw new A("");var i={};return r&&(i.encoderConfig=r),new Jt(n,i,w(5))},e.createCustomVideoTrack=function(e){var t=e||{},r=t.bitrateMax,n=t.bitrateMin,i=t.mediaStreamTrack;if(!(i instanceof MediaStreamTrack))throw new A("");var o={encoderConfig:{}};return r&&(o.encoderConfig.bitrateMax=r),n&&(o.encoderConfig.bitrateMin=n),new tr(i,o,w(5))},e.disableLogUpload=function(){m.UPLOAD_LOG=!1},e.enableLogUpload=function(){m.UPLOAD_LOG=!0},e.setLogLevel=function(e){S.setLogLevel(e,"ArRTC")},e.getCameras=function(){return r.getCamerasDevices()},e.getDevices=function(){return r.enumerateDevices()},e.getElectronScreenSources=function(){return new Promise((function(e,t){e([])}))},e.getMicrophones=function(){return r.getRecordingDevices()},e.checkSystemRequirements=function(){var e=window.RTCPeerConnection,t=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,r=window.WebSocket,n=e&&t&&r,i=!1,o=ee.getBrowserInfo();return"Chrome"===o.name&&58<=Number(o.version)&&o.os!==s.IOS&&(i=!0),"Firefox"===o.name&&56<=Number(o.version)&&(i=!0),"OPR"===o.name&&45<=Number(o.version)&&(i=!0),"Safari"===o.name&&11<=Number(o.version)&&(i=!0),"Edge"===o.name&&(i=!0),"MicroMessenger"!==ee.getBrowserInfo().name&&"QQBrowser"!==ee.getBrowserInfo().name||o.os===s.IOS||(i=!0),S.debug("checkSystemRequirements, api:",n,"browser",i),n&&i},e.createChannelMediaRelayConfiguration=function(){return""},e.getSupportedCodec=function(){return Wr(t,void 0,void 0,(function(){var t,r,n,i,o;return Hr(this,(function(a){switch(a.label){case 0:return e.checkSystemRequirements()?[3,1]:(t="Webrtc is not currently supported in browsers",S.error(t),[2,Promise.reject(t)]);case 1:return(r=new RTCPeerConnection({iceServers:[]})).addTransceiver("video"),r.addTransceiver("audio"),[4,r.createOffer()];case 2:return n=a.sent(),r.close(),i={video:[],audio:[]},(o=n.sdp).match(/ VP8/i)&&i.video.push("VP8"),o.match(/ H264/i)&&i.video.push("H264"),o.match(/ opus/i)&&i.audio.push("OPUS"),[2,i]}}))}))},e.AudioManager=Gt}(Ar||(Ar={}));t.default=Ar}]).default}));