!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ArRTC=t():e.ArRTC=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=134)}([function(e,t,r){var n=r(1),i=r(7),o=r(15),a=r(11),c=r(18),s=function(e,t,r){var u,f,l,d,p=e&s.F,h=e&s.G,v=e&s.S,m=e&s.P,b=e&s.B,y=h?n:v?n[t]||(n[t]={}):(n[t]||{}).prototype,g=h?i:i[t]||(i[t]={}),_=g.prototype||(g.prototype={});for(u in h&&(r=t),r)l=((f=!p&&y&&void 0!==y[u])?y:r)[u],d=b&&f?c(l,n):m&&"function"==typeof l?c(Function.call,l):l,y&&a(y,u,l,e&s.U),g[u]!=l&&o(g,u,d),m&&_[u]!=l&&(_[u]=l)};n.core=i,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){var n=r(4);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){var n=r(50)("wks"),i=r(30),o=r(1).Symbol,a="function"==typeof o;(e.exports=function(e){return n[e]||(n[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=n},function(e,t,r){var n=r(20),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t){var r=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=r)},function(e,t,r){e.exports=!r(2)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,r){var n=r(3),i=r(90),o=r(27),a=Object.defineProperty;t.f=r(8)?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(25);e.exports=function(e){return Object(n(e))}},function(e,t,r){var n=r(1),i=r(15),o=r(14),a=r(30)("src"),c=r(139),s=(""+c).split("toString");r(7).inspectSource=function(e){return c.call(e)},(e.exports=function(e,t,r,c){var u="function"==typeof r;u&&(o(r,"name")||i(r,"name",t)),e[t]!==r&&(u&&(o(r,a)||i(r,a,e[t]?""+e[t]:s.join(String(t)))),e===n?e[t]=r:c?e[t]?e[t]=r:i(e,t,r):(delete e[t],i(e,t,r)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||c.call(this)}))},function(e,t,r){var n=r(0),i=r(2),o=r(25),a=/"/g,c=function(e,t,r,n){var i=String(o(e)),c="<"+t;return""!==r&&(c+=" "+r+'="'+String(n).replace(a,"&quot;")+'"'),c+">"+i+"</"+t+">"};e.exports=function(e,t){var r={};r[e]=t(c),n(n.P+n.F*i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",r)}},function(e,t,r){"use strict";var n=r(123),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function a(e){return void 0===e}function c(e){return null!==e&&"object"==typeof e}function s(e){return"[object Function]"===i.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:s,isStream:function(e){return c(e)&&s(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:u,merge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]=r}for(var n=0,i=arguments.length;n<i;n++)u(arguments[n],r);return t},deepMerge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]="object"==typeof r?e({},r):r}for(var n=0,i=arguments.length;n<i;n++)u(arguments[n],r);return t},extend:function(e,t,r){return u(t,(function(t,i){e[i]=r&&"function"==typeof t?n(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(9),i=r(29);e.exports=r(8)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(46),i=r(25);e.exports=function(e){return n(i(e))}},function(e,t,r){"use strict";var n=r(2);e.exports=function(e,t){return!!e&&n((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,r){var n=r(19);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(47),i=r(29),o=r(16),a=r(27),c=r(14),s=r(90),u=Object.getOwnPropertyDescriptor;t.f=r(8)?u:function(e,t){if(e=o(e),t=a(t,!0),s)try{return u(e,t)}catch(e){}if(c(e,t))return i(!n.f.call(e,t),e[t])}},function(e,t,r){var n=r(0),i=r(7),o=r(2);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*o((function(){r(1)})),"Object",a)}},function(e,t,r){var n=r(18),i=r(46),o=r(10),a=r(6),c=r(106);e.exports=function(e,t){var r=1==e,s=2==e,u=3==e,f=4==e,l=6==e,d=5==e||l,p=t||c;return function(t,c,h){for(var v,m,b=o(t),y=i(b),g=n(c,h,3),_=a(y.length),S=0,E=r?p(t,_):s?p(t,0):void 0;_>S;S++)if((d||S in y)&&(m=g(v=y[S],S,b),e))if(r)E[S]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return S;case 2:E.push(v)}else if(f)return!1;return l?-1:u||f?f:E}}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){"use strict";if(r(8)){var n=r(31),i=r(1),o=r(2),a=r(0),c=r(61),s=r(86),u=r(18),f=r(43),l=r(29),d=r(15),p=r(44),h=r(20),v=r(6),m=r(117),b=r(33),y=r(27),g=r(14),_=r(48),S=r(4),E=r(10),T=r(78),w=r(34),O=r(36),C=r(35).f,P=r(80),R=r(30),I=r(5),N=r(23),A=r(51),k=r(49),D=r(82),x=r(41),j=r(54),M=r(42),L=r(81),U=r(108),F=r(9),V=r(21),G=F.f,B=V.f,W=i.RangeError,H=i.TypeError,Y=i.Uint8Array,K=Array.prototype,z=s.ArrayBuffer,J=s.DataView,X=N(0),q=N(2),$=N(3),Q=N(4),Z=N(5),ee=N(6),te=A(!0),re=A(!1),ne=D.values,ie=D.keys,oe=D.entries,ae=K.lastIndexOf,ce=K.reduce,se=K.reduceRight,ue=K.join,fe=K.sort,le=K.slice,de=K.toString,pe=K.toLocaleString,he=I("iterator"),ve=I("toStringTag"),me=R("typed_constructor"),be=R("def_constructor"),ye=c.CONSTR,ge=c.TYPED,_e=c.VIEW,Se=N(1,(function(e,t){return Ce(k(e,e[be]),t)})),Ee=o((function(){return 1===new Y(new Uint16Array([1]).buffer)[0]})),Te=!!Y&&!!Y.prototype.set&&o((function(){new Y(1).set({})})),we=function(e,t){var r=h(e);if(r<0||r%t)throw W("Wrong offset!");return r},Oe=function(e){if(S(e)&&ge in e)return e;throw H(e+" is not a typed array!")},Ce=function(e,t){if(!S(e)||!(me in e))throw H("It is not a typed array constructor!");return new e(t)},Pe=function(e,t){return Re(k(e,e[be]),t)},Re=function(e,t){for(var r=0,n=t.length,i=Ce(e,n);n>r;)i[r]=t[r++];return i},Ie=function(e,t,r){G(e,t,{get:function(){return this._d[r]}})},Ne=function(e){var t,r,n,i,o,a,c=E(e),s=arguments.length,f=s>1?arguments[1]:void 0,l=void 0!==f,d=P(c);if(null!=d&&!T(d)){for(a=d.call(c),n=[],t=0;!(o=a.next()).done;t++)n.push(o.value);c=n}for(l&&s>2&&(f=u(f,arguments[2],2)),t=0,r=v(c.length),i=Ce(this,r);r>t;t++)i[t]=l?f(c[t],t):c[t];return i},Ae=function(){for(var e=0,t=arguments.length,r=Ce(this,t);t>e;)r[e]=arguments[e++];return r},ke=!!Y&&o((function(){pe.call(new Y(1))})),De=function(){return pe.apply(ke?le.call(Oe(this)):Oe(this),arguments)},xe={copyWithin:function(e,t){return U.call(Oe(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return Q(Oe(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return L.apply(Oe(this),arguments)},filter:function(e){return Pe(this,q(Oe(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return Z(Oe(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Oe(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){X(Oe(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return re(Oe(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Oe(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ue.apply(Oe(this),arguments)},lastIndexOf:function(e){return ae.apply(Oe(this),arguments)},map:function(e){return Se(Oe(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return ce.apply(Oe(this),arguments)},reduceRight:function(e){return se.apply(Oe(this),arguments)},reverse:function(){for(var e,t=Oe(this).length,r=Math.floor(t/2),n=0;n<r;)e=this[n],this[n++]=this[--t],this[t]=e;return this},some:function(e){return $(Oe(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return fe.call(Oe(this),e)},subarray:function(e,t){var r=Oe(this),n=r.length,i=b(e,n);return new(k(r,r[be]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,v((void 0===t?n:b(t,n))-i))}},je=function(e,t){return Pe(this,le.call(Oe(this),e,t))},Me=function(e){Oe(this);var t=we(arguments[1],1),r=this.length,n=E(e),i=v(n.length),o=0;if(i+t>r)throw W("Wrong length!");for(;o<i;)this[t+o]=n[o++]},Le={entries:function(){return oe.call(Oe(this))},keys:function(){return ie.call(Oe(this))},values:function(){return ne.call(Oe(this))}},Ue=function(e,t){return S(e)&&e[ge]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Fe=function(e,t){return Ue(e,t=y(t,!0))?l(2,e[t]):B(e,t)},Ve=function(e,t,r){return!(Ue(e,t=y(t,!0))&&S(r)&&g(r,"value"))||g(r,"get")||g(r,"set")||r.configurable||g(r,"writable")&&!r.writable||g(r,"enumerable")&&!r.enumerable?G(e,t,r):(e[t]=r.value,e)};ye||(V.f=Fe,F.f=Ve),a(a.S+a.F*!ye,"Object",{getOwnPropertyDescriptor:Fe,defineProperty:Ve}),o((function(){de.call({})}))&&(de=pe=function(){return ue.call(this)});var Ge=p({},xe);p(Ge,Le),d(Ge,he,Le.values),p(Ge,{slice:je,set:Me,constructor:function(){},toString:de,toLocaleString:De}),Ie(Ge,"buffer","b"),Ie(Ge,"byteOffset","o"),Ie(Ge,"byteLength","l"),Ie(Ge,"length","e"),G(Ge,ve,{get:function(){return this[ge]}}),e.exports=function(e,t,r,s){var u=e+((s=!!s)?"Clamped":"")+"Array",l="get"+e,p="set"+e,h=i[u],b=h||{},y=h&&O(h),g=!h||!c.ABV,E={},T=h&&h.prototype,P=function(e,r){G(e,r,{get:function(){return function(e,r){var n=e._d;return n.v[l](r*t+n.o,Ee)}(this,r)},set:function(e){return function(e,r,n){var i=e._d;s&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),i.v[p](r*t+i.o,n,Ee)}(this,r,e)},enumerable:!0})};g?(h=r((function(e,r,n,i){f(e,h,u,"_d");var o,a,c,s,l=0,p=0;if(S(r)){if(!(r instanceof z||"ArrayBuffer"==(s=_(r))||"SharedArrayBuffer"==s))return ge in r?Re(h,r):Ne.call(h,r);o=r,p=we(n,t);var b=r.byteLength;if(void 0===i){if(b%t)throw W("Wrong length!");if((a=b-p)<0)throw W("Wrong length!")}else if((a=v(i)*t)+p>b)throw W("Wrong length!");c=a/t}else c=m(r),o=new z(a=c*t);for(d(e,"_d",{b:o,o:p,l:a,e:c,v:new J(o)});l<c;)P(e,l++)})),T=h.prototype=w(Ge),d(T,"constructor",h)):o((function(){h(1)}))&&o((function(){new h(-1)}))&&j((function(e){new h,new h(null),new h(1.5),new h(e)}),!0)||(h=r((function(e,r,n,i){var o;return f(e,h,u),S(r)?r instanceof z||"ArrayBuffer"==(o=_(r))||"SharedArrayBuffer"==o?void 0!==i?new b(r,we(n,t),i):void 0!==n?new b(r,we(n,t)):new b(r):ge in r?Re(h,r):Ne.call(h,r):new b(m(r))})),X(y!==Function.prototype?C(b).concat(C(y)):C(b),(function(e){e in h||d(h,e,b[e])})),h.prototype=T,n||(T.constructor=h));var R=T[he],I=!!R&&("values"==R.name||null==R.name),N=Le.values;d(h,me,!0),d(T,ge,u),d(T,_e,!0),d(T,be,h),(s?new h(1)[ve]==u:ve in T)||G(T,ve,{get:function(){return u}}),E[u]=h,a(a.G+a.W+a.F*(h!=b),E),a(a.S,u,{BYTES_PER_ELEMENT:t}),a(a.S+a.F*o((function(){b.of.call(h,1)})),u,{from:Ne,of:Ae}),"BYTES_PER_ELEMENT"in T||d(T,"BYTES_PER_ELEMENT",t),a(a.P,u,xe),M(u),a(a.P+a.F*Te,u,{set:Me}),a(a.P+a.F*!I,u,Le),n||T.toString==de||(T.toString=de),a(a.P+a.F*o((function(){new h(1).slice()})),u,{slice:je}),a(a.P+a.F*(o((function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()}))||!o((function(){T.toLocaleString.call([1,2])}))),u,{toLocaleString:De}),x[u]=I?R:N,n||I||d(T,he,N)}}else e.exports=function(){}},function(e,t,r){var n=r(4);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var n=r(30)("meta"),i=r(4),o=r(14),a=r(9).f,c=0,s=Object.isExtensible||function(){return!0},u=!r(2)((function(){return s(Object.preventExtensions({}))})),f=function(e){a(e,n,{value:{i:"O"+ ++c,w:{}}})},l=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!s(e))return"F";if(!t)return"E";f(e)}return e[n].i},getWeak:function(e,t){if(!o(e,n)){if(!s(e))return!0;if(!t)return!1;f(e)}return e[n].w},onFreeze:function(e){return u&&l.NEED&&s(e)&&!o(e,n)&&f(e),e}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t){e.exports=!1},function(e,t,r){var n=r(92),i=r(65);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){var n=r(20),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=n(e))<0?i(e+t,0):o(e,t)}},function(e,t,r){var n=r(3),i=r(93),o=r(65),a=r(64)("IE_PROTO"),c=function(){},s=function(){var e,t=r(62)("iframe"),n=o.length;for(t.style.display="none",r(66).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),s=e.F;n--;)delete s.prototype[o[n]];return s()};e.exports=Object.create||function(e,t){var r;return null!==e?(c.prototype=n(e),r=new c,c.prototype=null,r[a]=e):r=s(),void 0===t?r:i(r,t)}},function(e,t,r){var n=r(92),i=r(65).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){var n=r(14),i=r(10),o=r(64)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,r){var n=r(5)("unscopables"),i=Array.prototype;null==i[n]&&r(15)(i,n,{}),e.exports=function(e){i[n][e]=!0}},function(e,t,r){var n=r(4);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,r){var n=r(9).f,i=r(14),o=r(5)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},function(e,t,r){var n=r(0),i=r(25),o=r(2),a=r(68),c="["+a+"]",s=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),f=function(e,t,r){var i={},c=o((function(){return!!a[e]()||"​"!="​"[e]()})),s=i[e]=c?t(l):a[e];r&&(i[r]=s),n(n.P+n.F*c,"String",i)},l=f.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(s,"")),2&t&&(e=e.replace(u,"")),e};e.exports=f},function(e,t){e.exports={}},function(e,t,r){"use strict";var n=r(1),i=r(9),o=r(8),a=r(5)("species");e.exports=function(e){var t=n[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(11);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},function(e,t,r){"use strict";var n={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},n.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},n.getDescription=function(e){var t=n.splitSections(e);return t&&t[0]},n.getMediaSections=function(e){var t=n.splitSections(e);return t.shift(),t},n.matchPrefix=function(e,t){return n.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},n.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":r.relatedAddress=t[n+1];break;case"rport":r.relatedPort=parseInt(t[n+1],10);break;case"tcptype":r.tcpType=t[n+1];break;case"ufrag":r.ufrag=t[n+1],r.usernameFragment=t[n+1];break;default:r[t[n]]=t[n+1]}return r},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},n.parseIceOptions=function(e){return e.substr(14).split(" ")},n.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},n.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n"},n.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},n.parseFmtp=function(e){for(var t,r={},n=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<n.length;i++)r[(t=n[i].trim().split("="))[0].trim()]=t[1];return r},n.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t)})),t+="a=fmtp:"+r+" "+n.join(";")+"\r\n"}return t},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},n.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(r.attribute=e.substr(t+1,n-t-1),r.value=e.substr(n+1)):r.attribute=e.substr(t+1),r},n.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},n.getMid=function(e){var t=n.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},n.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},n.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:n.matchPrefix(e+t,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),r},n.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},n.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?n.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},n.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},n.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},n.getCryptoParameters=function(e,t){return n.matchPrefix(e+t,"a=crypto:").map(n.parseCryptoLine)},n.getIceParameters=function(e,t){var r=n.matchPrefix(e+t,"a=ice-ufrag:")[0],i=n.matchPrefix(e+t,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substr(12),password:i.substr(10)}:null},n.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=n.splitLines(e)[0].split(" "),i=3;i<r.length;i++){var o=r[i],a=n.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var c=n.parseRtpMap(a),s=n.matchPrefix(e,"a=fmtp:"+o+" ");switch(c.parameters=s.length?n.parseFmtp(s[0]):{},c.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(n.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase())}}}return n.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(n.parseExtmap(e))})),t},n.writeRtpDescription=function(e,t){var r="";r+="m="+e+" ",r+=t.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){r+=n.writeRtpMap(e),r+=n.writeFmtp(e),r+=n.writeRtcpFb(e)}));var i=0;return t.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),r+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){r+=n.writeExtmap(e)})),r},n.parseRtpEncodingParameters=function(e){var t,r=[],i=n.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),c=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),s=c.length>0&&c[0].ssrc,u=n.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===s&&(t=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)};s&&t&&(n.rtx={ssrc:t}),r.push(n),o&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:s,mechanism:a?"red+ulpfec":"red"},r.push(n))}})),0===r.length&&s&&r.push({ssrc:s});var f=n.matchPrefix(e,"b=");return f.length&&(f=0===f[0].indexOf("b=TIAS:")?parseInt(f[0].substr(7),10):0===f[0].indexOf("b=AS:")?1e3*parseInt(f[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=f}))),r},n.parseRtcpParameters=function(e){var t={},r=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(t.cname=r.value,t.ssrc=r.ssrc);var i=n.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=n.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},n.parseMsid=function(e){var t,r=n.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(t=r[0].substr(7).split(" "))[0],track:t[1]};var i=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},n.parseSctpDescription=function(e){var t,r=n.parseMLine(e),i=n.matchPrefix(e,"a=max-message-size:");i.length>0&&(t=parseInt(i[0].substr(19),10)),isNaN(t)&&(t=65536);var o=n.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:r.fmt,maxMessageSize:t};if(n.matchPrefix(e,"a=sctpmap:").length>0){var a=n.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:t}}},n.writeSctpDescription=function(e,t){var r=[];return r="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&r.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),r.join("")},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(e,t,r){var i=void 0!==t?t:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||n.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(e,t,r,i){var o=n.writeRtpDescription(e.kind,t);if(o+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),o},n.getDirection=function(e,t){for(var r=n.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return t?n.getDirection(t):"sendrecv"},n.getKind=function(e){return n.splitLines(e)[0].split(" ")[0].substr(2)},n.isRejected=function(e){return"0"===e.split(" ",2)[1]},n.parseMLine=function(e){var t=n.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},n.parseOLine=function(e){var t=n.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},n.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=n.splitLines(e),r=0;r<t.length;r++)if(t[r].length<2||"="!==t[r].charAt(1))return!1;return!0},e.exports=n},function(e,t,r){var n=r(24);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){var n=r(24),i=r(5)("toStringTag"),o="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:o?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,r){var n=r(3),i=r(19),o=r(5)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||null==(r=n(a)[o])?t:i(r)}},function(e,t,r){var n=r(7),i=r(1),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(31)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,r){var n=r(16),i=r(6),o=r(33);e.exports=function(e){return function(t,r,a){var c,s=n(t),u=i(s.length),f=o(a,u);if(e&&r!=r){for(;u>f;)if((c=s[f++])!=c)return!0}else for(;u>f;f++)if((e||f in s)&&s[f]===r)return e||f||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(24);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(5)("iterator"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o=[7],a=o[n]();a.next=function(){return{done:r=!0}},o[n]=function(){return a},e(o)}catch(e){}return r}},function(e,t,r){"use strict";var n=r(3);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,r){"use strict";var n=r(48),i=RegExp.prototype.exec;e.exports=function(e,t){var r=e.exec;if("function"==typeof r){var o=r.call(e,t);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,r){"use strict";r(110);var n=r(11),i=r(15),o=r(2),a=r(25),c=r(5),s=r(83),u=c("species"),f=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();e.exports=function(e,t,r){var d=c(e),p=!o((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),h=p?!o((function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[u]=function(){return r}),r[d](""),!t})):void 0;if(!p||!h||"replace"===e&&!f||"split"===e&&!l){var v=/./[d],m=r(a,d,""[e],(function(e,t,r,n,i){return t.exec===s?p&&!i?{done:!0,value:v.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}})),b=m[0],y=m[1];n(String.prototype,e,b),i(RegExp.prototype,d,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}}},function(e,t,r){var n=r(18),i=r(105),o=r(78),a=r(3),c=r(6),s=r(80),u={},f={};(t=e.exports=function(e,t,r,l,d){var p,h,v,m,b=d?function(){return e}:s(e),y=n(r,l,t?2:1),g=0;if("function"!=typeof b)throw TypeError(e+" is not iterable!");if(o(b)){for(p=c(e.length);p>g;g++)if((m=t?y(a(h=e[g])[0],h[1]):y(e[g]))===u||m===f)return m}else for(v=b.call(e);!(h=v.next()).done;)if((m=i(v,y,h.value,t))===u||m===f)return m}).BREAK=u,t.RETURN=f},function(e,t,r){var n=r(1).navigator;e.exports=n&&n.userAgent||""},function(e,t,r){"use strict";var n=r(1),i=r(0),o=r(11),a=r(44),c=r(28),s=r(58),u=r(43),f=r(4),l=r(2),d=r(54),p=r(39),h=r(69);e.exports=function(e,t,r,v,m,b){var y=n[e],g=y,_=m?"set":"add",S=g&&g.prototype,E={},T=function(e){var t=S[e];o(S,e,"delete"==e||"has"==e?function(e){return!(b&&!f(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return b&&!f(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof g&&(b||S.forEach&&!l((function(){(new g).entries().next()})))){var w=new g,O=w[_](b?{}:-0,1)!=w,C=l((function(){w.has(1)})),P=d((function(e){new g(e)})),R=!b&&l((function(){for(var e=new g,t=5;t--;)e[_](t,t);return!e.has(-0)}));P||((g=t((function(t,r){u(t,g,e);var n=h(new y,t,g);return null!=r&&s(r,m,n[_],n),n}))).prototype=S,S.constructor=g),(C||R)&&(T("delete"),T("has"),m&&T("get")),(R||O)&&T(_),b&&S.clear&&delete S.clear}else g=v.getConstructor(t,e,m,_),a(g.prototype,r),c.NEED=!0;return p(g,e),E[e]=g,i(i.G+i.W+i.F*(g!=y),E),b||v.setStrong(g,e,m),g}},function(e,t,r){for(var n,i=r(1),o=r(15),a=r(30),c=a("typed_array"),s=a("view"),u=!(!i.ArrayBuffer||!i.DataView),f=u,l=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(n=i[d[l++]])?(o(n.prototype,c,!0),o(n.prototype,s,!0)):f=!1;e.exports={ABV:u,CONSTR:f,TYPED:c,VIEW:s}},function(e,t,r){var n=r(4),i=r(1).document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,r){t.f=r(5)},function(e,t,r){var n=r(50)("keys"),i=r(30);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(1).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(4),i=r(3),o=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=r(18)(Function.call,r(21).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return o(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:o}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,r){var n=r(4),i=r(67).set;e.exports=function(e,t,r){var o,a=t.constructor;return a!==r&&"function"==typeof a&&(o=a.prototype)!==r.prototype&&n(o)&&i&&i(e,o),e}},function(e,t,r){"use strict";var n=r(20),i=r(25);e.exports=function(e){var t=String(i(this)),r="",o=n(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(r+=t);return r}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var r=Math.expm1;e.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:r},function(e,t,r){var n=r(20),i=r(25);e.exports=function(e){return function(t,r){var o,a,c=String(i(t)),s=n(r),u=c.length;return s<0||s>=u?e?"":void 0:(o=c.charCodeAt(s))<55296||o>56319||s+1===u||(a=c.charCodeAt(s+1))<56320||a>57343?e?c.charAt(s):o:e?c.slice(s,s+2):a-56320+(o-55296<<10)+65536}}},function(e,t,r){"use strict";var n=r(31),i=r(0),o=r(11),a=r(15),c=r(41),s=r(104),u=r(39),f=r(36),l=r(5)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,r,h,v,m,b){s(r,t,h);var y,g,_,S=function(e){if(!d&&e in O)return O[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},E=t+" Iterator",T="values"==v,w=!1,O=e.prototype,C=O[l]||O["@@iterator"]||v&&O[v],P=C||S(v),R=v?T?S("entries"):P:void 0,I="Array"==t&&O.entries||C;if(I&&(_=f(I.call(new e)))!==Object.prototype&&_.next&&(u(_,E,!0),n||"function"==typeof _[l]||a(_,l,p)),T&&C&&"values"!==C.name&&(w=!0,P=function(){return C.call(this)}),n&&!b||!d&&!w&&O[l]||a(O,l,P),c[t]=P,c[E]=p,v)if(y={values:T?P:S("values"),keys:m?P:S("keys"),entries:R},b)for(g in y)g in O||o(O,g,y[g]);else i(i.P+i.F*(d||w),t,y);return y}},function(e,t,r){var n=r(76),i=r(25);e.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(e))}},function(e,t,r){var n=r(4),i=r(24),o=r(5)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,r){var n=r(5)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,r){var n=r(41),i=r(5)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[i]===e)}},function(e,t,r){"use strict";var n=r(9),i=r(29);e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},function(e,t,r){var n=r(48),i=r(5)("iterator"),o=r(41);e.exports=r(7).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[n(e)]}},function(e,t,r){"use strict";var n=r(10),i=r(33),o=r(6);e.exports=function(e){for(var t=n(this),r=o(t.length),a=arguments.length,c=i(a>1?arguments[1]:void 0,r),s=a>2?arguments[2]:void 0,u=void 0===s?r:i(s,r);u>c;)t[c++]=e;return t}},function(e,t,r){"use strict";var n=r(37),i=r(109),o=r(41),a=r(16);e.exports=r(74)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(e,t,r){"use strict";var n,i,o=r(55),a=RegExp.prototype.exec,c=String.prototype.replace,s=a,u=(n=/a/,i=/b*/g,a.call(n,"a"),a.call(i,"a"),0!==n.lastIndex||0!==i.lastIndex),f=void 0!==/()??/.exec("")[1];(u||f)&&(s=function(e){var t,r,n,i,s=this;return f&&(r=new RegExp("^"+s.source+"$(?!\\s)",o.call(s))),u&&(t=s.lastIndex),n=a.call(s,e),u&&n&&(s.lastIndex=s.global?n.index+n[0].length:t),f&&n&&n.length>1&&c.call(n[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)})),n}),e.exports=s},function(e,t,r){"use strict";var n=r(73)(!0);e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},function(e,t,r){var n,i,o,a=r(18),c=r(98),s=r(66),u=r(62),f=r(1),l=f.process,d=f.setImmediate,p=f.clearImmediate,h=f.MessageChannel,v=f.Dispatch,m=0,b={},y=function(){var e=+this;if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},g=function(e){y.call(e.data)};d&&p||(d=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return b[++m]=function(){c("function"==typeof e?e:Function(e),t)},n(m),m},p=function(e){delete b[e]},"process"==r(24)(l)?n=function(e){l.nextTick(a(y,e,1))}:v&&v.now?n=function(e){v.now(a(y,e,1))}:h?(o=(i=new h).port2,i.port1.onmessage=g,n=a(o.postMessage,o,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(n=function(e){f.postMessage(e+"","*")},f.addEventListener("message",g,!1)):n="onreadystatechange"in u("script")?function(e){s.appendChild(u("script")).onreadystatechange=function(){s.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:d,clear:p}},function(e,t,r){"use strict";var n=r(1),i=r(8),o=r(31),a=r(61),c=r(15),s=r(44),u=r(2),f=r(43),l=r(20),d=r(6),p=r(117),h=r(35).f,v=r(9).f,m=r(81),b=r(39),y=n.ArrayBuffer,g=n.DataView,_=n.Math,S=n.RangeError,E=n.Infinity,T=y,w=_.abs,O=_.pow,C=_.floor,P=_.log,R=_.LN2,I=i?"_b":"buffer",N=i?"_l":"byteLength",A=i?"_o":"byteOffset";function k(e,t,r){var n,i,o,a=new Array(r),c=8*r-t-1,s=(1<<c)-1,u=s>>1,f=23===t?O(2,-24)-O(2,-77):0,l=0,d=e<0||0===e&&1/e<0?1:0;for((e=w(e))!=e||e===E?(i=e!=e?1:0,n=s):(n=C(P(e)/R),e*(o=O(2,-n))<1&&(n--,o*=2),(e+=n+u>=1?f/o:f*O(2,1-u))*o>=2&&(n++,o/=2),n+u>=s?(i=0,n=s):n+u>=1?(i=(e*o-1)*O(2,t),n+=u):(i=e*O(2,u-1)*O(2,t),n=0));t>=8;a[l++]=255&i,i/=256,t-=8);for(n=n<<t|i,c+=t;c>0;a[l++]=255&n,n/=256,c-=8);return a[--l]|=128*d,a}function D(e,t,r){var n,i=8*r-t-1,o=(1<<i)-1,a=o>>1,c=i-7,s=r-1,u=e[s--],f=127&u;for(u>>=7;c>0;f=256*f+e[s],s--,c-=8);for(n=f&(1<<-c)-1,f>>=-c,c+=t;c>0;n=256*n+e[s],s--,c-=8);if(0===f)f=1-a;else{if(f===o)return n?NaN:u?-E:E;n+=O(2,t),f-=a}return(u?-1:1)*n*O(2,f-t)}function x(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function j(e){return[255&e]}function M(e){return[255&e,e>>8&255]}function L(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function U(e){return k(e,52,8)}function F(e){return k(e,23,4)}function V(e,t,r){v(e.prototype,t,{get:function(){return this[r]}})}function G(e,t,r,n){var i=p(+r);if(i+t>e[N])throw S("Wrong index!");var o=e[I]._b,a=i+e[A],c=o.slice(a,a+t);return n?c:c.reverse()}function B(e,t,r,n,i,o){var a=p(+r);if(a+t>e[N])throw S("Wrong index!");for(var c=e[I]._b,s=a+e[A],u=n(+i),f=0;f<t;f++)c[s+f]=u[o?f:t-f-1]}if(a.ABV){if(!u((function(){y(1)}))||!u((function(){new y(-1)}))||u((function(){return new y,new y(1.5),new y(NaN),"ArrayBuffer"!=y.name}))){for(var W,H=(y=function(e){return f(this,y),new T(p(e))}).prototype=T.prototype,Y=h(T),K=0;Y.length>K;)(W=Y[K++])in y||c(y,W,T[W]);o||(H.constructor=y)}var z=new g(new y(2)),J=g.prototype.setInt8;z.setInt8(0,2147483648),z.setInt8(1,2147483649),!z.getInt8(0)&&z.getInt8(1)||s(g.prototype,{setInt8:function(e,t){J.call(this,e,t<<24>>24)},setUint8:function(e,t){J.call(this,e,t<<24>>24)}},!0)}else y=function(e){f(this,y,"ArrayBuffer");var t=p(e);this._b=m.call(new Array(t),0),this[N]=t},g=function(e,t,r){f(this,g,"DataView"),f(e,y,"DataView");var n=e[N],i=l(t);if(i<0||i>n)throw S("Wrong offset!");if(i+(r=void 0===r?n-i:d(r))>n)throw S("Wrong length!");this[I]=e,this[A]=i,this[N]=r},i&&(V(y,"byteLength","_l"),V(g,"buffer","_b"),V(g,"byteLength","_l"),V(g,"byteOffset","_o")),s(g.prototype,{getInt8:function(e){return G(this,1,e)[0]<<24>>24},getUint8:function(e){return G(this,1,e)[0]},getInt16:function(e){var t=G(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=G(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return x(G(this,4,e,arguments[1]))},getUint32:function(e){return x(G(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return D(G(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return D(G(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){B(this,1,e,j,t)},setUint8:function(e,t){B(this,1,e,j,t)},setInt16:function(e,t){B(this,2,e,M,t,arguments[2])},setUint16:function(e,t){B(this,2,e,M,t,arguments[2])},setInt32:function(e,t){B(this,4,e,L,t,arguments[2])},setUint32:function(e,t){B(this,4,e,L,t,arguments[2])},setFloat32:function(e,t){B(this,4,e,F,t,arguments[2])},setFloat64:function(e,t){B(this,8,e,U,t,arguments[2])}});b(y,"ArrayBuffer"),b(g,"DataView"),c(g.prototype,a.VIEW,!0),t.ArrayBuffer=y,t.DataView=g},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){e.exports=!r(122)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,r){e.exports=!r(8)&&!r(2)((function(){return 7!=Object.defineProperty(r(62)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,r){var n=r(1),i=r(7),o=r(31),a=r(63),c=r(9).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||c(t,e,{value:a.f(e)})}},function(e,t,r){var n=r(14),i=r(16),o=r(51)(!1),a=r(64)("IE_PROTO");e.exports=function(e,t){var r,c=i(e),s=0,u=[];for(r in c)r!=a&&n(c,r)&&u.push(r);for(;t.length>s;)n(c,r=t[s++])&&(~o(u,r)||u.push(r));return u}},function(e,t,r){var n=r(9),i=r(3),o=r(32);e.exports=r(8)?Object.defineProperties:function(e,t){i(e);for(var r,a=o(t),c=a.length,s=0;c>s;)n.f(e,r=a[s++],t[r]);return e}},function(e,t,r){var n=r(16),i=r(35).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(n(e))}},function(e,t,r){"use strict";var n=r(8),i=r(32),o=r(52),a=r(47),c=r(10),s=r(46),u=Object.assign;e.exports=!u||r(2)((function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach((function(e){t[e]=e})),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n}))?function(e,t){for(var r=c(e),u=arguments.length,f=1,l=o.f,d=a.f;u>f;)for(var p,h=s(arguments[f++]),v=l?i(h).concat(l(h)):i(h),m=v.length,b=0;m>b;)p=v[b++],n&&!d.call(h,p)||(r[p]=h[p]);return r}:u},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,r){"use strict";var n=r(19),i=r(4),o=r(98),a=[].slice,c={},s=function(e,t,r){if(!(t in c)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";c[t]=Function("F,a","return new F("+n.join(",")+")")}return c[t](e,r)};e.exports=Function.bind||function(e){var t=n(this),r=a.call(arguments,1),c=function(){var n=r.concat(a.call(arguments));return this instanceof c?s(t,n.length,n):o(t,n,e)};return i(t.prototype)&&(c.prototype=t.prototype),c}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(1).parseInt,i=r(40).trim,o=r(68),a=/^[-+]?0[xX]/;e.exports=8!==n(o+"08")||22!==n(o+"0x16")?function(e,t){var r=i(String(e),3);return n(r,t>>>0||(a.test(r)?16:10))}:n},function(e,t,r){var n=r(1).parseFloat,i=r(40).trim;e.exports=1/n(r(68)+"-0")!=-1/0?function(e){var t=i(String(e),3),r=n(t);return 0===r&&"-"==t.charAt(0)?-0:r}:n},function(e,t,r){var n=r(24);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=n(e))throw TypeError(t);return+e}},function(e,t,r){var n=r(4),i=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&i(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,r){"use strict";var n=r(34),i=r(29),o=r(39),a={};r(15)(a,r(5)("iterator"),(function(){return this})),e.exports=function(e,t,r){e.prototype=n(a,{next:i(1,r)}),o(e,t+" Iterator")}},function(e,t,r){var n=r(3);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},function(e,t,r){var n=r(229);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,r){var n=r(19),i=r(10),o=r(46),a=r(6);e.exports=function(e,t,r,c,s){n(t);var u=i(e),f=o(u),l=a(u.length),d=s?l-1:0,p=s?-1:1;if(r<2)for(;;){if(d in f){c=f[d],d+=p;break}if(d+=p,s?d<0:l<=d)throw TypeError("Reduce of empty array with no initial value")}for(;s?d>=0:l>d;d+=p)d in f&&(c=t(c,f[d],d,u));return c}},function(e,t,r){"use strict";var n=r(10),i=r(33),o=r(6);e.exports=[].copyWithin||function(e,t){var r=n(this),a=o(r.length),c=i(e,a),s=i(t,a),u=arguments.length>2?arguments[2]:void 0,f=Math.min((void 0===u?a:i(u,a))-s,a-c),l=1;for(s<c&&c<s+f&&(l=-1,s+=f-1,c+=f-1);f-- >0;)s in r?r[c]=r[s]:delete r[c],c+=l,s+=l;return r}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){"use strict";var n=r(83);r(0)({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},function(e,t,r){r(8)&&"g"!=/./g.flags&&r(9).f(RegExp.prototype,"flags",{configurable:!0,get:r(55)})},function(e,t,r){"use strict";var n,i,o,a,c=r(31),s=r(1),u=r(18),f=r(48),l=r(0),d=r(4),p=r(19),h=r(43),v=r(58),m=r(49),b=r(85).set,y=r(249)(),g=r(113),_=r(250),S=r(59),E=r(114),T=s.TypeError,w=s.process,O=w&&w.versions,C=O&&O.v8||"",P=s.Promise,R="process"==f(w),I=function(){},N=i=g.f,A=!!function(){try{var e=P.resolve(1),t=(e.constructor={})[r(5)("species")]=function(e){e(I,I)};return(R||"function"==typeof PromiseRejectionEvent)&&e.then(I)instanceof t&&0!==C.indexOf("6.6")&&-1===S.indexOf("Chrome/66")}catch(e){}}(),k=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},D=function(e,t){if(!e._n){e._n=!0;var r=e._c;y((function(){for(var n=e._v,i=1==e._s,o=0,a=function(t){var r,o,a,c=i?t.ok:t.fail,s=t.resolve,u=t.reject,f=t.domain;try{c?(i||(2==e._h&&M(e),e._h=1),!0===c?r=n:(f&&f.enter(),r=c(n),f&&(f.exit(),a=!0)),r===t.promise?u(T("Promise-chain cycle")):(o=k(r))?o.call(r,s,u):s(r)):u(n)}catch(e){f&&!a&&f.exit(),u(e)}};r.length>o;)a(r[o++]);e._c=[],e._n=!1,t&&!e._h&&x(e)}))}},x=function(e){b.call(s,(function(){var t,r,n,i=e._v,o=j(e);if(o&&(t=_((function(){R?w.emit("unhandledRejection",i,e):(r=s.onunhandledrejection)?r({promise:e,reason:i}):(n=s.console)&&n.error&&n.error("Unhandled promise rejection",i)})),e._h=R||j(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},j=function(e){return 1!==e._h&&0===(e._a||e._c).length},M=function(e){b.call(s,(function(){var t;R?w.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})}))},L=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},U=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw T("Promise can't be resolved itself");(t=k(e))?y((function(){var n={_w:r,_d:!1};try{t.call(e,u(U,n,1),u(L,n,1))}catch(e){L.call(n,e)}})):(r._v=e,r._s=1,D(r,!1))}catch(e){L.call({_w:r,_d:!1},e)}}};A||(P=function(e){h(this,P,"Promise","_h"),p(e),n.call(this);try{e(u(U,this,1),u(L,this,1))}catch(e){L.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(44)(P.prototype,{then:function(e,t){var r=N(m(this,P));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=R?w.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&D(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new n;this.promise=e,this.resolve=u(U,e,1),this.reject=u(L,e,1)},g.f=N=function(e){return e===P||e===a?new o(e):i(e)}),l(l.G+l.W+l.F*!A,{Promise:P}),r(39)(P,"Promise"),r(42)("Promise"),a=r(7).Promise,l(l.S+l.F*!A,"Promise",{reject:function(e){var t=N(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(c||!A),"Promise",{resolve:function(e){return E(c&&this===a?P:this,e)}}),l(l.S+l.F*!(A&&r(54)((function(e){P.all(e).catch(I)}))),"Promise",{all:function(e){var t=this,r=N(t),n=r.resolve,i=r.reject,o=_((function(){var r=[],o=0,a=1;v(e,!1,(function(e){var c=o++,s=!1;r.push(void 0),a++,t.resolve(e).then((function(e){s||(s=!0,r[c]=e,--a||n(r))}),i)})),--a||n(r)}));return o.e&&i(o.v),r.promise},race:function(e){var t=this,r=N(t),n=r.reject,i=_((function(){v(e,!1,(function(e){t.resolve(e).then(r.resolve,n)}))}));return i.e&&n(i.v),r.promise}})},function(e,t,r){"use strict";var n=r(19);function i(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)}e.exports.f=function(e){return new i(e)}},function(e,t,r){var n=r(3),i=r(4),o=r(113);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=o.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){"use strict";var n=r(9).f,i=r(34),o=r(44),a=r(18),c=r(43),s=r(58),u=r(74),f=r(109),l=r(42),d=r(8),p=r(28).fastKey,h=r(38),v=d?"_s":"size",m=function(e,t){var r,n=p(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,u){var f=e((function(e,n){c(e,f,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,null!=n&&s(n,r,e[u],e)}));return o(f.prototype,{clear:function(){for(var e=h(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var r=h(this,t),n=m(r,e);if(n){var i=n.n,o=n.p;delete r._i[n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),r._f==n&&(r._f=i),r._l==n&&(r._l=o),r[v]--}return!!n},forEach:function(e){h(this,t);for(var r,n=a(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!m(h(this,t),e)}}),d&&n(f.prototype,"size",{get:function(){return h(this,t)[v]}}),f},def:function(e,t,r){var n,i,o=m(e,t);return o?o.v=r:(e._l=o={i:i=p(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=o),n&&(n.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:m,setStrong:function(e,t,r){u(e,t,(function(e,r){this._t=h(e,t),this._k=r,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?f(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,f(1))}),r?"entries":"values",!r,!0),l(t)}}},function(e,t,r){"use strict";var n=r(44),i=r(28).getWeak,o=r(3),a=r(4),c=r(43),s=r(58),u=r(23),f=r(14),l=r(38),d=u(5),p=u(6),h=0,v=function(e){return e._l||(e._l=new m)},m=function(){this.a=[]},b=function(e,t){return d(e.a,(function(e){return e[0]===t}))};m.prototype={get:function(e){var t=b(this,e);if(t)return t[1]},has:function(e){return!!b(this,e)},set:function(e,t){var r=b(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=p(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,o){var u=e((function(e,n){c(e,u,t,"_i"),e._t=t,e._i=h++,e._l=void 0,null!=n&&s(n,r,e[o],e)}));return n(u.prototype,{delete:function(e){if(!a(e))return!1;var r=i(e);return!0===r?v(l(this,t)).delete(e):r&&f(r,this._i)&&delete r[this._i]},has:function(e){if(!a(e))return!1;var r=i(e);return!0===r?v(l(this,t)).has(e):r&&f(r,this._i)}}),u},def:function(e,t,r){var n=i(o(t),!0);return!0===n?v(e).set(t,r):n[e._i]=r,e},ufstore:v}},function(e,t,r){var n=r(20),i=r(6);e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=i(t);if(t!==r)throw RangeError("Wrong length!");return r}},function(e,t,r){var n=r(35),i=r(52),o=r(3),a=r(1).Reflect;e.exports=a&&a.ownKeys||function(e){var t=n.f(o(e)),r=i.f;return r?t.concat(r(e)):t}},function(e,t,r){var n=r(6),i=r(70),o=r(25);e.exports=function(e,t,r,a){var c=String(o(e)),s=c.length,u=void 0===r?" ":String(r),f=n(t);if(f<=s||""==u)return c;var l=f-s,d=i.call(u,Math.ceil(l/u.length));return d.length>l&&(d=d.slice(0,l)),a?d+c:c+d}},function(e,t,r){var n=r(8),i=r(32),o=r(16),a=r(47).f;e.exports=function(e){return function(t){for(var r,c=o(t),s=i(c),u=s.length,f=0,l=[];u>f;)r=s[f++],n&&!a.call(c,r)||l.push(e?[r,c[r]]:c[r]);return l}}},function(e,t){var r=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=r)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";var n=r(13);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var o;if(r)o=r(t);else if(n.isURLSearchParams(t))o=t.toString();else{var a=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var c=e.indexOf("#");-1!==c&&(e=e.slice(0,c)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";(function(t){var n=r(13),i=r(327),o={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c,s={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(c=r(127)),c),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};s.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],(function(e){s.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){s.headers[e]=n.merge(o)})),e.exports=s}).call(this,r(326))},function(e,t,r){"use strict";var n=r(13),i=r(328),o=r(124),a=r(330),c=r(333),s=r(334),u=r(128);e.exports=function(e){return new Promise((function(t,f){var l=e.data,d=e.headers;n.isFormData(l)&&delete d["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",v=e.auth.password||"";d.Authorization="Basic "+btoa(h+":"+v)}var m=a(e.baseURL,e.url);if(p.open(e.method.toUpperCase(),o(m,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in p?c(p.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p};i(t,f,n),p=null}},p.onabort=function(){p&&(f(u("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){f(u("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),f(u(t,e,"ECONNABORTED",p)),p=null},n.isStandardBrowserEnv()){var b=r(335),y=(e.withCredentials||s(m))&&e.xsrfCookieName?b.read(e.xsrfCookieName):void 0;y&&(d[e.xsrfHeaderName]=y)}if("setRequestHeader"in p&&n.forEach(d,(function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete d[t]:p.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),f(e),p=null)})),void 0===l&&(l=null),p.send(l)}))}},function(e,t,r){"use strict";var n=r(329);e.exports=function(e,t,r,i,o){var a=new Error(e);return n(a,t,r,i,o)}},function(e,t,r){"use strict";var n=r(13);e.exports=function(e,t){t=t||{};var r={},i=["url","method","params","data"],o=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];n.forEach(i,(function(e){void 0!==t[e]&&(r[e]=t[e])})),n.forEach(o,(function(i){n.isObject(t[i])?r[i]=n.deepMerge(e[i],t[i]):void 0!==t[i]?r[i]=t[i]:n.isObject(e[i])?r[i]=n.deepMerge(e[i]):void 0!==e[i]&&(r[i]=e[i])})),n.forEach(a,(function(n){void 0!==t[n]?r[n]=t[n]:void 0!==e[n]&&(r[n]=e[n])}));var c=i.concat(o).concat(a),s=Object.keys(t).filter((function(e){return-1===c.indexOf(e)}));return n.forEach(s,(function(n){void 0!==t[n]?r[n]=t[n]:void 0!==e[n]&&(r[n]=e[n])})),r}},function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,r){window,e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(1);!function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARNING=2]="WARNING",e[e.ERROR=3]="ERROR",e[e.NONE=4]="NONE"}(n||(n={}));var o=function(){function e(){this.logPrefix="SupLogger",this.logLevel=n.NONE,this.uploadServeTranslators=[],this.DEBUG=n.DEBUG,this.INFO=n.INFO,this.WARNING=n.WARNING,this.ERROR=n.ERROR,this.NONE=n.NONE}return e.prototype.use=function(e){"function"==typeof e&&this.uploadServeTranslators.push((function(t,r){e(t,r)}))},e.prototype.setLogLevel=function(e,t){t&&(this.logPrefix=t),"number"==typeof e&&e>-1&&e<5&&(this.logLevel=e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!(this.logLevel>n.ERROR&&this.logLevel!==n.NONE||this.logLevel===n.NONE)){var r=e,o=Date.now();r.unshift("["+i.timesToDate(o,"YYYY-MM-DD hh:mm:ss")+"] "+this.logPrefix+" [ERROR] - "),this.uploadServeTranslators.length>0?this.uploadServeTranslators.map((function(e){e({type:"error",params:r,timestamp:o},(function(){console.error.apply(console,r)}))})):console.error.apply(console,r)}},e.prototype.warning=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!(this.logLevel>n.WARNING&&this.logLevel!==n.NONE||this.logLevel===n.NONE)){var r=e,o=Date.now();r.unshift("["+i.timesToDate(o,"YYYY-MM-DD hh:mm:ss")+"] "+this.logPrefix+" [WARNING] - "),this.uploadServeTranslators.length>0?this.uploadServeTranslators.map((function(e){e({type:"warning",params:r,timestamp:o},(function(){console.warn.apply(console,r)}))})):console.warn.apply(console,r)}},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!(this.logLevel>n.INFO&&this.logLevel!==n.NONE||this.logLevel===n.NONE)){var r=e,o=Date.now();r.unshift("["+i.timesToDate(o,"YYYY-MM-DD hh:mm:ss")+"] "+this.logPrefix+" [INFO] - "),this.uploadServeTranslators.length>0?this.uploadServeTranslators.map((function(e){e({type:"info",params:r,timestamp:o},(function(){console.log.apply(console,r)}))})):console.log.apply(console,r)}},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!(this.logLevel>n.DEBUG&&this.logLevel!==n.NONE||this.logLevel===n.NONE)){var r=e,o=Date.now();r.unshift("["+i.timesToDate(o,"YYYY-MM-DD hh:mm:ss")+"] "+this.logPrefix+" [DEBUG] - "),this.uploadServeTranslators.length>0?this.uploadServeTranslators.map((function(e){e({type:"debug",params:r,timestamp:o},(function(){console.log.apply(console,r)}))})):console.log.apply(console,r)}},e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timesToDate=function(e,t){var r="YYYY-MM-DD hh:mm:ss";if("number"!=typeof e)throw new Error("[timesToDate]: timestamp must be number");t&&"string"==typeof t&&(r=t);var n=e||Date.now(),i=new Date(n)||new Date(n),o=i.getFullYear(),a=i.getMonth()+1,c=i.getDate(),s=i.getHours(),u=i.getMinutes(),f=i.getSeconds();return r.indexOf("YYYY")>-1&&(r=r.replace("YYYY",(function(e){return""+o}))),r.indexOf("MM")>-1?r=r.replace("MM",(function(e){return a<10?"0"+a:""+a})):r.indexOf("M")>-1&&(r=r.replace("M",(function(e){return""+a}))),r.indexOf("DD")>-1?r=r.replace("DD",(function(e){return c<10?"0"+c:""+c})):r.indexOf("D")>-1&&(r=r.replace("D",(function(e){return""+c}))),r.indexOf("hh")>-1?r=r.replace("hh",(function(e){return s<10?"0"+s:""+s})):r.indexOf("h")>-1&&(r=r.replace("h",(function(e){return""+s}))),r.indexOf("mm")>-1?r=r.replace("mm",(function(e){return u<10?"0"+u:""+u})):r.indexOf("m")>-1&&(r=r.replace("m",(function(e){return""+u}))),r.indexOf("ss")>-1?r=r.replace("ss",(function(e){return f<10?"0"+f:""+f})):r.indexOf("s")>-1&&(r=r.replace("s",(function(e){return""+f}))),r}}]).default},function(e,t,r){e.exports=r(321)},function(e,t,r){"use strict";var n=r(45);function i(e,t,r,i,o){var a=n.writeRtpDescription(e.kind,t);if(a+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":o||"active"),a+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var c=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=c;var s="msid:"+(i?i.id:"-")+" "+c+"\r\n";a+="a="+s,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),a}function o(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},i=function(e,t,r,i){var o=n(e.parameters.apt,r),a=n(t.parameters.apt,i);return o&&a&&o.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach((function(n){for(var o=0;o<t.codecs.length;o++){var a=t.codecs[o];if(n.name.toLowerCase()===a.name.toLowerCase()&&n.clockRate===a.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&a.parameters.apt&&!i(n,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(n.numChannels,a.numChannels),r.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter((function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var n=0;n<t.headerExtensions.length;n++){var i=t.headerExtensions[n];if(e.uri===i.uri){r.headerExtensions.push(i);break}}})),r}function a(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function c(e,t){var r=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return r||e.addRemoteCandidate(t),!r}function s(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}e.exports=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,r,n,i){var o=new Event("track");o.track=r,o.receiver=n,o.transceiver={receiver:n},o.streams=i,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var f=function(r){var i=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){i[e]=o[e].bind(o)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle="max-bundle"===r.bundlePolicy,"negotiate"===r.rtcpMuxPolicy)throw s("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy="require"),r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all"}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced"}if(r.iceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof n;return i&&(n=[n]),n=n.filter((function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!r?(r=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")})),delete e.url,e.urls=i?n[0]:n,!!n.length}}))}(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var a=r.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=n.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(f.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(f.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),f.prototype.onicecandidate=null,f.prototype.onaddstream=null,f.prototype.ontrack=null,f.prototype.onremovestream=null,f.prototype.onsignalingstatechange=null,f.prototype.oniceconnectionstatechange=null,f.prototype.onconnectionstatechange=null,f.prototype.onicegatheringstatechange=null,f.prototype.onnegotiationneeded=null,f.prototype.ondatachannel=null,f.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},f.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},f.prototype.getConfiguration=function(){return this._config},f.prototype.getLocalStreams=function(){return this.localStreams},f.prototype.getRemoteStreams=function(){return this.remoteStreams},f.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();n.iceTransport=i.iceTransport,n.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(n),n},f.prototype.addTrack=function(t,r){if(this._isClosed)throw s("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find((function(e){return e.track===t})))throw s("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(n=this.transceivers[i]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),n.track=t,n.stream=r,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},f.prototype.addStream=function(e){var r=this;if(t>=15025)e.getTracks().forEach((function(t){r.addTrack(t,e)}));else{var n=e.clone();e.getTracks().forEach((function(e,t){var r=n.getTracks()[t];e.addEventListener("enabled",(function(e){r.enabled=e.enabled}))})),n.getTracks().forEach((function(e){r.addTrack(e,n)}))}},f.prototype.removeTrack=function(t){if(this._isClosed)throw s("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var r=this.transceivers.find((function(e){return e.rtpSender===t}));if(!r)throw s("InvalidAccessError","Sender was not created by this connection.");var n=r.stream;r.rtpSender.stop(),r.rtpSender=null,r.track=null,r.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(n)&&this.localStreams.indexOf(n)>-1&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},f.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var r=t.getSenders().find((function(t){return t.track===e}));r&&t.removeTrack(r)}))},f.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},f.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},f.prototype._createIceGatherer=function(t,r){var n=this;if(r&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;i.state=r?"completed":"gathering",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},f.prototype._gather=function(t,r){var i=this,o=this.transceivers[r].iceGatherer;if(!o.onlocalcandidate){var a=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),o.onlocalcandidate=function(e){if(!(i.usingBundle&&r>0)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:r};var c=e.candidate,s=!c||0===Object.keys(c).length;if(s)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),c.component=1,c.ufrag=o.getLocalParameters().usernameFragment;var u=n.writeCandidate(c);a.candidate=Object.assign(a.candidate,n.parseCandidate(u)),a.candidate.candidate=u,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var f=n.getMediaSections(i._localDescription.sdp);f[a.candidate.sdpMLineIndex]+=s?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",i._localDescription.sdp=n.getDescription(i._localDescription.sdp)+f.join("");var l=i.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),s||i._dispatchEvent("icecandidate",a),l&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout((function(){a.forEach((function(e){o.onlocalcandidate(e)}))}),0)}},f.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var n=new e.RTCDtlsTransport(r);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:r,dtlsTransport:n}},f.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},f.prototype._transceive=function(e,r,i){var a=o(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(a.encodings=e.sendEncodingParameters,a.rtcp={cname:n.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(a.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(a)),i&&e.rtpReceiver&&a.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?a.encodings=e.recvEncodingParameters:a.encodings=[{}],a.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(a.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(a.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(a))},f.prototype.setLocalDescription=function(e){var t,r,i=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(s("TypeError",'Unsupported type "'+e.type+'"'));if(!a("setLocalDescription",e.type,i.signalingState)||i._isClosed)return Promise.reject(s("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=n.splitSections(e.sdp),r=t.shift(),t.forEach((function(e,t){var r=n.parseRtpParameters(e);i.transceivers[t].localCapabilities=r})),i.transceivers.forEach((function(e,t){i._gather(e.mid,t)}));else if("answer"===e.type){t=n.splitSections(i._remoteDescription.sdp),r=t.shift();var c=n.matchPrefix(r,"a=ice-lite").length>0;t.forEach((function(e,t){var a=i.transceivers[t],s=a.iceGatherer,u=a.iceTransport,f=a.dtlsTransport,l=a.localCapabilities,d=a.remoteCapabilities;if(!(n.isRejected(e)&&0===n.matchPrefix(e,"a=bundle-only").length)&&!a.rejected){var p=n.getIceParameters(e,r),h=n.getDtlsParameters(e,r);c&&(h.role="server"),i.usingBundle&&0!==t||(i._gather(a.mid,t),"new"===u.state&&u.start(s,p,c?"controlling":"controlled"),"new"===f.state&&f.start(h));var v=o(l,d);i._transceive(a,v.codecs.length>0,!1)}}))}return i._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),Promise.resolve()},f.prototype.setRemoteDescription=function(i){var f=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(s("TypeError",'Unsupported type "'+i.type+'"'));if(!a("setRemoteDescription",i.type,f.signalingState)||f._isClosed)return Promise.reject(s("InvalidStateError","Can not set remote "+i.type+" in state "+f.signalingState));var l={};f.remoteStreams.forEach((function(e){l[e.id]=e}));var d=[],p=n.splitSections(i.sdp),h=p.shift(),v=n.matchPrefix(h,"a=ice-lite").length>0,m=n.matchPrefix(h,"a=group:BUNDLE ").length>0;f.usingBundle=m;var b=n.matchPrefix(h,"a=ice-options:")[0];return f.canTrickleIceCandidates=!!b&&b.substr(14).split(" ").indexOf("trickle")>=0,p.forEach((function(a,s){var u=n.splitLines(a),p=n.getKind(a),b=n.isRejected(a)&&0===n.matchPrefix(a,"a=bundle-only").length,y=u[0].substr(2).split(" ")[2],g=n.getDirection(a,h),_=n.parseMsid(a),S=n.getMid(a)||n.generateIdentifier();if(b||"application"===p&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))f.transceivers[s]={mid:S,kind:p,protocol:y,rejected:!0};else{var E,T,w,O,C,P,R,I,N;!b&&f.transceivers[s]&&f.transceivers[s].rejected&&(f.transceivers[s]=f._createTransceiver(p,!0));var A,k,D=n.parseRtpParameters(a);b||(A=n.getIceParameters(a,h),(k=n.getDtlsParameters(a,h)).role="client"),R=n.parseRtpEncodingParameters(a);var x=n.parseRtcpParameters(a),j=n.matchPrefix(a,"a=end-of-candidates",h).length>0,M=n.matchPrefix(a,"a=candidate:").map((function(e){return n.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===i.type||"answer"===i.type)&&!b&&m&&s>0&&f.transceivers[s]&&(f._disposeIceAndDtlsTransports(s),f.transceivers[s].iceGatherer=f.transceivers[0].iceGatherer,f.transceivers[s].iceTransport=f.transceivers[0].iceTransport,f.transceivers[s].dtlsTransport=f.transceivers[0].dtlsTransport,f.transceivers[s].rtpSender&&f.transceivers[s].rtpSender.setTransport(f.transceivers[0].dtlsTransport),f.transceivers[s].rtpReceiver&&f.transceivers[s].rtpReceiver.setTransport(f.transceivers[0].dtlsTransport)),"offer"!==i.type||b){if("answer"===i.type&&!b){T=(E=f.transceivers[s]).iceGatherer,w=E.iceTransport,O=E.dtlsTransport,C=E.rtpReceiver,P=E.sendEncodingParameters,I=E.localCapabilities,f.transceivers[s].recvEncodingParameters=R,f.transceivers[s].remoteCapabilities=D,f.transceivers[s].rtcpParameters=x,M.length&&"new"===w.state&&(!v&&!j||m&&0!==s?M.forEach((function(e){c(E.iceTransport,e)})):w.setRemoteCandidates(M)),m&&0!==s||("new"===w.state&&w.start(T,A,"controlling"),"new"===O.state&&O.start(k)),!o(E.localCapabilities,E.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&E.sendEncodingParameters[0].rtx&&delete E.sendEncodingParameters[0].rtx,f._transceive(E,"sendrecv"===g||"recvonly"===g,"sendrecv"===g||"sendonly"===g),!C||"sendrecv"!==g&&"sendonly"!==g?delete E.rtpReceiver:(N=C.track,_?(l[_.stream]||(l[_.stream]=new e.MediaStream),r(N,l[_.stream]),d.push([N,C,l[_.stream]])):(l.default||(l.default=new e.MediaStream),r(N,l.default),d.push([N,C,l.default])))}}else{(E=f.transceivers[s]||f._createTransceiver(p)).mid=S,E.iceGatherer||(E.iceGatherer=f._createIceGatherer(s,m)),M.length&&"new"===E.iceTransport.state&&(!j||m&&0!==s?M.forEach((function(e){c(E.iceTransport,e)})):E.iceTransport.setRemoteCandidates(M)),I=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(I.codecs=I.codecs.filter((function(e){return"rtx"!==e.name}))),P=E.sendEncodingParameters||[{ssrc:1001*(2*s+2)}];var L,U=!1;if("sendrecv"===g||"sendonly"===g){if(U=!E.rtpReceiver,C=E.rtpReceiver||new e.RTCRtpReceiver(E.dtlsTransport,p),U)N=C.track,_&&"-"===_.stream||(_?(l[_.stream]||(l[_.stream]=new e.MediaStream,Object.defineProperty(l[_.stream],"id",{get:function(){return _.stream}})),Object.defineProperty(N,"id",{get:function(){return _.track}}),L=l[_.stream]):(l.default||(l.default=new e.MediaStream),L=l.default)),L&&(r(N,L),E.associatedRemoteMediaStreams.push(L)),d.push([N,C,L])}else E.rtpReceiver&&E.rtpReceiver.track&&(E.associatedRemoteMediaStreams.forEach((function(t){var r=t.getTracks().find((function(e){return e.id===E.rtpReceiver.track.id}));r&&function(t,r){r.removeTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(r,t)})),E.associatedRemoteMediaStreams=[]);E.localCapabilities=I,E.remoteCapabilities=D,E.rtpReceiver=C,E.rtcpParameters=x,E.sendEncodingParameters=P,E.recvEncodingParameters=R,f._transceive(f.transceivers[s],!1,U)}}})),void 0===f._dtlsRole&&(f._dtlsRole="offer"===i.type?"active":"passive"),f._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?f._updateSignalingState("have-remote-offer"):f._updateSignalingState("stable"),Object.keys(l).forEach((function(t){var r=l[t];if(r.getTracks().length){if(-1===f.remoteStreams.indexOf(r)){f.remoteStreams.push(r);var n=new Event("addstream");n.stream=r,e.setTimeout((function(){f._dispatchEvent("addstream",n)}))}d.forEach((function(e){var t=e[0],n=e[1];r.id===e[2].id&&u(f,t,n,[r])}))}})),d.forEach((function(e){e[2]||u(f,e[0],e[1],[])})),e.setTimeout((function(){f&&f.transceivers&&f.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},f.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},f.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},f.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},f.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},f.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},f.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(s("InvalidStateError","Can not call createOffer after close"));var o=r.transceivers.filter((function(e){return"audio"===e.kind})).length,a=r.transceivers.filter((function(e){return"video"===e.kind})).length,c=arguments[0];if(c){if(c.mandatory||c.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==c.offerToReceiveAudio&&(o=!0===c.offerToReceiveAudio?1:!1===c.offerToReceiveAudio?0:c.offerToReceiveAudio),void 0!==c.offerToReceiveVideo&&(a=!0===c.offerToReceiveVideo?1:!1===c.offerToReceiveVideo?0:c.offerToReceiveVideo)}for(r.transceivers.forEach((function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)}));o>0||a>0;)o>0&&(r._createTransceiver("audio"),o--),a>0&&(r._createTransceiver("video"),a--);var u=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach((function(i,o){var a=i.track,c=i.kind,s=i.mid||n.generateIdentifier();i.mid=s,i.iceGatherer||(i.iceGatherer=r._createIceGatherer(o,r.usingBundle));var u=e.RTCRtpSender.getCapabilities(c);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var f=i.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];a&&t>=15019&&"video"===c&&!f[0].rtx&&(f[0].rtx={ssrc:f[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,c)),i.localCapabilities=u,i.sendEncodingParameters=f})),"max-compat"!==r._config.bundlePolicy&&(u+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",r.transceivers.forEach((function(e,t){u+=i(e,e.localCapabilities,"offer",e.stream,r._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,u+="a="+n.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))}));var f=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(f)},f.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(s("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==r.signalingState&&"have-local-pranswer"!==r.signalingState)return Promise.reject(s("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState));var a=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(a+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n";var c=n.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach((function(e,n){if(!(n+1>c)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?a+="m=application 0 DTLS/SCTP 5000\r\n":a+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?a+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(a+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(a+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var s;if(e.stream)"audio"===e.kind?s=e.stream.getAudioTracks()[0]:"video"===e.kind&&(s=e.stream.getVideoTracks()[0]),s&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var u=o(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,a+=i(e,u,"answer",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(a+="a=rtcp-rsize\r\n")}}));var u=new e.RTCSessionDescription({type:"answer",sdp:a});return Promise.resolve(u)},f.prototype.addIceCandidate=function(e){var t,r=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(i,o){if(!r._remoteDescription)return o(s("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<r.transceivers.length;u++)if(r.transceivers[u].mid===e.sdpMid){a=u;break}var f=r.transceivers[a];if(!f)return o(s("OperationError","Can not add ICE candidate"));if(f.rejected)return i();var l=Object.keys(e.candidate).length>0?n.parseCandidate(e.candidate):{};if("tcp"===l.protocol&&(0===l.port||9===l.port))return i();if(l.component&&1!==l.component)return i();if((0===a||a>0&&f.iceTransport!==r.transceivers[0].iceTransport)&&!c(f.iceTransport,l))return o(s("OperationError","Can not add ICE candidate"));var d=e.candidate.trim();0===d.indexOf("a=")&&(d=d.substr(2)),(t=n.getMediaSections(r._remoteDescription.sdp))[a]+="a="+(l.type?d:"end-of-candidates")+"\r\n",r._remoteDescription.sdp=n.getDescription(r._remoteDescription.sdp)+t.join("")}else for(var p=0;p<r.transceivers.length&&(r.transceivers[p].rejected||(r.transceivers[p].iceTransport.addRemoteCandidate({}),(t=n.getMediaSections(r._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",r._remoteDescription.sdp=n.getDescription(r._remoteDescription.sdp)+t.join(""),!r.usingBundle));p++);i()}))},f.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)})),!r)throw s("InvalidAccessError","Invalid selector.");return r.getStats()}var n=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&n.push(e[t].getStats())}))})),Promise.all(n).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var n=r.prototype.getStats;r.prototype.getStats=function(){return n.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(r){var n;e[r].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(n=e[r]).type]||n.type,t.set(r,e[r])})),t}))}}}));var l=["createOffer","createAnswer"];return l.forEach((function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(l=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),f}},function(e,t,r){r(135),e.exports=r(338)},function(e,t,r){"use strict";r(136);var n,i=(n=r(308))&&n.__esModule?n:{default:n};i.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),i.default._babelPolyfill=!0},function(e,t,r){"use strict";r(137),r(280),r(282),r(285),r(287),r(289),r(291),r(293),r(295),r(297),r(299),r(301),r(303),r(307)},function(e,t,r){r(138),r(141),r(142),r(143),r(144),r(145),r(146),r(147),r(148),r(149),r(150),r(151),r(152),r(153),r(154),r(155),r(156),r(157),r(158),r(159),r(160),r(161),r(162),r(163),r(164),r(165),r(166),r(167),r(168),r(169),r(170),r(171),r(172),r(173),r(174),r(175),r(176),r(177),r(178),r(179),r(180),r(181),r(182),r(184),r(185),r(186),r(187),r(188),r(189),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(200),r(201),r(202),r(203),r(204),r(205),r(206),r(207),r(208),r(209),r(210),r(211),r(212),r(213),r(214),r(215),r(216),r(217),r(219),r(220),r(222),r(223),r(224),r(225),r(226),r(227),r(228),r(230),r(231),r(232),r(233),r(234),r(235),r(236),r(237),r(238),r(239),r(240),r(241),r(242),r(82),r(243),r(110),r(244),r(111),r(245),r(246),r(247),r(248),r(112),r(251),r(252),r(253),r(254),r(255),r(256),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(266),r(267),r(268),r(269),r(270),r(271),r(272),r(273),r(274),r(275),r(276),r(277),r(278),r(279),e.exports=r(7)},function(e,t,r){"use strict";var n=r(1),i=r(14),o=r(8),a=r(0),c=r(11),s=r(28).KEY,u=r(2),f=r(50),l=r(39),d=r(30),p=r(5),h=r(63),v=r(91),m=r(140),b=r(53),y=r(3),g=r(4),_=r(10),S=r(16),E=r(27),T=r(29),w=r(34),O=r(94),C=r(21),P=r(52),R=r(9),I=r(32),N=C.f,A=R.f,k=O.f,D=n.Symbol,x=n.JSON,j=x&&x.stringify,M=p("_hidden"),L=p("toPrimitive"),U={}.propertyIsEnumerable,F=f("symbol-registry"),V=f("symbols"),G=f("op-symbols"),B=Object.prototype,W="function"==typeof D&&!!P.f,H=n.QObject,Y=!H||!H.prototype||!H.prototype.findChild,K=o&&u((function(){return 7!=w(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=N(B,t);n&&delete B[t],A(e,t,r),n&&e!==B&&A(B,t,n)}:A,z=function(e){var t=V[e]=w(D.prototype);return t._k=e,t},J=W&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},X=function(e,t,r){return e===B&&X(G,t,r),y(e),t=E(t,!0),y(r),i(V,t)?(r.enumerable?(i(e,M)&&e[M][t]&&(e[M][t]=!1),r=w(r,{enumerable:T(0,!1)})):(i(e,M)||A(e,M,T(1,{})),e[M][t]=!0),K(e,t,r)):A(e,t,r)},q=function(e,t){y(e);for(var r,n=m(t=S(t)),i=0,o=n.length;o>i;)X(e,r=n[i++],t[r]);return e},$=function(e){var t=U.call(this,e=E(e,!0));return!(this===B&&i(V,e)&&!i(G,e))&&(!(t||!i(this,e)||!i(V,e)||i(this,M)&&this[M][e])||t)},Q=function(e,t){if(e=S(e),t=E(t,!0),e!==B||!i(V,t)||i(G,t)){var r=N(e,t);return!r||!i(V,t)||i(e,M)&&e[M][t]||(r.enumerable=!0),r}},Z=function(e){for(var t,r=k(S(e)),n=[],o=0;r.length>o;)i(V,t=r[o++])||t==M||t==s||n.push(t);return n},ee=function(e){for(var t,r=e===B,n=k(r?G:S(e)),o=[],a=0;n.length>a;)!i(V,t=n[a++])||r&&!i(B,t)||o.push(V[t]);return o};W||(c((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(r){this===B&&t.call(G,r),i(this,M)&&i(this[M],e)&&(this[M][e]=!1),K(this,e,T(1,r))};return o&&Y&&K(B,e,{configurable:!0,set:t}),z(e)}).prototype,"toString",(function(){return this._k})),C.f=Q,R.f=X,r(35).f=O.f=Z,r(47).f=$,P.f=ee,o&&!r(31)&&c(B,"propertyIsEnumerable",$,!0),h.f=function(e){return z(p(e))}),a(a.G+a.W+a.F*!W,{Symbol:D});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)p(te[re++]);for(var ne=I(p.store),ie=0;ne.length>ie;)v(ne[ie++]);a(a.S+a.F*!W,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=D(e)},keyFor:function(e){if(!J(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),a(a.S+a.F*!W,"Object",{create:function(e,t){return void 0===t?w(e):q(w(e),t)},defineProperty:X,defineProperties:q,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var oe=u((function(){P.f(1)}));a(a.S+a.F*oe,"Object",{getOwnPropertySymbols:function(e){return P.f(_(e))}}),x&&a(a.S+a.F*(!W||u((function(){var e=D();return"[null]"!=j([e])||"{}"!=j({a:e})||"{}"!=j(Object(e))}))),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(g(t)||void 0!==e)&&!J(e))return b(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!J(t))return t}),n[1]=t,j.apply(x,n)}}),D.prototype[L]||r(15)(D.prototype,L,D.prototype.valueOf),l(D,"Symbol"),l(Math,"Math",!0),l(n.JSON,"JSON",!0)},function(e,t,r){e.exports=r(50)("native-function-to-string",Function.toString)},function(e,t,r){var n=r(32),i=r(52),o=r(47);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var a,c=r(e),s=o.f,u=0;c.length>u;)s.call(e,a=c[u++])&&t.push(a);return t}},function(e,t,r){var n=r(0);n(n.S,"Object",{create:r(34)})},function(e,t,r){var n=r(0);n(n.S+n.F*!r(8),"Object",{defineProperty:r(9).f})},function(e,t,r){var n=r(0);n(n.S+n.F*!r(8),"Object",{defineProperties:r(93)})},function(e,t,r){var n=r(16),i=r(21).f;r(22)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(n(e),t)}}))},function(e,t,r){var n=r(10),i=r(36);r(22)("getPrototypeOf",(function(){return function(e){return i(n(e))}}))},function(e,t,r){var n=r(10),i=r(32);r(22)("keys",(function(){return function(e){return i(n(e))}}))},function(e,t,r){r(22)("getOwnPropertyNames",(function(){return r(94).f}))},function(e,t,r){var n=r(4),i=r(28).onFreeze;r(22)("freeze",(function(e){return function(t){return e&&n(t)?e(i(t)):t}}))},function(e,t,r){var n=r(4),i=r(28).onFreeze;r(22)("seal",(function(e){return function(t){return e&&n(t)?e(i(t)):t}}))},function(e,t,r){var n=r(4),i=r(28).onFreeze;r(22)("preventExtensions",(function(e){return function(t){return e&&n(t)?e(i(t)):t}}))},function(e,t,r){var n=r(4);r(22)("isFrozen",(function(e){return function(t){return!n(t)||!!e&&e(t)}}))},function(e,t,r){var n=r(4);r(22)("isSealed",(function(e){return function(t){return!n(t)||!!e&&e(t)}}))},function(e,t,r){var n=r(4);r(22)("isExtensible",(function(e){return function(t){return!!n(t)&&(!e||e(t))}}))},function(e,t,r){var n=r(0);n(n.S+n.F,"Object",{assign:r(95)})},function(e,t,r){var n=r(0);n(n.S,"Object",{is:r(96)})},function(e,t,r){var n=r(0);n(n.S,"Object",{setPrototypeOf:r(67).set})},function(e,t,r){"use strict";var n=r(48),i={};i[r(5)("toStringTag")]="z",i+""!="[object z]"&&r(11)(Object.prototype,"toString",(function(){return"[object "+n(this)+"]"}),!0)},function(e,t,r){var n=r(0);n(n.P,"Function",{bind:r(97)})},function(e,t,r){var n=r(9).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||r(8)&&n(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,r){"use strict";var n=r(4),i=r(36),o=r(5)("hasInstance"),a=Function.prototype;o in a||r(9).f(a,o,{value:function(e){if("function"!=typeof this||!n(e))return!1;if(!n(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,r){var n=r(0),i=r(99);n(n.G+n.F*(parseInt!=i),{parseInt:i})},function(e,t,r){var n=r(0),i=r(100);n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},function(e,t,r){"use strict";var n=r(1),i=r(14),o=r(24),a=r(69),c=r(27),s=r(2),u=r(35).f,f=r(21).f,l=r(9).f,d=r(40).trim,p=n.Number,h=p,v=p.prototype,m="Number"==o(r(34)(v)),b="trim"in String.prototype,y=function(e){var t=c(e,!1);if("string"==typeof t&&t.length>2){var r,n,i,o=(t=b?t.trim():d(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+t}for(var a,s=t.slice(2),u=0,f=s.length;u<f;u++)if((a=s.charCodeAt(u))<48||a>i)return NaN;return parseInt(s,n)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof p&&(m?s((function(){v.valueOf.call(r)})):"Number"!=o(r))?a(new h(y(t)),r,p):y(t)};for(var g,_=r(8)?u(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;_.length>S;S++)i(h,g=_[S])&&!i(p,g)&&l(p,g,f(h,g));p.prototype=v,v.constructor=p,r(11)(n,"Number",p)}},function(e,t,r){"use strict";var n=r(0),i=r(20),o=r(101),a=r(70),c=1..toFixed,s=Math.floor,u=[0,0,0,0,0,0],f="Number.toFixed: incorrect invocation!",l=function(e,t){for(var r=-1,n=t;++r<6;)n+=e*u[r],u[r]=n%1e7,n=s(n/1e7)},d=function(e){for(var t=6,r=0;--t>=0;)r+=u[t],u[t]=s(r/e),r=r%e*1e7},p=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==u[e]){var r=String(u[e]);t=""===t?r:t+a.call("0",7-r.length)+r}return t},h=function(e,t,r){return 0===t?r:t%2==1?h(e,t-1,r*e):h(e*e,t/2,r)};n(n.P+n.F*(!!c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(2)((function(){c.call({})}))),"Number",{toFixed:function(e){var t,r,n,c,s=o(this,f),u=i(e),v="",m="0";if(u<0||u>20)throw RangeError(f);if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(v="-",s=-s),s>1e-21)if(r=(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(s*h(2,69,1))-69)<0?s*h(2,-t,1):s/h(2,t,1),r*=4503599627370496,(t=52-t)>0){for(l(0,r),n=u;n>=7;)l(1e7,0),n-=7;for(l(h(10,n,1),0),n=t-1;n>=23;)d(1<<23),n-=23;d(1<<n),l(1,1),d(2),m=p()}else l(0,r),l(1<<-t,0),m=p()+a.call("0",u);return m=u>0?v+((c=m.length)<=u?"0."+a.call("0",u-c)+m:m.slice(0,c-u)+"."+m.slice(c-u)):v+m}})},function(e,t,r){"use strict";var n=r(0),i=r(2),o=r(101),a=1..toPrecision;n(n.P+n.F*(i((function(){return"1"!==a.call(1,void 0)}))||!i((function(){a.call({})}))),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,r){var n=r(0);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,r){var n=r(0),i=r(1).isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,r){var n=r(0);n(n.S,"Number",{isInteger:r(102)})},function(e,t,r){var n=r(0);n(n.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,r){var n=r(0),i=r(102),o=Math.abs;n(n.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,r){var n=r(0);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,r){var n=r(0);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,r){var n=r(0),i=r(100);n(n.S+n.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,r){var n=r(0),i=r(99);n(n.S+n.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,r){var n=r(0),i=r(103),o=Math.sqrt,a=Math.acosh;n(n.S+n.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},function(e,t,r){var n=r(0),i=Math.asinh;n(n.S+n.F*!(i&&1/i(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,r){var n=r(0),i=Math.atanh;n(n.S+n.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,r){var n=r(0),i=r(71);n(n.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,r){var n=r(0);n(n.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,r){var n=r(0),i=Math.exp;n(n.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,r){var n=r(0),i=r(72);n(n.S+n.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t,r){var n=r(0);n(n.S,"Math",{fround:r(183)})},function(e,t,r){var n=r(71),i=Math.pow,o=i(2,-52),a=i(2,-23),c=i(2,127)*(2-a),s=i(2,-126);e.exports=Math.fround||function(e){var t,r,i=Math.abs(e),u=n(e);return i<s?u*(i/s/a+1/o-1/o)*s*a:(r=(t=(1+a/o)*i)-(t-i))>c||r!=r?u*(1/0):u*r}},function(e,t,r){var n=r(0),i=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var r,n,o=0,a=0,c=arguments.length,s=0;a<c;)s<(r=i(arguments[a++]))?(o=o*(n=s/r)*n+1,s=r):o+=r>0?(n=r/s)*n:r;return s===1/0?1/0:s*Math.sqrt(o)}})},function(e,t,r){var n=r(0),i=Math.imul;n(n.S+n.F*r(2)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(e,t){var r=+e,n=+t,i=65535&r,o=65535&n;return 0|i*o+((65535&r>>>16)*o+i*(65535&n>>>16)<<16>>>0)}})},function(e,t,r){var n=r(0);n(n.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,r){var n=r(0);n(n.S,"Math",{log1p:r(103)})},function(e,t,r){var n=r(0);n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,r){var n=r(0);n(n.S,"Math",{sign:r(71)})},function(e,t,r){var n=r(0),i=r(72),o=Math.exp;n(n.S+n.F*r(2)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,r){var n=r(0),i=r(72),o=Math.exp;n(n.S,"Math",{tanh:function(e){var t=i(e=+e),r=i(-e);return t==1/0?1:r==1/0?-1:(t-r)/(o(e)+o(-e))}})},function(e,t,r){var n=r(0);n(n.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,r){var n=r(0),i=r(33),o=String.fromCharCode,a=String.fromCodePoint;n(n.S+n.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,a=0;n>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return r.join("")}})},function(e,t,r){var n=r(0),i=r(16),o=r(6);n(n.S,"String",{raw:function(e){for(var t=i(e.raw),r=o(t.length),n=arguments.length,a=[],c=0;r>c;)a.push(String(t[c++])),c<n&&a.push(String(arguments[c]));return a.join("")}})},function(e,t,r){"use strict";r(40)("trim",(function(e){return function(){return e(this,3)}}))},function(e,t,r){"use strict";var n=r(73)(!0);r(74)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})}))},function(e,t,r){"use strict";var n=r(0),i=r(73)(!1);n(n.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,r){"use strict";var n=r(0),i=r(6),o=r(75),a="".endsWith;n(n.P+n.F*r(77)("endsWith"),"String",{endsWith:function(e){var t=o(this,e,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=i(t.length),c=void 0===r?n:Math.min(i(r),n),s=String(e);return a?a.call(t,s,c):t.slice(c-s.length,c)===s}})},function(e,t,r){"use strict";var n=r(0),i=r(75);n(n.P+n.F*r(77)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){var n=r(0);n(n.P,"String",{repeat:r(70)})},function(e,t,r){"use strict";var n=r(0),i=r(6),o=r(75),a="".startsWith;n(n.P+n.F*r(77)("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),r=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return a?a.call(t,n,r):t.slice(r,r+n.length)===n}})},function(e,t,r){"use strict";r(12)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},function(e,t,r){"use strict";r(12)("big",(function(e){return function(){return e(this,"big","","")}}))},function(e,t,r){"use strict";r(12)("blink",(function(e){return function(){return e(this,"blink","","")}}))},function(e,t,r){"use strict";r(12)("bold",(function(e){return function(){return e(this,"b","","")}}))},function(e,t,r){"use strict";r(12)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},function(e,t,r){"use strict";r(12)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},function(e,t,r){"use strict";r(12)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},function(e,t,r){"use strict";r(12)("italics",(function(e){return function(){return e(this,"i","","")}}))},function(e,t,r){"use strict";r(12)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},function(e,t,r){"use strict";r(12)("small",(function(e){return function(){return e(this,"small","","")}}))},function(e,t,r){"use strict";r(12)("strike",(function(e){return function(){return e(this,"strike","","")}}))},function(e,t,r){"use strict";r(12)("sub",(function(e){return function(){return e(this,"sub","","")}}))},function(e,t,r){"use strict";r(12)("sup",(function(e){return function(){return e(this,"sup","","")}}))},function(e,t,r){var n=r(0);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,r){"use strict";var n=r(0),i=r(10),o=r(27);n(n.P+n.F*r(2)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=i(this),r=o(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}})},function(e,t,r){var n=r(0),i=r(218);n(n.P+n.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,r){"use strict";var n=r(2),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=n((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-50000000000001))}))||!n((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(r>99?r:"0"+a(r))+"Z"}:o},function(e,t,r){var n=Date.prototype,i=n.toString,o=n.getTime;new Date(NaN)+""!="Invalid Date"&&r(11)(n,"toString",(function(){var e=o.call(this);return e==e?i.call(this):"Invalid Date"}))},function(e,t,r){var n=r(5)("toPrimitive"),i=Date.prototype;n in i||r(15)(i,n,r(221))},function(e,t,r){"use strict";var n=r(3),i=r(27);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(n(this),"number"!=e)}},function(e,t,r){var n=r(0);n(n.S,"Array",{isArray:r(53)})},function(e,t,r){"use strict";var n=r(18),i=r(0),o=r(10),a=r(105),c=r(78),s=r(6),u=r(79),f=r(80);i(i.S+i.F*!r(54)((function(e){Array.from(e)})),"Array",{from:function(e){var t,r,i,l,d=o(e),p="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,m=void 0!==v,b=0,y=f(d);if(m&&(v=n(v,h>2?arguments[2]:void 0,2)),null==y||p==Array&&c(y))for(r=new p(t=s(d.length));t>b;b++)u(r,b,m?v(d[b],b):d[b]);else for(l=y.call(d),r=new p;!(i=l.next()).done;b++)u(r,b,m?a(l,v,[i.value,b],!0):i.value);return r.length=b,r}})},function(e,t,r){"use strict";var n=r(0),i=r(79);n(n.S+n.F*r(2)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)i(r,e,arguments[e++]);return r.length=t,r}})},function(e,t,r){"use strict";var n=r(0),i=r(16),o=[].join;n(n.P+n.F*(r(46)!=Object||!r(17)(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},function(e,t,r){"use strict";var n=r(0),i=r(66),o=r(24),a=r(33),c=r(6),s=[].slice;n(n.P+n.F*r(2)((function(){i&&s.call(i)})),"Array",{slice:function(e,t){var r=c(this.length),n=o(this);if(t=void 0===t?r:t,"Array"==n)return s.call(this,e,t);for(var i=a(e,r),u=a(t,r),f=c(u-i),l=new Array(f),d=0;d<f;d++)l[d]="String"==n?this.charAt(i+d):this[i+d];return l}})},function(e,t,r){"use strict";var n=r(0),i=r(19),o=r(10),a=r(2),c=[].sort,s=[1,2,3];n(n.P+n.F*(a((function(){s.sort(void 0)}))||!a((function(){s.sort(null)}))||!r(17)(c)),"Array",{sort:function(e){return void 0===e?c.call(o(this)):c.call(o(this),i(e))}})},function(e,t,r){"use strict";var n=r(0),i=r(23)(0),o=r(17)([].forEach,!0);n(n.P+n.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,r){var n=r(4),i=r(53),o=r(5)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,r){"use strict";var n=r(0),i=r(23)(1);n(n.P+n.F*!r(17)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(0),i=r(23)(2);n(n.P+n.F*!r(17)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(0),i=r(23)(3);n(n.P+n.F*!r(17)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(0),i=r(23)(4);n(n.P+n.F*!r(17)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(0),i=r(107);n(n.P+n.F*!r(17)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,r){"use strict";var n=r(0),i=r(107);n(n.P+n.F*!r(17)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,r){"use strict";var n=r(0),i=r(51)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(a||!r(17)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(0),i=r(16),o=r(20),a=r(6),c=[].lastIndexOf,s=!!c&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(s||!r(17)(c)),"Array",{lastIndexOf:function(e){if(s)return c.apply(this,arguments)||0;var t=i(this),r=a(t.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,o(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in t&&t[n]===e)return n||0;return-1}})},function(e,t,r){var n=r(0);n(n.P,"Array",{copyWithin:r(108)}),r(37)("copyWithin")},function(e,t,r){var n=r(0);n(n.P,"Array",{fill:r(81)}),r(37)("fill")},function(e,t,r){"use strict";var n=r(0),i=r(23)(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),n(n.P+n.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(37)("find")},function(e,t,r){"use strict";var n=r(0),i=r(23)(6),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),n(n.P+n.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(37)(o)},function(e,t,r){r(42)("Array")},function(e,t,r){var n=r(1),i=r(69),o=r(9).f,a=r(35).f,c=r(76),s=r(55),u=n.RegExp,f=u,l=u.prototype,d=/a/g,p=/a/g,h=new u(d)!==d;if(r(8)&&(!h||r(2)((function(){return p[r(5)("match")]=!1,u(d)!=d||u(p)==p||"/a/i"!=u(d,"i")})))){u=function(e,t){var r=this instanceof u,n=c(e),o=void 0===t;return!r&&n&&e.constructor===u&&o?e:i(h?new f(n&&!o?e.source:e,t):f((n=e instanceof u)?e.source:e,n&&o?s.call(e):t),r?this:l,u)};for(var v=function(e){e in u||o(u,e,{configurable:!0,get:function(){return f[e]},set:function(t){f[e]=t}})},m=a(f),b=0;m.length>b;)v(m[b++]);l.constructor=u,u.prototype=l,r(11)(n,"RegExp",u)}r(42)("RegExp")},function(e,t,r){"use strict";r(111);var n=r(3),i=r(55),o=r(8),a=/./.toString,c=function(e){r(11)(RegExp.prototype,"toString",e,!0)};r(2)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?c((function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)})):"toString"!=a.name&&c((function(){return a.call(this)}))},function(e,t,r){"use strict";var n=r(3),i=r(6),o=r(84),a=r(56);r(57)("match",1,(function(e,t,r,c){return[function(r){var n=e(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=c(r,e,this);if(t.done)return t.value;var s=n(e),u=String(this);if(!s.global)return a(s,u);var f=s.unicode;s.lastIndex=0;for(var l,d=[],p=0;null!==(l=a(s,u));){var h=String(l[0]);d[p]=h,""===h&&(s.lastIndex=o(u,i(s.lastIndex),f)),p++}return 0===p?null:d}]}))},function(e,t,r){"use strict";var n=r(3),i=r(10),o=r(6),a=r(20),c=r(84),s=r(56),u=Math.max,f=Math.min,l=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;r(57)("replace",2,(function(e,t,r,h){return[function(n,i){var o=e(this),a=null==n?void 0:n[t];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},function(e,t){var i=h(r,e,this,t);if(i.done)return i.value;var l=n(e),d=String(this),p="function"==typeof t;p||(t=String(t));var m=l.global;if(m){var b=l.unicode;l.lastIndex=0}for(var y=[];;){var g=s(l,d);if(null===g)break;if(y.push(g),!m)break;""===String(g[0])&&(l.lastIndex=c(d,o(l.lastIndex),b))}for(var _,S="",E=0,T=0;T<y.length;T++){g=y[T];for(var w=String(g[0]),O=u(f(a(g.index),d.length),0),C=[],P=1;P<g.length;P++)C.push(void 0===(_=g[P])?_:String(_));var R=g.groups;if(p){var I=[w].concat(C,O,d);void 0!==R&&I.push(R);var N=String(t.apply(void 0,I))}else N=v(w,d,O,C,R,t);O>=E&&(S+=d.slice(E,O)+N,E=O+w.length)}return S+d.slice(E)}];function v(e,t,n,o,a,c){var s=n+e.length,u=o.length,f=p;return void 0!==a&&(a=i(a),f=d),r.call(c,f,(function(r,i){var c;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(s);case"<":c=a[i.slice(1,-1)];break;default:var f=+i;if(0===f)return r;if(f>u){var d=l(f/10);return 0===d?r:d<=u?void 0===o[d-1]?i.charAt(1):o[d-1]+i.charAt(1):r}c=o[f-1]}return void 0===c?"":c}))}}))},function(e,t,r){"use strict";var n=r(3),i=r(96),o=r(56);r(57)("search",1,(function(e,t,r,a){return[function(r){var n=e(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=a(r,e,this);if(t.done)return t.value;var c=n(e),s=String(this),u=c.lastIndex;i(u,0)||(c.lastIndex=0);var f=o(c,s);return i(c.lastIndex,u)||(c.lastIndex=u),null===f?-1:f.index}]}))},function(e,t,r){"use strict";var n=r(76),i=r(3),o=r(49),a=r(84),c=r(6),s=r(56),u=r(83),f=r(2),l=Math.min,d=[].push,p="length",h=!f((function(){RegExp(4294967295,"y")}));r(57)("split",2,(function(e,t,r,f){var v;return v="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[p]||2!="ab".split(/(?:ab)*/)[p]||4!=".".split(/(.?)(.?)/)[p]||".".split(/()()/)[p]>1||"".split(/.?/)[p]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!n(e))return r.call(i,e,t);for(var o,a,c,s=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,h=void 0===t?4294967295:t>>>0,v=new RegExp(e.source,f+"g");(o=u.call(v,i))&&!((a=v.lastIndex)>l&&(s.push(i.slice(l,o.index)),o[p]>1&&o.index<i[p]&&d.apply(s,o.slice(1)),c=o[0][p],l=a,s[p]>=h));)v.lastIndex===o.index&&v.lastIndex++;return l===i[p]?!c&&v.test("")||s.push(""):s.push(i.slice(l)),s[p]>h?s.slice(0,h):s}:"0".split(void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}:r,[function(r,n){var i=e(this),o=null==r?void 0:r[t];return void 0!==o?o.call(r,i,n):v.call(String(i),r,n)},function(e,t){var n=f(v,e,this,t,v!==r);if(n.done)return n.value;var u=i(e),d=String(this),p=o(u,RegExp),m=u.unicode,b=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(h?"y":"g"),y=new p(h?u:"^(?:"+u.source+")",b),g=void 0===t?4294967295:t>>>0;if(0===g)return[];if(0===d.length)return null===s(y,d)?[d]:[];for(var _=0,S=0,E=[];S<d.length;){y.lastIndex=h?S:0;var T,w=s(y,h?d:d.slice(S));if(null===w||(T=l(c(y.lastIndex+(h?0:S)),d.length))===_)S=a(d,S,m);else{if(E.push(d.slice(_,S)),E.length===g)return E;for(var O=1;O<=w.length-1;O++)if(E.push(w[O]),E.length===g)return E;S=_=T}}return E.push(d.slice(_)),E}]}))},function(e,t,r){var n=r(1),i=r(85).set,o=n.MutationObserver||n.WebKitMutationObserver,a=n.process,c=n.Promise,s="process"==r(24)(a);e.exports=function(){var e,t,r,u=function(){var n,i;for(s&&(n=a.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(s)r=function(){a.nextTick(u)};else if(!o||n.navigator&&n.navigator.standalone)if(c&&c.resolve){var f=c.resolve(void 0);r=function(){f.then(u)}}else r=function(){i.call(n,u)};else{var l=!0,d=document.createTextNode("");new o(u).observe(d,{characterData:!0}),r=function(){d.data=l=!l}}return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){"use strict";var n=r(115),i=r(38);e.exports=r(60)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=n.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(i(this,"Map"),0===e?0:e,t)}},n,!0)},function(e,t,r){"use strict";var n=r(115),i=r(38);e.exports=r(60)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return n.def(i(this,"Set"),e=0===e?0:e,e)}},n)},function(e,t,r){"use strict";var n,i=r(1),o=r(23)(0),a=r(11),c=r(28),s=r(95),u=r(116),f=r(4),l=r(38),d=r(38),p=!i.ActiveXObject&&"ActiveXObject"in i,h=c.getWeak,v=Object.isExtensible,m=u.ufstore,b=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(e){if(f(e)){var t=h(e);return!0===t?m(l(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(l(this,"WeakMap"),e,t)}},g=e.exports=r(60)("WeakMap",b,y,u,!0,!0);d&&p&&(s((n=u.getConstructor(b,"WeakMap")).prototype,y),c.NEED=!0,o(["delete","has","get","set"],(function(e){var t=g.prototype,r=t[e];a(t,e,(function(t,i){if(f(t)&&!v(t)){this._f||(this._f=new n);var o=this._f[e](t,i);return"set"==e?this:o}return r.call(this,t,i)}))})))},function(e,t,r){"use strict";var n=r(116),i=r(38);r(60)("WeakSet",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return n.def(i(this,"WeakSet"),e,!0)}},n,!1,!0)},function(e,t,r){"use strict";var n=r(0),i=r(61),o=r(86),a=r(3),c=r(33),s=r(6),u=r(4),f=r(1).ArrayBuffer,l=r(49),d=o.ArrayBuffer,p=o.DataView,h=i.ABV&&f.isView,v=d.prototype.slice,m=i.VIEW;n(n.G+n.W+n.F*(f!==d),{ArrayBuffer:d}),n(n.S+n.F*!i.CONSTR,"ArrayBuffer",{isView:function(e){return h&&h(e)||u(e)&&m in e}}),n(n.P+n.U+n.F*r(2)((function(){return!new d(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(e,t){if(void 0!==v&&void 0===t)return v.call(a(this),e);for(var r=a(this).byteLength,n=c(e,r),i=c(void 0===t?r:t,r),o=new(l(this,d))(s(i-n)),u=new p(this),f=new p(o),h=0;n<i;)f.setUint8(h++,u.getUint8(n++));return o}}),r(42)("ArrayBuffer")},function(e,t,r){var n=r(0);n(n.G+n.W+n.F*!r(61).ABV,{DataView:r(86).DataView})},function(e,t,r){r(26)("Int8",1,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(26)("Uint8",1,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(26)("Uint8",1,(function(e){return function(t,r,n){return e(this,t,r,n)}}),!0)},function(e,t,r){r(26)("Int16",2,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(26)("Uint16",2,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(26)("Int32",4,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(26)("Uint32",4,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(26)("Float32",4,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){r(26)("Float64",8,(function(e){return function(t,r,n){return e(this,t,r,n)}}))},function(e,t,r){var n=r(0),i=r(19),o=r(3),a=(r(1).Reflect||{}).apply,c=Function.apply;n(n.S+n.F*!r(2)((function(){a((function(){}))})),"Reflect",{apply:function(e,t,r){var n=i(e),s=o(r);return a?a(n,t,s):c.call(n,t,s)}})},function(e,t,r){var n=r(0),i=r(34),o=r(19),a=r(3),c=r(4),s=r(2),u=r(97),f=(r(1).Reflect||{}).construct,l=s((function(){function e(){}return!(f((function(){}),[],e)instanceof e)})),d=!s((function(){f((function(){}))}));n(n.S+n.F*(l||d),"Reflect",{construct:function(e,t){o(e),a(t);var r=arguments.length<3?e:o(arguments[2]);if(d&&!l)return f(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(u.apply(e,n))}var s=r.prototype,p=i(c(s)?s:Object.prototype),h=Function.apply.call(e,p,t);return c(h)?h:p}})},function(e,t,r){var n=r(9),i=r(0),o=r(3),a=r(27);i(i.S+i.F*r(2)((function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,r){o(e),t=a(t,!0),o(r);try{return n.f(e,t,r),!0}catch(e){return!1}}})},function(e,t,r){var n=r(0),i=r(21).f,o=r(3);n(n.S,"Reflect",{deleteProperty:function(e,t){var r=i(o(e),t);return!(r&&!r.configurable)&&delete e[t]}})},function(e,t,r){"use strict";var n=r(0),i=r(3),o=function(e){this._t=i(e),this._i=0;var t,r=this._k=[];for(t in e)r.push(t)};r(104)(o,"Object",(function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}})),n(n.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,r){var n=r(21),i=r(36),o=r(14),a=r(0),c=r(4),s=r(3);a(a.S,"Reflect",{get:function e(t,r){var a,u,f=arguments.length<3?t:arguments[2];return s(t)===f?t[r]:(a=n.f(t,r))?o(a,"value")?a.value:void 0!==a.get?a.get.call(f):void 0:c(u=i(t))?e(u,r,f):void 0}})},function(e,t,r){var n=r(21),i=r(0),o=r(3);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return n.f(o(e),t)}})},function(e,t,r){var n=r(0),i=r(36),o=r(3);n(n.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,r){var n=r(0);n(n.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,r){var n=r(0),i=r(3),o=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},function(e,t,r){var n=r(0);n(n.S,"Reflect",{ownKeys:r(118)})},function(e,t,r){var n=r(0),i=r(3),o=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,r){var n=r(9),i=r(21),o=r(36),a=r(14),c=r(0),s=r(29),u=r(3),f=r(4);c(c.S,"Reflect",{set:function e(t,r,c){var l,d,p=arguments.length<4?t:arguments[3],h=i.f(u(t),r);if(!h){if(f(d=o(t)))return e(d,r,c,p);h=s(0)}if(a(h,"value")){if(!1===h.writable||!f(p))return!1;if(l=i.f(p,r)){if(l.get||l.set||!1===l.writable)return!1;l.value=c,n.f(p,r,l)}else n.f(p,r,s(0,c));return!0}return void 0!==h.set&&(h.set.call(p,c),!0)}})},function(e,t,r){var n=r(0),i=r(67);i&&n(n.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,r){r(281),e.exports=r(7).Array.includes},function(e,t,r){"use strict";var n=r(0),i=r(51)(!0);n(n.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(37)("includes")},function(e,t,r){r(283),e.exports=r(7).Array.flatMap},function(e,t,r){"use strict";var n=r(0),i=r(284),o=r(10),a=r(6),c=r(19),s=r(106);n(n.P,"Array",{flatMap:function(e){var t,r,n=o(this);return c(e),t=a(n.length),r=s(n,0),i(r,n,n,t,0,1,e,arguments[1]),r}}),r(37)("flatMap")},function(e,t,r){"use strict";var n=r(53),i=r(4),o=r(6),a=r(18),c=r(5)("isConcatSpreadable");e.exports=function e(t,r,s,u,f,l,d,p){for(var h,v,m=f,b=0,y=!!d&&a(d,p,3);b<u;){if(b in s){if(h=y?y(s[b],b,r):s[b],v=!1,i(h)&&(v=void 0!==(v=h[c])?!!v:n(h)),v&&l>0)m=e(t,r,h,o(h.length),m,l-1)-1;else{if(m>=9007199254740991)throw TypeError();t[m]=h}m++}b++}return m}},function(e,t,r){r(286),e.exports=r(7).String.padStart},function(e,t,r){"use strict";var n=r(0),i=r(119),o=r(59),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);n(n.P+n.F*a,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,r){r(288),e.exports=r(7).String.padEnd},function(e,t,r){"use strict";var n=r(0),i=r(119),o=r(59),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);n(n.P+n.F*a,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,r){r(290),e.exports=r(7).String.trimLeft},function(e,t,r){"use strict";r(40)("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},function(e,t,r){r(292),e.exports=r(7).String.trimRight},function(e,t,r){"use strict";r(40)("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},function(e,t,r){r(294),e.exports=r(63).f("asyncIterator")},function(e,t,r){r(91)("asyncIterator")},function(e,t,r){r(296),e.exports=r(7).Object.getOwnPropertyDescriptors},function(e,t,r){var n=r(0),i=r(118),o=r(16),a=r(21),c=r(79);n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,n=o(e),s=a.f,u=i(n),f={},l=0;u.length>l;)void 0!==(r=s(n,t=u[l++]))&&c(f,t,r);return f}})},function(e,t,r){r(298),e.exports=r(7).Object.values},function(e,t,r){var n=r(0),i=r(120)(!1);n(n.S,"Object",{values:function(e){return i(e)}})},function(e,t,r){r(300),e.exports=r(7).Object.entries},function(e,t,r){var n=r(0),i=r(120)(!0);n(n.S,"Object",{entries:function(e){return i(e)}})},function(e,t,r){"use strict";r(112),r(302),e.exports=r(7).Promise.finally},function(e,t,r){"use strict";var n=r(0),i=r(7),o=r(1),a=r(49),c=r(114);n(n.P+n.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),r="function"==typeof e;return this.then(r?function(r){return c(t,e()).then((function(){return r}))}:e,r?function(r){return c(t,e()).then((function(){throw r}))}:e)}})},function(e,t,r){r(304),r(305),r(306),e.exports=r(7)},function(e,t,r){var n=r(1),i=r(0),o=r(59),a=[].slice,c=/MSIE .\./.test(o),s=function(e){return function(t,r){var n=arguments.length>2,i=!!n&&a.call(arguments,2);return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,r)}};i(i.G+i.B+i.F*c,{setTimeout:s(n.setTimeout),setInterval:s(n.setInterval)})},function(e,t,r){var n=r(0),i=r(85);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,r){for(var n=r(82),i=r(32),o=r(11),a=r(1),c=r(15),s=r(41),u=r(5),f=u("iterator"),l=u("toStringTag"),d=s.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(p),v=0;v<h.length;v++){var m,b=h[v],y=p[b],g=a[b],_=g&&g.prototype;if(_&&(_[f]||c(_,f,d),_[l]||c(_,l,b),s[b]=d,y))for(m in n)_[m]||o(_,m,n[m],!0)}},function(e,t,r){var n=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r,n){var i=t&&t.prototype instanceof f?t:f,o=Object.create(i.prototype),a=new E(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return w()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var c=g(a,r);if(c){if(c===u)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var f=s(e,t,r);if("normal"===f.type){if(n=r.done?"completed":"suspendedYield",f.arg===u)continue;return{value:f.arg,done:r.done}}"throw"===f.type&&(n="completed",r.method="throw",r.arg=f.arg)}}}(e,r,a),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function f(){}function l(){}function d(){}var p={};p[i]=function(){return this};var h=Object.getPrototypeOf,v=h&&h(h(T([])));v&&v!==t&&r.call(v,i)&&(p=v);var m=d.prototype=f.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function y(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,c){var u=s(e[i],e,o);if("throw"!==u.type){var f=u.arg,l=f.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(l).then((function(e){f.value=e,a(f)}),(function(e){return n("throw",e,a,c)}))}c(u.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function g(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,g(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:w}}function w(){return{value:void 0,done:!0}}return l.prototype=m.constructor=d,d.constructor=l,d[a]=l.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},b(y.prototype),y.prototype[o]=function(){return this},e.AsyncIterator=y,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new y(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(m),m[a]="Generator",m[i]=function(){return this},m.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=T,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},function(e,t,r){r(309),e.exports=r(121).global},function(e,t,r){var n=r(310);n(n.G,{global:r(87)})},function(e,t,r){var n=r(87),i=r(121),o=r(311),a=r(313),c=r(320),s=function(e,t,r){var u,f,l,d=e&s.F,p=e&s.G,h=e&s.S,v=e&s.P,m=e&s.B,b=e&s.W,y=p?i:i[t]||(i[t]={}),g=y.prototype,_=p?n:h?n[t]:(n[t]||{}).prototype;for(u in p&&(r=t),r)(f=!d&&_&&void 0!==_[u])&&c(y,u)||(l=f?_[u]:r[u],y[u]=p&&"function"!=typeof _[u]?r[u]:m&&f?o(l,n):b&&_[u]==l?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):v&&"function"==typeof l?o(Function.call,l):l,v&&((y.virtual||(y.virtual={}))[u]=l,e&s.R&&g&&!g[u]&&a(g,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,r){var n=r(312);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){var n=r(314),i=r(319);e.exports=r(89)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(315),i=r(316),o=r(318),a=Object.defineProperty;t.f=r(89)?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(88);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){e.exports=!r(89)&&!r(122)((function(){return 7!=Object.defineProperty(r(317)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,r){var n=r(88),i=r(87).document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,r){var n=r(88);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){"use strict";var n=r(13),i=r(123),o=r(322),a=r(129);function c(e){var t=new o(e),r=i(o.prototype.request,t);return n.extend(r,o.prototype,t),n.extend(r,t),r}var s=c(r(126));s.Axios=o,s.create=function(e){return c(a(s.defaults,e))},s.Cancel=r(130),s.CancelToken=r(336),s.isCancel=r(125),s.all=function(e){return Promise.all(e)},s.spread=r(337),e.exports=s,e.exports.default=s},function(e,t,r){"use strict";var n=r(13),i=r(124),o=r(323),a=r(324),c=r(129);function s(e){this.defaults=e,this.interceptors={request:new o,response:new o}}s.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=c(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},s.prototype.getUri=function(e){return e=c(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){s.prototype[e]=function(t,r){return this.request(n.merge(r||{},{method:e,url:t}))}})),n.forEach(["post","put","patch"],(function(e){s.prototype[e]=function(t,r,i){return this.request(n.merge(i||{},{method:e,url:t,data:r}))}})),e.exports=s},function(e,t,r){"use strict";var n=r(13);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,r){"use strict";var n=r(13),i=r(325),o=r(125),a=r(126);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return c(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(c(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,r){"use strict";var n=r(13);e.exports=function(e,t,r){return n.forEach(r,(function(r){e=r(e,t)})),e}},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var s,u=[],f=!1,l=-1;function d(){f&&s&&(f=!1,s.length?u=s.concat(u):l=-1,u.length&&p())}function p(){if(!f){var e=c(d);f=!0;for(var t=u.length;t;){for(s=u,u=[];++l<t;)s&&s[l].run();l=-1,t=u.length}s=null,f=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new h(e,t)),1!==u.length||f||c(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";var n=r(13);e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},function(e,t,r){"use strict";var n=r(128);e.exports=function(e,t,r){var i=r.config.validateStatus;!i||i(r.status)?e(r):t(n("Request failed with status code "+r.status,r.config,null,r.request,r))}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,r){"use strict";var n=r(331),i=r(332);e.exports=function(e,t){return e&&!n(t)?i(e,t):t}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var n=r(13),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,o,a={};return e?(n.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=n.trim(e.substr(0,o)).toLowerCase(),r=n.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([r]):a[t]?a[t]+", "+r:r}})),a):a}},function(e,t,r){"use strict";var n=r(13);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=i(window.location.href),function(t){var r=n.isString(t)?i(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var n=r(13);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,i,o,a){var c=[];c.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&c.push("expires="+new Date(r).toGMTString()),n.isString(i)&&c.push("path="+i),n.isString(o)&&c.push("domain="+o),!0===a&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";var n=r(130);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"shimGetUserMedia",(function(){return he})),r.d(n,"shimGetDisplayMedia",(function(){return ve})),r.d(n,"shimMediaStream",(function(){return me})),r.d(n,"shimOnTrack",(function(){return be})),r.d(n,"shimGetSendersWithDtmf",(function(){return ye})),r.d(n,"shimGetStats",(function(){return ge})),r.d(n,"shimSenderReceiverGetStats",(function(){return _e})),r.d(n,"shimAddTrackRemoveTrackWithNative",(function(){return Se})),r.d(n,"shimAddTrackRemoveTrack",(function(){return Ee})),r.d(n,"shimPeerConnection",(function(){return Te})),r.d(n,"fixNegotiationNeeded",(function(){return we}));var i={};r.r(i),r.d(i,"shimGetUserMedia",(function(){return Pe})),r.d(i,"shimGetDisplayMedia",(function(){return Re})),r.d(i,"shimPeerConnection",(function(){return Ie})),r.d(i,"shimReplaceTrack",(function(){return Ne}));var o={};r.r(o),r.d(o,"shimGetUserMedia",(function(){return Ae})),r.d(o,"shimGetDisplayMedia",(function(){return ke})),r.d(o,"shimOnTrack",(function(){return De})),r.d(o,"shimPeerConnection",(function(){return xe})),r.d(o,"shimSenderGetStats",(function(){return je})),r.d(o,"shimReceiverGetStats",(function(){return Me})),r.d(o,"shimRemoveStream",(function(){return Le})),r.d(o,"shimRTCDataChannel",(function(){return Ue})),r.d(o,"shimAddTransceiver",(function(){return Fe})),r.d(o,"shimCreateOffer",(function(){return Ve})),r.d(o,"shimCreateAnswer",(function(){return Ge}));var a={};r.r(a),r.d(a,"shimLocalStreamsAPI",(function(){return Be})),r.d(a,"shimRemoteStreamsAPI",(function(){return We})),r.d(a,"shimCallbacksAPI",(function(){return He})),r.d(a,"shimGetUserMedia",(function(){return Ye})),r.d(a,"shimConstraints",(function(){return Ke})),r.d(a,"shimRTCIceServerUrls",(function(){return ze})),r.d(a,"shimTrackEventTransceiver",(function(){return Je})),r.d(a,"shimCreateOfferLegacy",(function(){return Xe}));var c={};r.r(c),r.d(c,"shimRTCIceCandidate",(function(){return Qe})),r.d(c,"shimMaxMessageSize",(function(){return Ze})),r.d(c,"shimSendThrowTypeError",(function(){return et})),r.d(c,"shimConnectionState",(function(){return tt})),r.d(c,"removeAllowExtmapMixed",(function(){return rt}));var s,u,f,l,d,p,h,v,m={SDK_VERSION:"",PROCESS_ID:"",WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-ap-web-2.agoraio.cn"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-ap-web-4.agoraio.cn"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-2.agoraio.cn","cds-ap-web-3.agora.io","cds-ap-web-4.agoraio.cn"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-2.agoraio.cn","sua-ap-web-3.agora.io","sua-ap-web-4.agoraio.cn"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-2.agoraio.cn","uap-ap-web-3.agora.io","uap-ap-web-4.agoraio.cn"],GATEWAY_ADDRESS:"http://101.133.215.203:6080",GATEWAY_CONNECT_TIMEOUT:1e3,GATEWAY_ERTRY_TIMEOUT:12e5,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"webcollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"webcollector-2.agoraio.cn",WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,HTTP_CONNECT_TIMEOUT:5e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_TIMEOUT:1e4,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],FILEPATH_LENMAX:255,SUBSCRIBE_TCC:!1,PING_PONG_TIME_OUT:10,DUALSTREAM_OPERATION_CHECK:!0,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:1e3,MEDIA_ELEMENT_EXISTS_DEPTH:3,CANDIDATE_TIMEOUT:2e3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,SHOW_REPORT_INVOKER_LOG:!1,STATS_FILTER:{transportId:!0,googTrackId:!0},JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:200,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:200,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3};!function(e){e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS_X="Mac OS X",e.MAC_OS="Mac OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot"}(s||(s={})),function(e){e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED",e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED"}(u||(u={})),function(e){e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED"}(f||(f={})),function(e){e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE",e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING"}(l||(l={})),function(e){e.CHANNEL_BANNED="CHANNEL_BANNED",e.IP_BANNED="IP_BANNED",e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED"}(d||(d={})),function(e){e[e.AUDIO_ONLY=2]="AUDIO_ONLY",e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM"}(p||(p={})),function(e){e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM"}(h||(h={})),function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_SUPPORT="NOT_SUPPORT",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORT="OPERATION_ABORT",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOTE_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.STREAM_ALREADY_INITIALIZED="STREAM_ALREADY_INITIALIZED",e.STREAM_IS_CLOSED="STREAM_IS_CLOSED",e.ABORT_OTHER_INIT="ABORT_OTHER_INIT",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.CAN_NOT_AUTOPLAY="CAN_NOT_AUTOPLAY",e.HIGH_STREAM_NO_VIDEO_TRACK="HIGH_STREAM_NO_VIDEO_TRACK",e.SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM="SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM",e.TOKEN_GENERATOR_FUNCTION_ERROR="TOKEN_GENERATOR_FUNCTION_ERROR",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.UID_CONFLICT="UID_CONFLICT",e.TRACK_ALREADY_PUBLISHED="TRACK_ALREADY_PUBLISHED",e.TRACK_IS_NOT_PUBLISHED="TRACK_IS_NOT_PUBLISHED",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.TRACK_IS_NOT_SUBSCRIBED="TRACK_IS_NOT_SUBSCRIBED",e.SUBSCRIPTION_IS_IN_PROGRESS="SUBSCRIPTION_IS_IN_PROGRESS",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.EFFECT_ID_CONFLICTED="EFFECT_ID_CONFLICTED",e.EFFECT_SOUND_ID_NOT_FOUND="EFFECT_SOUND_ID_NOT_FOUND",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER="CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER",e.REQUEST_TO_LIVE_STREAMING_WORKER_FAILED="REQUEST_TO_LIVE_STREAMING_WORKER_FAILED",e.PUSH_RTMP_URL_CONFLICT="PUSH_RTMP_URL_CONFLICT",e.PULL_URL_CONFLICT="PULL_URL_CONFLICT",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE"}(v||(v={}));var b=r(131),y=new(r.n(b).a);y.setLogLevel(y.DEBUG);var g,_,S=y,E=Array.prototype,T=function(){function e(){Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"addListener",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.addListener=this.on}return Object.defineProperty(e.prototype,"getListeners",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._events[e]?E.map.call(this._events[e],(function(e){return e.listener})):[]}}),Object.defineProperty(e.prototype,"on",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._events[e]||(this._events[e]=[]);var r=this._events[e];-1===this._indexOfListener(r,t)&&r.push({listener:t,once:!1})}}),Object.defineProperty(e.prototype,"once",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._events[e]||(this._events[e]=[]);var r=this._events[e];-1===this._indexOfListener(r,t)&&r.push({listener:t,once:!0})}}),Object.defineProperty(e.prototype,"off",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._events[e]||(this._events[e]=[]);var r=this._events[e],n=this._indexOfListener(r,t);-1!==n&&E.splice.call(r,n,1)}}),Object.defineProperty(e.prototype,"removeAllListeners",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e?delete this._events[e]:this._events={}}}),Object.defineProperty(e.prototype,"emit",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._events[e]||(this._events[e]=[]);for(var n=this._events[e],i=0;i<n.length;i+=1){var o=n[i];o.once&&this.off(e,o.listener),o.listener.apply(this,t||[])}}}),Object.defineProperty(e.prototype,"_indexOfListener",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){for(var r=e.length;r--;)if(e[r].listener===t)return r;return-1}}),e}(),w=function(e){var t=e;void 0===t&&(t=7);var r=Math.random().toString(16).substr(2,t).toLowerCase();return r.length===t?r:r+w(t-r.length)},O=(g=function(e,t){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),C=function(e){function t(t){var r=e.call(this)||this;Object.defineProperty(r,"_appId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(r,"_serverUrl",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(r,"_serverPort",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"_connectBeginTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_revState",{enumerable:!0,configurable:!0,writable:!0,value:"DISCONNECTED"}),Object.defineProperty(r,"_curState",{enumerable:!0,configurable:!0,writable:!0,value:"DISCONNECTED"}),Object.defineProperty(r,"_webSocket",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_userId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"handleGateWayEvent",{enumerable:!0,configurable:!0,writable:!0,value:function(){}});var n=r;return t&&t.appId&&(n._appId=t.appId),r}return O(t,e),Object.defineProperty(t.prototype,"setAppInfo",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.appId;this._appId=t}}),Object.defineProperty(t.prototype,"configServer",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._serverUrl=e,this._serverPort=t}}),Object.defineProperty(t.prototype,"connectCTS",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;return new Promise((function(r,n){if(!t._connectBeginTime&&(t._connectBeginTime=Date.now()),t._webSocket)return S.error("[connectCTS] alreadly connected."),!1;var i="ws://"+t._serverUrl+":"+t._serverPort,o=new WebSocket(i);t._webSocket=o,t._emitConnectionState("CONNECTING",t._revState),o.onopen=function(){S.info(" serve connected..."),t._connectBeginTime=void 0,t._emitConnectionState("CONNECTED",t._revState),t.doOnline(e)},o.onclose=function(e){S.info(" serve disconnected...",e.code),"RECONNECTING"!==t._curState&&t._emitConnectionState("DISCONNECTING",t._revState),1e3===e.code?"RECONNECTING"!==t._curState&&t._emitConnectionState("DISCONNECTING",t._revState,d.LEAVE):"RECONNECTING"!==t._curState&&t._emitConnectionState("RECONNECTING",t._revState),t._webSocket=null,n()},t._webSocket.onerror=function(e){S.error("WebSocket with some error ",e)},o.onmessage=function(e){var n=JSON.parse(e.data),i=n.Cmd,o=(n.Encrypt,n.Content),a=JSON.parse(o),c=a.Code;switch(i){case"Online":if(0===c){var s=a.UserId;t._userId=s,r(t._userId)}break;default:t.handleGateWayEvent&&t.handleGateWayEvent(i,a)}}}))}}),Object.defineProperty(t.prototype,"doOnline",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"Online"};t.AppId=this._appId,t.Content=JSON.stringify(Object.assign({},e)),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"doOffline",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"Offline"};t.Content=JSON.stringify({UserId:this._userId,UserSId:e}),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"doPublish",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"DoPublish"},r={StreamId:this._userId,ClientType:"sdk"};"[object Object]"===Object.prototype.toString.call(e)&&(r.AVSetting=JSON.stringify(Object.assign({HasAudio:!0,HasVideo:!0},e))),t.Content=JSON.stringify(r),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"doRePublish",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"DoRePublish"},r={StreamId:this._userId,ClientType:"sdk"};"[object Object]"===Object.prototype.toString.call(e)&&(r.AVSetting=JSON.stringify(Object.assign({HasAudio:!0,HasVideo:!0},e))),t.Content=JSON.stringify(r),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"doPublishS",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e={Cmd:"DoPublishS"},t={StreamId:this._userId};e.Content=JSON.stringify(t),this._sendMessage(e)}}),Object.defineProperty(t.prototype,"doUnPublish",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e={Cmd:"DoUnPublish"};e.Content=JSON.stringify({StreamId:this._userId}),this._sendMessage(e)}}),Object.defineProperty(t.prototype,"doUnPublishS",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e={Cmd:"DoUnPublishS"};e.Content=JSON.stringify({StreamId:this._userId}),this._sendMessage(e)}}),Object.defineProperty(t.prototype,"doSubscribe",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"DoSubscribe"};t.Content=JSON.stringify(Object.assign({SubSessId:w(32)},e)),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"doUnSubscribe",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"DoUnSubscribe"};t.Content=JSON.stringify(Object.assign({StreamId:e})),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"sendAnswer",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n={Cmd:"Answer"},i={StreamId:e,Sdp:t};void 0!==r&&(i.SubStream=r),n.Content=JSON.stringify(i),this._sendMessage(n)}}),Object.defineProperty(t.prototype,"sendIceCandidate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n={Cmd:"Ice"},i={StreamId:e,Sdp:t};void 0!==r&&(i.SubStream=r),n.Content=JSON.stringify(i),this._sendMessage(n)}}),Object.defineProperty(t.prototype,"setClientRole",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"ChanMsg"};t.Content=JSON.stringify({Cmd:"SetRole",UserId:this._userId,Role:e,ToSvr:"MNode"}),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"enableDualStream",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"ChanMsg"};t.Content=JSON.stringify({Cmd:"DualStream",UserId:this._userId,Enable:e,ToSvr:"MNode"}),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"setAVStatus",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n={Cmd:"ChanMsg"};n.Content=JSON.stringify({Cmd:"SetAVStatus",StreamId:e,RecvAudio:t,RecvVideo:r,ToSvr:"GNode"}),this._sendMessage(n)}}),Object.defineProperty(t.prototype,"setRemoteVStrmType",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r={Cmd:"ChanMsg"};r.Content=JSON.stringify({Cmd:"SetRemoteVStrmType",UserId:this._userId,StreamId:e,StrmType:t,ToSvr:"GNode"}),this._sendMessage(r)}}),Object.defineProperty(t.prototype,"ReportAVStat",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.TimeUsed;var t=e.AudNum,r=e.VidSize,n={Cmd:"ReportAVStat",TimeUsed:0};n.AudNum=t,n.VidSize=r,n.AudBitrate=0,n.VidBitrate=0,n.Content="",this._sendMessage(n)}}),Object.defineProperty(t.prototype,"enableLocalVideo",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"ChanMsg"};t.Content=JSON.stringify({Cmd:"EnableLocalVideo",UserId:this._userId,Enable:e,ToSvr:"MNode"}),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"enableLocalAudio",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"ChanMsg"};t.Content=JSON.stringify({Cmd:"EnableLocalAudio",UserId:this._userId,Enable:e,ToSvr:"MNode"}),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"muteLocalVideoStream",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"ChanMsg"};t.Content=JSON.stringify({Cmd:"MuteLocalVideoStream",UserId:this._userId,Mute:e,ToSvr:"MNode"}),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"muteLocalAudioStream",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={Cmd:"ChanMsg"};t.Content=JSON.stringify({Cmd:"MuteLocalAudioStream",UserId:this._userId,Mute:e,ToSvr:"MNode"}),this._sendMessage(t)}}),Object.defineProperty(t.prototype,"disconnectCTS",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._webSocket&&this._webSocket.close(),this._webSocket=null}}),Object.defineProperty(t.prototype,"clearEventEmitter",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.removeAllListeners()}}),Object.defineProperty(t.prototype,"_sendMessage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return"object"!=typeof e?(S.error("[_sendMessage] msg must be object."),!1):(this._webSocket&&this._webSocket.send(JSON.stringify(e)),!0)}}),Object.defineProperty(t.prototype,"_emitGateWayEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.emit("@gateway_events",{type:e,data:t})}}),Object.defineProperty(t.prototype,"_emitConnectionState",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){e!==this._revState&&("RECONNECTING"===this._curState&&"CONNECTED"!==e||(this.handleGateWayEvent&&this.handleGateWayEvent("connection-state-change",{curState:e,revState:t,reason:r}),this._curState=e,this._revState=e,S.debug("["+this._userId+"] connection state change: "+t+" -> "+e)))}}),t}(T);!function(e){e.CONNECTION_STATE_CHANGE="@connectionStateChange",e.ICE_CONNECTION_STATE_CHANGE="@iceConnectionStateChange",e.ICE_CANDIDATE="@iceCandidate",e.CREATE_ANSWER="@createAnswer",e.TRACK_ADDED="@trackAdded",e.RTC_NEED_RENEGOTIATE="@need_renegotiate",e.TRACK_ENDED="track-ened",e.FIRST_FRAME_DECODED="first-frame-decoded",e.UPDATE_MUTE_STATE="@updateMuteState",e.VIDEO_SIZE_CHANGE="video-resize",e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.ON_PUBLISH="DoPublish",e.ON_PUBLISH_EX="DoPublishS",e.ON_RE_PUBLISH="DoRePublish",e.ON_SUBSCRIBE="DoSubscribe",e.ON_ICE="Ice",e.ON_CHANNEL_MESSAGE="ChanMsg",e.ON_CHANNEL_USER_ONLINE="B_UserOnline",e.ON_CHANNEL_USER_OFFLINE="B_UserOffline",e.ON_CHANNEL_SET_USER_ROLE="SetRole",e.ON_CHANNEL_DUALSTREAM_ENABLE="DualStream",e.ON_CHANNEL_USER_STREAM_OPEN="B_StreamOpen",e.ON_CHANNEL_USER_STREAM_CLOSE="B_StreamClose",e.ON_CHANNEL_USER_ENABLE_VIDEO="EnableLocalVideo",e.ON_CHANNEL_USER_ENABLE_AUDIO="EnableLocalAudio",e.ON_CHANNEL_USER_MUTE_VIDEO="MuteLocalVideoStream",e.ON_CHANNEL_USER_MUTE_AUDIO="MuteLocalAudioStream"}(_||(_={}));var P,R=_,I=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ArRTCException"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=e;var n="ArRTCError".concat(" ").concat(this.code,": ");this.message=t[0]?n.concat(t[0]):n,this.data=t[1]?t[1]:{}},N=r(132),A=r.n(N),k=function(){return(k=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},D=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},x=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};!function(e){var t,r;function n(e,t){return D(this,void 0,void 0,(function(){return x(this,(function(n){switch(n.label){case 0:return[4,r.post(e,k({},t)).then((function(e){return e.data})).catch((function(e){var t=e.config;return"ECONNABORTED"!==e.code||-1===e.message.indexOf("timeout")||t._retry?Promise.resolve({code:-1,msg:e.message}):Promise.resolve({code:-1,msg:"timeout"})}))];case 1:return[2,n.sent()]}}))}))}e.joinGateway=function(e){return new Promise((function(i,o){t=m.GATEWAY_ADDRESS,r=A.a.create({baseURL:t,timeout:m.GATEWAY_CONNECT_TIMEOUT});var a="/arapi/v1?action=".concat("wrtc_gateway"),c={opid:133,ts:Date.now()};!function t(){return Promise.race([n(a,k(k({},c),e)),n(a,k(k({},c),e))]).then((function(e){0===e.code?i(e):setTimeout((function(){t()}),m.GATEWAY_CONNECT_TIMEOUT)})).catch((function(e){throw new I(v.CAN_NOT_GET_GATEWAY_SERVER,e)}))}()}))}}(P||(P={}));var j,M=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),L=function(e){function t(t,r){var n=e.call(this)||this;return Object.defineProperty(n,"_ID",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_originMediaStreamTrack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_mediaStreamTrack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"trackMediaType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._ID=r||w(8),n._originMediaStreamTrack=t,n._mediaStreamTrack=t,n}return M(t,e),Object.defineProperty(t.prototype,"getTrackId",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._ID}}),Object.defineProperty(t.prototype,"getMediaStreamTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._mediaStreamTrack}}),t}(T),U=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),F=function(e){function t(t,r){var n=e.call(this,t,r)||this;Object.defineProperty(n,"trackMediaType",{enumerable:!0,configurable:!0,writable:!0,value:void 0});n.getMediaStreamTrack();return n}return U(t,e),t}(L),V=["play","playing","loadeddata","canplay","pause","resize","stalled","suspend","waiting"];!function(e){e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed"}(j||(j={}));var G=function(){function e(e){Object.defineProperty(this,"_videoElementStatus",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"videoElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"slot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trackId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"videoTrack",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"videoElementCheckInterval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"handleVideoEvents",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(this,"startGetVideoDimensions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFirstVideoFrameDecoded",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(this,"onVideoSizeChange",{enumerable:!0,configurable:!0,writable:!0,value:function(){}});var t=this;this.videoElementStatus=j.NONE,this.handleVideoEvents=function(e){switch(e.type){case"play":case"playing":t.startGetVideoDimensions(),t.videoElementStatus=j.PLAYING;break;case"loadeddata":t.onFirstVideoFrameDecoded&&t.onFirstVideoFrameDecoded();break;case"canplay":t.videoElementStatus=j.CANPLAY;break;case"resize":var r=this.videoWidth,n=this.videoWidth;S.debug("video resize => "+r+" * "+n);break;case"stalled":t.videoElementStatus=j.STALLED;break;case"suspend":t.videoElementStatus=j.SUSPEND;break;case"pause":t.videoElementStatus=j.PAUSED;break;case"waiting":t.videoElementStatus=j.WAITING}},this.startGetVideoDimensions=function(){!function e(){t.videoElement&&(4<t.videoElement.videoWidth*t.videoElement.videoHeight?S.debug("[".concat(t.trackId,"] video dimensions:"),t.videoElement.videoWidth,t.videoElement.videoHeight):setTimeout(e,50))}()},this.slot=e.element||document.body,this.trackId=e.trackId,this.updateConfig(e)}return Object.defineProperty(e.prototype,"videoElementStatus",{get:function(){return this._videoElementStatus},set:function(e){this._videoElementStatus=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateConfig",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.config=e,this.trackId=e.trackId;var t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}}),Object.defineProperty(e.prototype,"createElements",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;this.container||(this.container=document.createElement("div")),(e=this.container).id="artc-video-player-".concat(this.trackId),e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this.videoTrack?(e.style.backgroundColor="black",this.createVideoElement(),e.appendChild(this.videoElement)):(this.removeVideoElement(),this.slot.appendChild(this.container))}}),Object.defineProperty(e.prototype,"createVideoElement",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;e.videoElement||(e.videoElementStatus=j.INIT,e.videoElement=document.createElement("video"),e.videoElement.onerror=function(){return e.videoElementStatus=j.ERROR},e.container&&e.container.appendChild(e.videoElement),V.forEach((function(t){e.videoElement&&e.videoElement.addEventListener(t,e.handleVideoEvents)})),e.videoElementCheckInterval=window.setInterval((function(){!document.getElementById("video_".concat(e.trackId))&&e.videoElement&&(e.videoElementStatus=j.DESTROYED)}),1e3)),e.videoElement.id="video_".concat(e.trackId),e.videoElement.className="artc_video_player",e.videoElement.style.width="100%",e.videoElement.style.height="100%",e.videoElement.style.position="absolute",e.videoElement.setAttribute("autoplay",""),e.videoElement.autoplay=!0,e.videoElement.controls=!1,e.videoElement.setAttribute("playsinline",""),e.config.mirror&&(e.videoElement.style.transform="rotateY(180deg)"),e.config.fit?e.videoElement.style.objectFit=e.config.fit:e.videoElement.style.objectFit="cover",e.videoElement.setAttribute("muted",""),e.videoElement.muted=!0,e.videoElement.srcObject&&e.videoElement.srcObject instanceof MediaStream?e.videoElement.srcObject.getVideoTracks()[0]!==e.videoTrack&&(e.videoElement.srcObject=e.videoTrack?new MediaStream([e.videoTrack]):null):e.videoElement.srcObject=e.videoTrack?new MediaStream([e.videoTrack]):null,e.videoElement.play()}}),Object.defineProperty(e.prototype,"removeVideoElement",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;e.videoElement&&(V.forEach((function(t){e.videoElement&&e.videoElement.removeEventListener(t,e.handleVideoEvents)})),e.videoElementCheckInterval&&(window.clearInterval(e.videoElementCheckInterval),e.videoElementCheckInterval=void 0),e.container&&e.container.removeChild(e.videoElement),e.videoElement=void 0,e.videoElementStatus=j.NONE)}}),Object.defineProperty(e.prototype,"updateVideoTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}}),Object.defineProperty(e.prototype,"play",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(this.videoElement){var t=this.videoElement.play();t&&t.catch&&t.catch((function(t){S.warning("[".concat(e.trackId,"] play warning: "),t)}))}}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.videoElement&&(this.videoElement.srcObject=null,this.videoElement=void 0,S.info("[[track-"+this.trackId+"] is destroyed]")),this.container&&(this.slot.removeChild(this.container),this.container=void 0)}}),e}(),B=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),W=function(e){function t(t,r){var n=e.call(this,t,r)||this;return Object.defineProperty(n,"trackMediaType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_player",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.trackMediaType="video",n}return B(t,e),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return!!this._player},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"play",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=void 0!==t&&"[object Object]"===Object.prototype.toString.call(t)?t:{};if("string"==typeof e){var n=void 0,i=document.getElementById(e);i?e=i:(n="[track-".concat(this.getTrackId(),'] can not find "#'),S.warning(n.concat(e,'" element, use document.body')),e=document.body)}S.debug("[track-".concat(this.getTrackId(),"] play"));var o=Object.assign({},{},r,{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(o):(this._player=new G(o),this._player.updateVideoTrack(this._mediaStreamTrack)),"playing"!==this._player._playervideoElementStatus&&this._player.play()}}),Object.defineProperty(t.prototype,"stop",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._player&&(this._player.destroy(),this._player=void 0)}}),t}(F);function H(e,t,r){return{sampleRate:e,stereo:t,bitrate:r}}function Y(e,t,r,n,i,o){return{width:e,height:t,frameRate:r||n?{ideal:r,max:n}:void 0,bitrateMin:i,bitrateMax:o}}var K={"90p":Y(160,90),"90p_1":Y(160,90),"120p":Y(160,120,15,15,30,65),"120p_1":Y(160,120,15,15,30,65),"120p_3":Y(120,120,15,15,30,50),"120p_4":Y(212,120),"180p":Y(320,180,15,15,30,140),"180p_1":Y(320,180,15,15,30,140),"180p_3":Y(180,180,15,15,30,100),"180p_4":Y(240,180,15,15,30,120),"240p":Y(320,240,15,15,40,200),"240p_1":Y(320,240,15,15,40,200),"240p_3":Y(240,240,15,15,40,140),"240p_4":Y(424,240,15,15,40,220),"360p":Y(640,360,15,15,80,400),"360p_1":Y(640,360,15,15,80,400),"360p_3":Y(360,360,15,15,80,260),"360p_4":Y(640,360,30,30,80,600),"360p_6":Y(360,360,30,30,80,400),"360p_7":Y(480,360,15,15,80,320),"360p_8":Y(480,360,30,30,80,490),"360p_9":Y(640,360,15,15,80,800),"360p_10":Y(640,360,24,24,80,800),"360p_11":Y(640,360,24,24,80,1e3),"480p":Y(640,480,15,15,100,500),"480p_1":Y(640,480,15,15,100,500),"480p_2":Y(640,480,30,30,100,1e3),"480p_3":Y(480,480,15,15,100,400),"480p_4":Y(640,480,30,30,100,750),"480p_6":Y(480,480,30,30,100,600),"480p_8":Y(848,480,15,15,100,610),"480p_9":Y(848,480,30,30,100,930),"480p_10":Y(640,480,10,10,100,400),"720p":Y(1280,720,15,15,120,1130),"720p_1":Y(1280,720,15,15,120,1130),"720p_2":Y(1280,720,30,30,120,2e3),"720p_3":Y(1280,720,30,30,120,1710),"720p_5":Y(960,720,15,15,120,910),"720p_6":Y(960,720,30,30,120,1380),"1080p":Y(1920,1080,15,15,120,2080),"1080p_1":Y(1920,1080,15,15,120,2080),"1080p_2":Y(1920,1080,30,30,120,3e3),"1080p_3":Y(1920,1080,30,30,120,3150),"1080p_5":Y(1920,1080,60,60,120,4780),"1440p":Y(2560,1440,30,30,120,4850),"1440p_1":Y(2560,1440,30,30,120,4850),"1440p_2":Y(2560,1440,60,60,120,7350),"4k":Y(3840,2160,30,30,120,8910),"4k_1":Y(3840,2160,30,30,120,8910),"4k_3":Y(3840,2160,60,60,120,13500)},z={"480p":Y(640,480,1,5),"480p_1":Y(640,480,1,5),"480p_2":Y(640,480,25,30),"720p":Y(1280,720,1,5),"720p_1":Y(1280,720,1,5),"720p_2":Y(1280,720,25,30),"1080p":Y(1920,1080,1,5),"1080p_1":Y(1920,1080,1,5),"1080p_2":Y(1920,1080,25,30)},J={speech_low_quality:H(16e3,!1,void 0),speech_standard:H(32e3,!1,18),music_standard:H(48e3,!1,void 0),standard_stereo:H(48e3,!0,56),high_quality:H(48e3,!1,128),high_quality_stereo:H(48e3,!0,192)},X={},q=function(){return function(){var e=void 0,t=navigator.userAgent,r=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];"Chrome"===r[1]&&null!=(e=t.match(/(OPR(?=\/))\/?(\d+)/i))&&(r=e),"Safari"===r[1]&&null!=(e=t.match(/version\/(\d+)/i))&&(r[2]=e[1]),~t.toLowerCase().indexOf("qqbrowser")&&null!=(e=t.match(/(qqbrowser(?=\/))\/?(\d+)/i))&&(r=e),~t.toLowerCase().indexOf("micromessenger")&&null!=(e=t.match(/(micromessenger(?=\/))\/?(\d+)/i))&&(r=e),~t.toLowerCase().indexOf("edge")&&null!=(e=t.match(/(edge(?=\/))\/?(\d+)/i))&&(r=e),~t.toLowerCase().indexOf("trident")&&null!=(e=/\brv[ :]+(\d+)/g.exec(t)||[])&&(r=[null,"IE",e[1]]);var n=void 0,i=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var o in i){var a=i[o];if(a.r.test(navigator.userAgent)){n=a.s;break}}return{name:r[1],version:r[2],os:n}}()},$=function(){return q().os};X.getBrowserInfo=q,X.getBrowserOS=$,X.isChrome=function(){var e=q();return e.name&&"Chrome"===e.name},X.isSafari=function(){var e=q();return e.name&&"Safari"===e.name},X.isEdge=function(){var e=q();return e.name&&"Edge"===e.name},X.isFireFox=function(){var e=q();return e.name&&"Firefox"===e.name},X.isOpera=function(){var e=q();return e.name&&"OPR"===e.name},X.isQQBrowser=function(){var e=q();return e.name&&"QQBrowser"===e.name},X.isWeChatBrowser=function(){var e=q();return e.name&&"MicroMessenger"===e.name},X.isSupportedPC=function(){var e=$();return"Linux"===e||"Mac OS X"===e||"Mac OS"===e||-1!==e.indexOf("Windows")},X.isSupportedMobile=function(){var e=$();return"Android"===e||"iOS"===e},X.getBrowserVersion=function(){return q().version},X.isChromeKernel=function(){return!!navigator.userAgent.match(/chrome\/[\d]./i)},X.isLegacyChrome=function(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35};var Q,Z=X;!function(e){var t=!0;Z.getBrowserInfo().os!==s.IOS&&"MicroMessenger"!==Z.getBrowserInfo().name||(t=!1);var r=!1;navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)||(r=!0),e.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),e.getStreamFromExtension="Chrome"===Z.getBrowserInfo().name&&34<Number(Z.getBrowserInfo().version),e.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var e=new RTCPeerConnection,t=!1;try{e.addTransceiver("audio"),t=!0}catch(e){}return e.close(),t}(),e.supportMinBitrate="Chrome"===Z.getBrowserInfo().name||"Edge"===Z.getBrowserInfo().name,e.supportMaxBitrateInEncodingParameters="Chrome"===Z.getBrowserInfo().name&&68<=Number(Z.getBrowserInfo().version)||"Firefox"===Z.getBrowserInfo().name&&64<=Number(Z.getBrowserInfo().version),e.supportDualStream=t,e.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,e.supportWebGL="undefined"!=typeof WebGLRenderingContext,e.webAudioWithAEC=r}(Q||(Q={}));var ee=Q;let te=!0,re=!0;function ne(e,t,r){const n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}function ie(e,t,r){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return i.apply(this,arguments);const o=e=>{const t=r(e);t&&n(t)};return this._eventMap=this._eventMap||{},this._eventMap[n]=o,i.apply(this,[e,o])};const o=n.removeEventListener;n.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[r])return o.apply(this,arguments);const n=this._eventMap[r];return delete this._eventMap[r],o.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function oe(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(te=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function ae(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(re=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function ce(){if("object"==typeof window){if(te)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function se(e,t){re&&console.warn(e+" is deprecated, please use "+t+" instead.")}function ue(e){const{navigator:t}=e,r={browser:null,version:null};if(void 0===e||!e.navigator)return r.browser="Not a browser.",r;if(t.mozGetUserMedia)r.browser="firefox",r.version=ne(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)r.browser="chrome",r.version=ne(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))r.browser="edge",r.version=ne(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return r.browser="Not a supported browser.",r;r.browser="safari",r.version=ne(t.userAgent,/AppleWebKit\/(\d+)\./,1),r.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return r}function fe(e){return"[object Object]"===Object.prototype.toString.call(e)}function le(e){return fe(e)?Object.keys(e).reduce((function(t,r){const n=fe(e[r]),i=n?le(e[r]):e[r],o=n&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[r]:i})}),{}):e}function de(e,t,r){const n=r?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return e.forEach(e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(t=>{e.forEach(r=>{r.type===n&&r.trackId===t.id&&function e(t,r,n){r&&!n.has(r.id)&&(n.set(r.id,r),Object.keys(r).forEach(i=>{i.endsWith("Id")?e(t,t.get(r[i]),n):i.endsWith("Ids")&&r[i].forEach(r=>{e(t,t.get(r),n)})}))}(e,r,i)})}),i}const pe=ce;function he(e){const t=e&&e.navigator;if(!t.mediaDevices)return;const r=ue(e),n=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach(r=>{if("require"===r||"advanced"===r||"mediaSource"===r)return;const n="object"==typeof e[r]?e[r]:{ideal:e[r]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];let e={};"number"==typeof n.ideal?(e[i("min",r)]=n.ideal,t.optional.push(e),e={},e[i("max",r)]=n.ideal,t.optional.push(e)):(e[i("",r)]=n.ideal,t.optional.push(e))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",r)]=n.exact):["min","max"].forEach(e=>{void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,r)]=n[e])})}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(r.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=n(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const a=r.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||a)){let r;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?r=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(r=["front"]),r)return t.mediaDevices.enumerateDevices().then(t=>{let a=(t=t.filter(e=>"videoinput"===e.kind)).find(e=>r.some(t=>e.label.toLowerCase().includes(t)));return!a&&t.length&&r.includes("back")&&(a=t[t.length-1]),a&&(e.video.deviceId=o.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=n(e.video),pe("chrome: "+JSON.stringify(e)),i(e)})}e.video=n(e.video)}return pe("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return r.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,r,n){i(e,e=>{t.webkitGetUserMedia(e,r,e=>{n&&n(o(e))})})}.bind(t),t.mediaDevices.getUserMedia){const e=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(t){return i(t,t=>e(t).then(e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(e=>{e.stop()}),new DOMException("","NotFoundError");return e},e=>Promise.reject(o(e))))}}}function ve(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(t=>{const n=r.video&&r.video.width,i=r.video&&r.video.height,o=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},n&&(r.video.mandatory.maxWidth=n),i&&(r.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(r)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function me(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function be(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",r=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===r.track.id):{track:r.track};const i=new Event("track");i.track=r.track,i.receiver=n,i.transceiver={receiver:n},i.streams=[t.stream],this.dispatchEvent(i)}),t.stream.getTracks().forEach(r=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===r.id):{track:r};const i=new Event("track");i.track=r,i.receiver=n,i.transceiver={receiver:n},i.streams=[t.stream],this.dispatchEvent(i)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else ie(e,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function ye(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){let i=r.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach(e=>{this._senders.push(t(this,e))})};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(e=>{const t=this._senders.find(t=>t.track===e);t&&this._senders.splice(this._senders.indexOf(t),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function ge(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,n]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach(e=>{const r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(t=>{r[t]=e.stat(t)}),t[r.id]=r}),t},o=function(e){return new Map(Object.keys(e).map(t=>[t,e[t]]))};if(arguments.length>=2){const n=function(e){r(o(i(e)))};return t.apply(this,[n,e])}return new Promise((e,r)=>{t.apply(this,[function(t){e(o(i(t)))},r])}).then(r,n)}}function _e(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>de(t,e.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),ie(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>de(t,e.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,r,n;return this.getSenders().forEach(r=>{r.track===e&&(t?n=!0:t=r)}),this.getReceivers().forEach(t=>(t.track===e&&(r?n=!0:r=t),t.track===e)),n||t&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Se(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(e=>this._shimmedLocalStreams[e][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")});const t=this.getSenders();r.apply(this,arguments);const n=this.getSenders().filter(e=>-1===t.indexOf(e));this._shimmedLocalStreams[e.id]=[e].concat(n)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(t=>{const r=this._shimmedLocalStreams[t].indexOf(e);-1!==r&&this._shimmedLocalStreams[t].splice(r,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),i.apply(this,arguments)}}function Ee(e){if(!e.RTCPeerConnection)return;const t=ue(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Se(e);const r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=r.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(e=>this._reverseStreams[e.id])};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){const r=new e.MediaStream(t.getTracks());this._streams[t.id]=r,this._reverseStreams[r.id]=t,t=r}n.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(i.id,"g"),n.id)}),new RTCSessionDescription({type:t.type,sdp:r})}function a(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:r})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const n=[].slice.call(arguments,1);if(1!==n.length||!n[0].getTracks().find(e=>e===t))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const i=this.getSenders().find(e=>e.track===t);if(i)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[r.id];if(o)o.addTrack(t),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const n=new e.MediaStream([t]);this._streams[r.id]=n,this._reverseStreams[n.id]=r,this.addStream(n)}return this.getSenders().find(e=>e.track===t)},["createOffer","createAnswer"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],n={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[t=>{const r=o(this,t);e[0].apply(null,[r])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):r.apply(this,arguments).then(e=>o(this,e))}};e.RTCPeerConnection.prototype[t]=n[t]}));const c=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=a(this,arguments[0]),c.apply(this,arguments)):c.apply(this,arguments)};const s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=s.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach(r=>{this._streams[r].getTracks().find(t=>e.track===t)&&(t=this._streams[r])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Te(e){const t=ue(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),!e.RTCPeerConnection)return;const r=0===e.RTCPeerConnection.prototype.addIceCandidate.length;t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]}));const n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return r||arguments[0]?t.version<78&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}function we(e){ie(e,"negotiationneeded",e=>{if("stable"===e.target.signalingState)return e})}var Oe=r(133),Ce=r.n(Oe);function Pe(e){const t=e&&e.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch(e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e)))}}function Re(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function Ie(e){const t=ue(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const r=new Event("enabled");r.enabled=e,this.dispatchEvent(r)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const r=Ce()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let r=!1;return(e=JSON.parse(JSON.stringify(e))).filter(e=>{if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&se("RTCIceServer.url","RTCIceServer.urls");const n="string"==typeof t;return n&&(t=[t]),t=t.filter(e=>{if(0===e.indexOf("stun:"))return!1;const t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!r?(r=!0,!0):t&&!r}),delete e.url,e.urls=n?t[0]:t,!!t.length}})}(e.iceServers,t.version),ce("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function Ne(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function Ae(e){const t=ue(e),r=e&&e.navigator,n=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,n){se("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const e=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},t=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(r){return"object"==typeof r&&"object"==typeof r.audio&&(r=JSON.parse(JSON.stringify(r)),e(r.audio,"autoGainControl","mozAutoGainControl"),e(r.audio,"noiseSuppression","mozNoiseSuppression")),t(r)},n&&n.prototype.getSettings){const t=n.prototype.getSettings;n.prototype.getSettings=function(){const r=t.apply(this,arguments);return e(r,"mozAutoGainControl","autoGainControl"),e(r,"mozNoiseSuppression","noiseSuppression"),r}}if(n&&n.prototype.applyConstraints){const t=n.prototype.applyConstraints;n.prototype.applyConstraints=function(r){return"audio"===this.kind&&"object"==typeof r&&(r=JSON.parse(JSON.stringify(r)),e(r,"autoGainControl","mozAutoGainControl"),e(r,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[r])}}}}function ke(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function De(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function xe(e){const t=ue(e);if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;if(!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]})),t.version<68){const t=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,o]=arguments;return n.apply(this,[e||null]).then(e=>{if(t.version<53&&!i)try{e.forEach(e=>{e.type=r[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach((t,n)=>{e.set(n,Object.assign({},t,{type:r[t.type]||t.type}))})}return e}).then(i,o)}}function je(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Me(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),ie(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Le(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){se("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function Ue(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Fe(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],r=e&&"sendEncodings"in e;r&&e.sendEncodings.forEach(e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const n=t.apply(this,arguments);if(r){const{sender:t}=n,r=t.getParameters();"encodings"in r||(r.encodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(r).catch(()=>{})))}return n})}function Ve(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function Ge(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function Be(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(r=>t.call(this,r,e)),e.getVideoTracks().forEach(r=>t.call(this,r,e))},e.RTCPeerConnection.prototype.addTrack=function(e,...r){return r&&r.forEach(e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const r=e.getTracks();this.getSenders().forEach(e=>{r.includes(e.track)&&this.removeTrack(e)})})}}function We(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach(e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const r=new Event("addstream");r.stream=t,e.dispatchEvent(r)})}),t.apply(e,arguments)}}}function He(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i};let c=function(e,t,r){const n=i.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n};t.setLocalDescription=c,c=function(e,t,r){const n=o.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.setRemoteDescription=c,c=function(e,t,r){const n=a.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.addIceCandidate=c}function Ye(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,r=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>r(Ke(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,n){t.mediaDevices.getUserMedia(e).then(r,n)}.bind(t))}function Ke(e){return e&&void 0!==e.video?Object.assign({},e,{video:le(e.video)}):e}function ze(e){const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){const t=[];for(let r=0;r<e.iceServers.length;r++){let n=e.iceServers[r];!n.hasOwnProperty("urls")&&n.hasOwnProperty("url")?(se("RTCIceServer.url","RTCIceServer.urls"),n=JSON.parse(JSON.stringify(n)),n.urls=n.url,delete n.url,t.push(n)):t.push(e.iceServers[r])}e.iceServers=t}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function Je(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Xe(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find(e=>"audio"===e.receiver.track.kind);!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const r=this.getTransceivers().find(e=>"video"===e.receiver.track.kind);!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}var qe=r(45),$e=r.n(qe);function Qe(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const r=new t(e),n=$e.a.parseCandidate(e.candidate),i=Object.assign(r,n);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,ie(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function Ze(e){if(!e.RTCPeerConnection)return;const t=ue(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const r=function(e){if(!e||!e.sdp)return!1;const t=$e.a.splitSections(e.sdp);return t.shift(),t.some(e=>{const t=$e.a.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})},n=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const r=parseInt(t[1],10);return r!=r?-1:r},i=function(e){let r=65536;return"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r},o=function(e,r){let n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);const i=$e.a.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?n=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==r&&(n=2147483637),n},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const e=n(arguments[0]),t=i(e),r=o(arguments[0],e);let a;a=0===t&&0===r?Number.POSITIVE_INFINITY:0===t||0===r?Math.max(t,r):Math.min(t,r);const c={};Object.defineProperty(c,"maxMessageSize",{get:()=>a}),this._sctp=c}return a.apply(this,arguments)}}function et(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const r=e.send;e.send=function(){const n=arguments[0],i=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return r.apply(e,arguments)}}const r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=r.apply(this,arguments);return t(e,this),e},ie(e,"datachannel",e=>(t(e.channel,e.target),e))}function tt(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{const r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const r=new Event("connectionstatechange",e);t.dispatchEvent(r)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function rt(e){if(!e.RTCPeerConnection)return;const t=ue(e);if("chrome"===t.browser&&t.version>=71)return;const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter(e=>"a=extmap-allow-mixed"!==e.trim()).join("\n")),r.apply(this,arguments)}}var nt=function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const r=ce,s=ue(e),u={browserDetails:s,commonShim:c,extractVersion:ne,disableLog:oe,disableWarnings:ae};switch(s.browser){case"chrome":if(!n||!Te||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),u;r("adapter.js shimming chrome."),u.browserShim=n,he(e),me(e),Te(e),be(e),Ee(e),ye(e),ge(e),_e(e),we(e),Qe(e),tt(e),Ze(e),et(e),rt(e);break;case"firefox":if(!o||!xe||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),u;r("adapter.js shimming firefox."),u.browserShim=o,Ae(e),xe(e),De(e),Le(e),je(e),Me(e),Ue(e),Fe(e),Ve(e),Ge(e),Qe(e),tt(e),Ze(e),et(e);break;case"edge":if(!i||!Ie||!t.shimEdge)return r("MS edge shim is not included in this adapter release."),u;r("adapter.js shimming edge."),u.browserShim=i,Pe(e),Re(e),Ie(e),Ne(e),Ze(e),et(e);break;case"safari":if(!a||!t.shimSafari)return r("Safari shim is not included in this adapter release."),u;r("adapter.js shimming safari."),u.browserShim=a,ze(e),Xe(e),He(e),Be(e),We(e),Je(e),Ye(e),Qe(e),Ze(e),et(e),rt(e);break;default:r("Unsupported browser!")}return u}({window:window}),it=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},ot=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};function at(e,t){return it(this,void 0,void 0,(function(){var r,n,i,o;return ot(this,(function(a){switch(a.label){case 0:if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new I(v.NOT_SUPPORT+"can not find getUserMedia");return t&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height)),r=ee,n=new MediaStream,e.audioSource&&n.addTrack(e.audioSource),e.videoSource&&n.addTrack(e.videoSource),e.audio||e.video||e.screen?e.audio||e.video?(o={video:e.video,audio:e.audio},[4,navigator.mediaDevices.getUserMedia(o)]):[3,2]:[3,4];case 1:return[2,a.sent()];case 2:return e.screen&&r.getDisplayMedia?(i=Object.assign({},{width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}),e.screen.mediaSource&&~["screen","window","application"].indexOf(e.screen.mediaSource)&&Object.assign(i,{displaySurface:"screen"===e.screen.mediaSource?"monitor":e.screen.mediaSource}),[4,navigator.mediaDevices.getDisplayMedia({video:i,audio:!!e.screenAudio})]):[3,4];case 3:return[2,a.sent()];case 4:return[2]}}))}))}function ct(e){return new Promise((function(t,r){S.debug("start check mediaStreamTrack resolution",e);var n=document.createElement("video");n.setAttribute("autoplay",""),n.setAttribute("muted",""),n.muted=!0,n.autoplay=!0,n.setAttribute("playsinline",""),n.setAttribute("style","position: absolute; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(n),n.addEventListener("playing",(function(){var r="";(n.videoWidth||"Firefox"!==Z.getBrowserInfo().name)&&(r="".concat(n.videoWidth.toString()," x ").concat(n.videoHeight.toString()),S.debug("get track resolution: ",r,e),t([n.videoWidth,n.videoHeight]),document.body.removeChild(n))})),n.srcObject=new MediaStream([e])}))}function st(e){return"string"==typeof e?Object.assign({},K[e]):"[object Object]"===Object.prototype.toString.call(e)&&e}function ut(e){return"string"==typeof e?Object.assign({},J[e]):"[object Object]"===Object.prototype.toString.call(e)&&e}function ft(e){var t={};if(e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId=e.cameraId),!e.encoderConfig)return t;var r=st(e.encoderConfig);return r?(t.width=r.width,t.height=r.height,Z.isLegacyChrome()&&(t.frameRate=r.frameRate),"Edge"===Z.getBrowserInfo().name&&"object"===t.frameRate&&(t.frameRate.max=60),"Firefox"===Z.getBrowserInfo().name&&(t.frameRate={ideal:30,max:30}),t):t}function lt(e){var t={};if(e.screenSourceType&&"Firefox"===Z.getBrowserInfo().name&&(~["screen","window","application"].indexOf(e.screenSourceType)||(t.mediaSource=e.screenSourceType)),!e.encoderConfig)return t;var r,n="string"==typeof(r=e.encoderConfig)?Object.assign({},z[r]):"[object Object]"===Object.prototype.toString.call(r)&&r;return n?(t.width=n.width,t.height=n.height,Z.isLegacyChrome()&&(t.frameRate=n.frameRate),"Edge"===Z.getBrowserInfo().name&&"object"===t.frameRate&&(t.frameRate.max=60),"Firefox"===Z.getBrowserInfo().name&&(t.frameRate={ideal:30,max:30}),t):t}var dt,pt,ht,vt,mt,bt,yt,gt,_t=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),St=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},Et=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},Tt=function(e){function t(){var t=e.call(this)||this;return Object.defineProperty(t,"type",{enumerable:!0,configurable:!0,writable:!0,value:"pub"}),Object.defineProperty(t,"pc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"audioTrack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"videoTrack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"mediaStream",{enumerable:!0,configurable:!0,writable:!0,value:new MediaStream}),Object.defineProperty(t,"videoEncoderConfig",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(t,"audioEncoderConfig",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(t,"offerOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t.offerOptions={offerToReceiveAudio:!0,offerToReceiveVideo:!0},t.pc=t.createPeerConnection(),t}return _t(t,e),Object.defineProperty(t.prototype,"createPeerConnection",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=new RTCPeerConnection({sdpSemantics:"unified-plan",iceTransportPolicy:"all"});return t.oniceconnectionstatechange=function(r){S.debug("oniceconnectionstatechange: "+t.iceConnectionState),e.emit(R.ICE_CONNECTION_STATE_CHANGE,r)},t.onconnectionstatechange=function(t){e.emit(R.CONNECTION_STATE_CHANGE,t)},t.onicecandidate=function(t){if(t.candidate){var r={candidate:t.candidate.candidate,sdpMLineIndex:t.candidate.sdpMLineIndex,sdpMid:t.candidate.sdpMid};e.emit(R.ICE_CANDIDATE,JSON.stringify(r))}},t.ontrack=function(t){e.emit(R.TRACK_ADDED,t.track)},t}}),Object.defineProperty(t.prototype,"close",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.pc&&this.pc.close()}}),Object.defineProperty(t.prototype,"getSenders",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"pub"===this.type||"pubEx"===this.type?this.pc.getSenders():this.pc.getReceivers()}}),Object.defineProperty(t.prototype,"getStats",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"createAnswer",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return void 0===t&&(t=!1),St(this,void 0,void 0,(function(){var r,n;return Et(this,(function(i){switch(i.label){case 0:return this.pc?(r=JSON.parse(e),[4,this.pc.setRemoteDescription(new RTCSessionDescription(r))]):[3,3];case 1:return i.sent(),[4,this.pc.createAnswer(t?{iceRestart:t}:{})];case 2:n=i.sent(),this.pc.setLocalDescription(n),console.log("this.videoEncoderConfig ",this.videoEncoderConfig),.15,o=n.sdp,a=.15,c="AS","firefox"===nt.browserDetails.browser&&(a=1e3*(a>>>0),c="TIAS"),o=-1===o.indexOf("b="+c+":")?o.replace(/c=IN (.*)\r\n/,"c=IN $1\r\nb="+c+":"+a+"\r\n"):o.replace(new RegExp("b="+c+":.*\r\n"),"b="+c+":"+a+"\r\n"),this.emit(R.CREATE_ANSWER,JSON.stringify(n)),i.label=3;case 3:return[2]}var o,a,c}))}))}}),Object.defineProperty(t.prototype,"setIceCandidate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.pc){var t=JSON.parse(e),r=t.sdpMLineIndex,n=t.candidate,i=new RTCIceCandidate({sdpMLineIndex:r,candidate:n});this.pc.addIceCandidate(i)}}}),Object.defineProperty(t.prototype,"updateBandWidth",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return St(this,void 0,void 0,(function(){var t,r;return Et(this,(function(n){switch(n.label){case 0:return"pub"!==this.type&&"pubEx"!==this.type?[3,2]:(t=this.pc.getSenders()[0],(r=t.getParameters()).encodings||(r.encodings=[{}]),0===e?delete r.encodings[0].maxBitrate:r.encodings[0].maxBitrate=1e3*e,[4,t.setParameters(r).catch((function(e){return console.error(e)}))]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))}}),Object.defineProperty(t.prototype,"_mungeSdpForSimulcasting",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=e.split("\r\n"),r=!1,n=[-1],i=[-1],o=null,a=null,c=null,s=null,u=-1,f=0;f<t.length;f++){if(d=t[f].match(/m=(\w+) */)){if("video"===d[1]){if(!(n[0]<0)){u=f;break}r=!0}else if(n[0]>-1){u=f;break}}else if(r){var l=t[f].match(/a=ssrc-group:FID (\d+) (\d+)/);if(l)n[0]=l[1],i[0]=l[2],t.splice(f,1),f--;else{if(n[0]){if((h=t[f].match("a=ssrc:"+n[0]+" cname:(.+)"))&&(o=h[1]),(h=t[f].match("a=ssrc:"+n[0]+" msid:(.+)"))&&(a=h[1]),(h=t[f].match("a=ssrc:"+n[0]+" mslabel:(.+)"))&&(c=h[1]),(h=t[f].match("a=ssrc:"+n[0]+" label:(.+)"))&&(s=h[1]),0===t[f].indexOf("a=ssrc:"+i[0])){t.splice(f,1),f--;continue}if(0===t[f].indexOf("a=ssrc:"+n[0])){t.splice(f,1),f--;continue}}0!=t[f].length||(t.splice(f,1),f--)}}}if(n[0]<0){u=-1,r=!1;for(f=0;f<t.length;f++){var d;if(d=t[f].match(/m=(\w+) */)){if("video"===d[1]){if(!(n[0]<0)){u=f;break}r=!0}else if(n[0]>-1){u=f;break}}else if(r){if(n[0]<0){var p=t[f].match(/a=ssrc:(\d+)/);if(p){n[0]=p[1],t.splice(f,1),f--;continue}}else{var h;if((h=t[f].match("a=ssrc:"+n[0]+" cname:(.+)"))&&(o=h[1]),(h=t[f].match("a=ssrc:"+n[0]+" msid:(.+)"))&&(a=h[1]),(h=t[f].match("a=ssrc:"+n[0]+" mslabel:(.+)"))&&(c=h[1]),(h=t[f].match("a=ssrc:"+n[0]+" label:(.+)"))&&(s=h[1]),0===t[f].indexOf("a=ssrc:"+i[0])){t.splice(f,1),f--;continue}if(0===t[f].indexOf("a=ssrc:"+n[0])){t.splice(f,1),f--;continue}}0!==t[f].length||(t.splice(f,1),f--)}}}if(n[0]<0)return e;u<0&&(u=t.length),n[1]=Math.floor(4294967295*Math.random()),n[2]=Math.floor(4294967295*Math.random()),i[1]=Math.floor(4294967295*Math.random()),i[2]=Math.floor(4294967295*Math.random());for(f=0;f<n.length;f++)o&&(t.splice(u,0,"a=ssrc:"+n[f]+" cname:"+o),u++),a&&(t.splice(u,0,"a=ssrc:"+n[f]+" msid:"+a),u++),c&&(t.splice(u,0,"a=ssrc:"+n[f]+" mslabel:"+c),u++),s&&(t.splice(u,0,"a=ssrc:"+n[f]+" label:"+s),u++),o&&(t.splice(u,0,"a=ssrc:"+i[f]+" cname:"+o),u++),a&&(t.splice(u,0,"a=ssrc:"+i[f]+" msid:"+a),u++),c&&(t.splice(u,0,"a=ssrc:"+i[f]+" mslabel:"+c),u++),s&&(t.splice(u,0,"a=ssrc:"+i[f]+" label:"+s),u++);return t.splice(u,0,"a=ssrc-group:FID "+n[2]+" "+i[2]),t.splice(u,0,"a=ssrc-group:FID "+n[1]+" "+i[1]),t.splice(u,0,"a=ssrc-group:FID "+n[0]+" "+i[0]),t.splice(u,0,"a=ssrc-group:SIM "+n[0]+" "+n[1]+" "+n[2]),(e=t.join("\r\n")).endsWith("\r\n")||(e+="\r\n"),e}}),t}(T),wt=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ot=function(e){function t(){var t=e.call(this)||this;return t.type="pub",t}return wt(t,e),Object.defineProperty(t.prototype,"getAllTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=[];return this.audioTrack&&e.push(this.audioTrack),this.videoTrack&&e.push(this.videoTrack),e}}),Object.defineProperty(t.prototype,"addTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e instanceof MediaStreamTrack&&(this.pc.addTrack(e),"video"===e.kind?(this.videoTrack=e,this.videoEncoderConfig=t):"audio"===e.kind&&(this.audioTrack=e,this.audioEncoderConfig=t))}}),Object.defineProperty(t.prototype,"removeTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this.pc.getSenders().map((function(r){r.track===e&&("video"===r.track.kind?(t.videoTrack=void 0,t.videoEncoderConfig={}):"audio"===r.track.kind&&(t.audioTrack=void 0,t.audioEncoderConfig={}),t.pc.removeTrack(r))}))}}),t}(Tt),Ct=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pt=function(e){function t(){var t=e.call(this)||this;return Object.defineProperty(t,"codec",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t.type="pubEx",t}return Ct(t,e),Object.defineProperty(t.prototype,"getAllTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=[];return this.audioTrack&&e.push(this.audioTrack),this.videoTrack&&e.push(this.videoTrack),e}}),Object.defineProperty(t.prototype,"addTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e instanceof MediaStreamTrack&&(this.pc.addTrack(e),"video"===e.kind&&(this.videoTrack=e,this.videoEncoderConfig=t))}}),Object.defineProperty(t.prototype,"removeTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this.pc.getSenders().map((function(r){r.track===e&&("video"===r.track.kind&&(t.videoTrack=void 0,t.videoEncoderConfig={}),t.pc.removeTrack(r.track))}))}}),t}(Tt),Rt=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),It=function(e){function t(){var t=e.call(this)||this;return Object.defineProperty(t,"isLowStreamConnection",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"codec",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t.type="sub",t}return Rt(t,e),t}(Tt),Nt=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),At=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"peer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"ID",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(r,"type",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(r,"startTime",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"connectionId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(r,"currentReconnectCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(r,"videoTrack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"audioTrack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_audioMuted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(r,"_videoMuted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(r,"_audioMediaStreamTrack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_videoMediaStreamTrack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r.ID=t,r}return Nt(t,e),Object.defineProperty(t.prototype,"_createPC",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,r=this,n=this;switch(this.type){case"pub":e=new Ot;break;case"pubEx":e=new Pt;break;case"sub":e=new It}return n.peer=e,t.handlePeerConnectionEvent&&(n.peer.on(R.CONNECTION_STATE_CHANGE,t.handlePeerConnectionEvent.bind(this,n.ID,n.type,R.CONNECTION_STATE_CHANGE)),n.peer.on(R.ICE_CONNECTION_STATE_CHANGE,t.handlePeerConnectionEvent.bind(this,n.ID,n.type,R.ICE_CONNECTION_STATE_CHANGE)),n.peer.on(R.ICE_CANDIDATE,t.handlePeerConnectionEvent.bind(this,n.ID,n.type,R.ICE_CANDIDATE)),n.peer.on(R.CREATE_ANSWER,t.handlePeerConnectionEvent.bind(this,n.ID,n.type,R.CREATE_ANSWER)),"sub"===n.type&&n.peer.on(R.TRACK_ADDED,(function(e){if(r["_"+e.kind+"MediaStreamTrack"]=e,"video"===e.kind){var i=document.createElement("video");i.srcObject=new MediaStream([e]),i.onresize=function(e){t.handleTrackEvent.call(r,{streamId:n.ID,peerType:n.type,trackMediaType:"video",eventName:R.VIDEO_SIZE_CHANGE},i.videoWidth*i.videoHeight)}}n._audioMediaStreamTrack&&n._videoMediaStreamTrack&&t.handlePeerConnectionEvent.call(r,n.ID,n.type,R.TRACK_ADDED,e)}))),n.peer}}),Object.defineProperty(t.prototype,"_closePC",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.peer&&(this.peer.close(),this.peer=void 0)}}),Object.defineProperty(t.prototype,"_getAllTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"addOriginTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(!e)throw new I(v.INVALID_PARAMS,"tracks is undefind");e instanceof Array||(e=[e]),e.map((function(e){"video"===e.kind?t._videoMediaStreamTrack||(t._videoMediaStreamTrack=e):"audio"===e.kind&&(t._audioMediaStreamTrack||(t._audioMediaStreamTrack=e))}))}}),Object.defineProperty(t.prototype,"clearOriginTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._videoMediaStreamTrack||(this._videoMediaStreamTrack=void 0),this._audioMediaStreamTrack||(this._audioMediaStreamTrack=void 0)}}),Object.defineProperty(t.prototype,"addTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r=this.ID;if(e instanceof L){var n=e.trackMediaType,i=e.getMediaStreamTrack();"video"!==n||this.videoTrack?"audio"!==n||this.audioTrack||(this.audioTrack=e,this._audioMediaStreamTrack=i):(this.videoTrack=e,this._videoMediaStreamTrack=i),t.handleTrackEvent&&(e.on(R.UPDATE_MUTE_STATE,t.handleTrackEvent.bind(this,{streamId:r,peerType:this.type,trackMediaType:e.trackMediaType,eventName:R.UPDATE_MUTE_STATE})),e.on(R.TRACK_ENDED,t.handleTrackEvent.bind(this,{streamId:r,peerType:this.type,trackMediaType:e.trackMediaType,eventName:R.TRACK_ENDED})),this.type)}}}),Object.defineProperty(t.prototype,"removeTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e?e===this.videoTrack?this.videoTrack=void 0:e===this.audioTrack&&(this.audioTrack=void 0):this.removeAllTracks()}}),Object.defineProperty(t.prototype,"removeAllTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.videoTrack=void 0,this.audioTrack=void 0}}),Object.defineProperty(t.prototype,"destory",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.type="",this.ID="",this.removeAllTracks(),this.clearOriginTracks(),this._closePC()}}),t}(T),kt=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dt=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},xt=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},jt=function(e){function t(t,r){var n=e.call(this,t,r)||this;return Object.defineProperty(n,"trackMediaType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"isMuted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_userId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_isClosed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_handleTrackEnded",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.isMuted=!1,n._userId=null,n._isClosed=!1,t.addEventListener("ended",n.emit.bind(n,"track-ended")),n}return kt(t,e),Object.defineProperty(t.prototype,"getUserId",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._userId}}),Object.defineProperty(t.prototype,"setMute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"boolean"==typeof e&&(this.isMuted=!!e,this._originMediaStreamTrack.enabled=!e,this.emit(R.UPDATE_MUTE_STATE,this.isMuted))}}),Object.defineProperty(t.prototype,"close",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&this._mediaStreamTrack.stop(),this._isClosed=!0}}),Object.defineProperty(t.prototype,"_setUserId",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._userId=e}}),Object.defineProperty(t.prototype,"_updateOriginMediaStreamTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return Dt(this,void 0,void 0,(function(){return xt(this,(function(e){return[2]}))}))}}),Object.defineProperty(t.prototype,"_updatePlayerSource",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_getDefaultPlayerConfig",{enumerable:!1,configurable:!0,writable:!0,value:function(){return{}}}),t}(L);pt=dt||(dt={}),vt=window.AudioContext||window.webkitAudioContext,mt=[],bt=null,yt=null,gt=null,pt.checkSupports=function(){return!!vt},pt.getAudioContextInstance=function(){return ht||(ht=new vt,yt=ht.destination,gt=ht.createMediaStreamDestination(),bt=ht.createDynamicsCompressor(),ht.createDynamicsCompressor(),ht)},pt.decodeAsAudioBuffer=function(e){return new Promise((function(t,r){if(e instanceof File){var n=new FileReader;n.onload=function(e){o(e.target.result)},n.onerror=function(e){n.abort(),r("readFile ${source.name} error")},n.readAsArrayBuffer(e)}else if("string"==typeof e){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){o(i.response)},i.send()}else e instanceof ArrayBuffer&&o(e);function o(e){ht.decodeAudioData(e,(function(e){t(e)}),(function(e){e.err}))}}))},pt.getSourceNode=function(e){return mt.find((function(t){return t.id===e}))},pt.addSourceNode=function(e,t){var r=ht.createGain();t.connect(r),mt.push({id:e,isPlayed:!1,sourceNode:t,gainNode:r,startPlay:function(){this.isPlayed=!0,this.gainNode.connect(yt),function(){if(ht){var e=ht.state;"suspended"===e&&ht.resume().then((function(){S.info("Playback resumed successfully")}))}}()},stopPlay:function(){this.isPlayed=!1,this.gainNode.disconnect(yt)},startSend:function(){this.gainNode.connect(gt)},stopSend:function(){this.gainNode.disconnect(gt)}})},pt.removeSourceNode=function(e){var t=-1,r=mt.find((function(r,n){return t=n,r.id===e}));r&&(r.isPlayed&&pt.stop(r.id),mt.splice(t,1))},pt.getGainNode=function(e){var t=mt.find((function(t){return t.id===e}));if(t)return t.gainNode},pt.play=function(e){var t=mt.find((function(t){return t.id===e}));if(t){if(t.isPlayed)return void S.warning("The audio has already been played.");t.isPlayed=!0,t.gainNode.connect(bt)}},pt.stop=function(e){var t=mt.find((function(t){return t.id===e}));if(t){if(!t.isPlayed)return void S.warning("The audio has not been played yet.");t.isPlayed=!1,t.gainNode.disconnect(bt)}},pt.updateTrack=function(e,t){var r=mt.find((function(t){return t.id===e}));r&&(r.sourceNode.disconnect(r.gainNode),r.sourceNode=ht.createMediaStreamSource(new MediaStream([t])),r.sourceNode.connect(r.gainNode),r.isPlayed&&(pt.stop(r.id),pt.play(r.id)))},pt.getOutputTrack=function(){return gt.stream.getAudioTracks()[0]};var Mt,Lt=dt,Ut=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ft=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},Vt=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},Gt=function(e){function t(t,r,n){var i=e.call(this,t,n)||this;if(Object.defineProperty(i,"trackMediaType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_encoderConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_source",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),i.trackMediaType="audio",i._encoderConfig=r,!Lt.checkSupports())throw new I(v.NOT_SUPPORT,"can not create audio context");i._context=Lt.getAudioContextInstance();var o=i._context.createMediaStreamSource(new MediaStream([t]));return Lt.addSourceNode(n,o),i._source=Lt.getSourceNode(i.getTrackId()),i._mediaStreamTrack=Lt.getOutputTrack(),i}return Ut(t,e),Object.defineProperty(t.prototype,"setVolume",{enumerable:!1,configurable:!0,writable:!0,value:function(e){Lt.getGainNode(this.getTrackId()).gain.setValueAtTime(e/1e3,this._context.currentTime)}}),Object.defineProperty(t.prototype,"getVolumeLevel",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Lt.getGainNode(this.getTrackId()).gain.value}}),Object.defineProperty(t.prototype,"getStats",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"play",{enumerable:!1,configurable:!0,writable:!0,value:function(){Lt.getSourceNode(this.getTrackId()).startPlay()}}),Object.defineProperty(t.prototype,"stop",{enumerable:!1,configurable:!0,writable:!0,value:function(){Lt.getSourceNode(this.getTrackId()).stopPlay()}}),Object.defineProperty(t.prototype,"close",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.stop(),Lt.removeSourceNode(this.getTrackId()),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&this._mediaStreamTrack.stop(),this._isClosed=!0}}),Object.defineProperty(t.prototype,"_updatePlayerSource",{enumerable:!1,configurable:!0,writable:!0,value:function(){Lt.updateTrack(this.getTrackId(),this._originMediaStreamTrack)}}),Object.defineProperty(t.prototype,"_updateOriginMediaStreamTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return Ft(this,void 0,void 0,(function(){return Vt(this,(function(r){return this._originMediaStreamTrack===e||(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),e.addEventListener("ended",this._handleTrackEnded),t&&(this._originMediaStreamTrack.stop(),this._originMediaStreamTrack=e,this._updatePlayerSource())),[2]}))}))}}),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return Lt.getSourceNode(this.getTrackId()).isPlayed},enumerable:!0,configurable:!0}),t}(jt),Bt=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wt=function(e){function t(t,r,n){var i=e.call(this,t,r,n)||this;return Object.defineProperty(i,"trackList",{enumerable:!0,configurable:!0,writable:!0,value:[]}),i}return Bt(t,e),Object.defineProperty(t.prototype,"hasAudioTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return-1!==this.trackList.findIndex((function(t){return t==e}))}}),Object.defineProperty(t.prototype,"addAudioTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.hasAudioTrack(e)?S.warning("track is already added"):(this.trackList.push(e),Lt.getSourceNode(e.getTrackId()).startSend(),this.updateEncoderConfig())}}),Object.defineProperty(t.prototype,"removeAudioTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.hasAudioTrack(e)){var t=Lt.getSourceNode(e.getTrackId());t&&t.gainNode.disconnect(t.compressorNode),this.trackList.splice(this.trackList.findIndex((function(t){return t==e})),1),this.updateEncoderConfig()}}}),Object.defineProperty(t.prototype,"removeAllAudioTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.trackList.map((function(t){e.removeAudioTrack(t)}))}}),Object.defineProperty(t.prototype,"updateEncoderConfig",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e={};this.trackList.forEach((function(t){t._encoderConfig&&((t._encoderConfig.bitrate||0)>(e.bitrate||0)&&(e.bitrate=t._encoderConfig.bitrate),(t._encoderConfig.sampleRate||0)>(e.sampleRate||0)&&(e.sampleRate=t._encoderConfig.sampleRate),(t._encoderConfig.sampleSize||0)>(e.sampleSize||0)&&(e.sampleSize=t._encoderConfig.sampleSize),t._encoderConfig.stereo&&(e.stereo=!0))})),this._encoderConfig=e}}),t}(Gt),Ht=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yt=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},Kt=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},zt=function(e){function t(t,r,n){var i=e.call(this,t,n)||this;Object.defineProperty(i,"trackMediaType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_player",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_encoderConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_videoWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(i,"_videoHeight",{enumerable:!0,configurable:!0,writable:!0,value:0});var o=i;return i.trackMediaType="video",i._encoderConfig=r,ct(t).then((function(e){o._videoHeight=e[0],o._videoWidth=e[1]})),i}return Ht(t,e),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return!!this._player},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"play",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this,n=void 0!==t&&"[object Object]"===Object.prototype.toString.call(t)?t:{};if("string"==typeof e){var i=void 0,o=document.getElementById(e);o?e=o:(i="[track-".concat(this.getTrackId(),'] can not find "#'),S.warning(i.concat(e,'" element, use document.body')),e=document.body)}S.debug("[track-".concat(this.getTrackId(),"] play"));var a=Object.assign({},this._getDefaultPlayerConfig(),{},n,{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(a):(this._player=new G(a),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=function(){r.emit("first-video-frame")},this._player.onVideoSizeChange=function(e,t){r.emit("video-resize",e,t)}),"playing"!==this._player._playervideoElementStatus&&this._player.play()}}),Object.defineProperty(t.prototype,"stop",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._player&&(this._player.destroy(),this._player=void 0)}}),Object.defineProperty(t.prototype,"getStats",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_updateOriginMediaStreamTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return Yt(this,void 0,void 0,(function(){var r;return Kt(this,(function(n){return(r=this)._originMediaStreamTrack===e?[2]:(t&&(r._originMediaStreamTrack.removeEventListener("ended",r._handleTrackEnded),e.addEventListener("ended",r._handleTrackEnded),r._originMediaStreamTrack.stop(),r._originMediaStreamTrack=e),r._mediaStreamTrack=r._originMediaStreamTrack,r._updatePlayerSource(),[2,r.emit("@need_replace_track",r._mediaStreamTrack)])}))}))}}),Object.defineProperty(t.prototype,"_updatePlayerSource",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}}),Object.defineProperty(t.prototype,"_getDefaultPlayerConfig",{enumerable:!1,configurable:!0,writable:!0,value:function(){return{}}}),t}(jt),Jt=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xt=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},qt=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},$t=function(e){function t(t){var r=e.call(this,t)||this;return r.type="pub",r._createPC(),r}return Jt(t,e),Object.defineProperty(t.prototype,"addTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return Xt(this,void 0,void 0,(function(){var t=this;return qt(this,(function(r){if(!e)throw new I(v.INVALID_PARAMS,"tracks is undefind");return e instanceof Array||(e=[e]),e.map((function(e){if("video"===e.trackMediaType)if(t.videoTrack)S.error("only one videoTrack can be publish");else{if(!(e instanceof zt))throw new I(v.INVALID_OPERATION,"Unable to published a non-LocalVideoTrack");e.on(R.RTC_NEED_RENEGOTIATE,(function(){var r=e._encoderConfig.bitrateMax;t.peer.updateBandWidth(r)})),t.addTrack(e),t.peer.addTrack(t._videoMediaStreamTrack,e._encoderConfig)}else if("audio"===e.trackMediaType){if(!t.audioTrack){var r=new Wt(Lt.getOutputTrack(),{},w(8));t.addTrack(r),t.peer.audioTrack||t.peer.addTrack(Lt.getOutputTrack(),r._encoderConfig)}!t.audioTrack.hasAudioTrack(e)&&t.audioTrack.addAudioTrack(e)}})),[2]}))}))}}),Object.defineProperty(t.prototype,"removeTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return Xt(this,void 0,void 0,(function(){var t=this;return qt(this,(function(r){return e?(e instanceof Array||(e=[e]),e.map((function(e){if("video"===e.trackMediaType){if(t.videoTrack!==e)throw new I(v.INVALID_OPERATION,"You haven't published this track ",e);t.removeTrack(t.videoTrack),t.peer.removeTrack(t._videoMediaStreamTrack)}else if("audio"===e.trackMediaType&&t.audioTrack){var r=t.audioTrack;r.removeAudioTrack(e),0===r.trackList.length&&(t.removeTrack(r),t.peer.removeTrack(t._audioMediaStreamTrack))}}))):(this.audioTrack&&(this.audioTrack.removeAllAudioTracks(),this.peer.removeTrack(this._audioMediaStreamTrack)),this.videoTrack&&this.peer.removeTrack(this._videoMediaStreamTrack),this.removeTrack()),[2]}))}))}}),t}(At),Qt=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zt=function(e){function t(t){var r=e.call(this,t)||this;return r.type="pubEx",r._createPC(),r}return Qt(t,e),Object.defineProperty(t.prototype,"addTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"video"!==e.trackMediaType||this.videoTrack||(this.videoTrack=e,this._videoMediaStreamTrack=e.getMediaStreamTrack().clone(),this.peer.addTrack(this._videoMediaStreamTrack,e._encoderConfig))}}),Object.defineProperty(t.prototype,"removeTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"video"===e.trackMediaType&&this.videoTrack&&(this.videoTrack=void 0,this.peer.removeTrack(this._videoMediaStreamTrack))}}),t}(At),er=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tr=function(e){function t(t,r){var n=e.call(this,t,r)||this;Object.defineProperty(n,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"trackMediaType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.trackMediaType="audio",document.createElement("audio").srcObject=new MediaStream([t]),n._context=Lt.getAudioContextInstance();var i=n._context.createMediaStreamSource(new MediaStream([t]));return Lt.addSourceNode(r,i),n}return er(t,e),Object.defineProperty(t.prototype,"isPlaying",{get:function(){throw new Error("Method not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"play",{enumerable:!1,configurable:!0,writable:!0,value:function(){Lt.getSourceNode(this.getTrackId()).startPlay()}}),Object.defineProperty(t.prototype,"stop",{enumerable:!1,configurable:!0,writable:!0,value:function(){Lt.getSourceNode(this.getTrackId()).stopPlay()}}),Object.defineProperty(t.prototype,"setVolume",{enumerable:!1,configurable:!0,writable:!0,value:function(e){Lt.getGainNode(this.getTrackId()).gain.setValueAtTime(e/1e3,this._context.currentTime)}}),Object.defineProperty(t.prototype,"getVolumeLevel",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Lt.getGainNode(this.getTrackId()).gain.value}}),t}(F),rr=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nr=function(e){function t(t){var r=e.call(this,t)||this;return r.type="sub",r._createPC(),r}return rr(t,e),Object.defineProperty(t.prototype,"addTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if("video"===e){var t=this._videoMediaStreamTrack,r=new W(t,w(5));return this.addTrack(r),this.videoTrack}var n=this._audioMediaStreamTrack,i=new tr(n,w(5));return this.addTrack(i),this.audioTrack}}),Object.defineProperty(t.prototype,"remoteTracks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"video"===e?this.removeTrack(this.videoTrack):this.removeTrack(this.audioTrack)}}),Object.defineProperty(t.prototype,"closePC",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.peer&&(this.peer.close(),this.peer=void 0)}}),t}(At),ir=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),or=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},ar=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},cr=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(e){e.UN_PUBLISH="UN_PUBLISH",e.PUBLISH="PUBLISH",e.RE_PUBLISH="RE_PUBLISH"}(Mt||(Mt={}));var sr,ur,fr=function(e){function t(t){var r=e.call(this)||this;if(Object.defineProperty(r,"channelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"connectionState",{enumerable:!0,configurable:!0,writable:!0,value:"DISCONNECTED"}),Object.defineProperty(r,"remoteUsers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(r,"uid",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(r,"_isStringUID",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(r,"_publishState",{enumerable:!0,configurable:!0,writable:!0,value:Mt.UN_PUBLISH}),Object.defineProperty(r,"_msPub",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_msSub",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_isDualStreamEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(r,"_clientId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(r,"_sessionId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(r,"_gateway",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_config",{enumerable:!0,configurable:!0,writable:!0,value:{forceWaitGatewayResponse:!0,mode:"rtc",codec:"h264",role:"host"}}),Object.defineProperty(r,"_joinInfo",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(r,"_appId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(r,"_highStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_lowStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_latestRepInfo",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(r,"_AVStatsControlls",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_onSubscribeSuccess",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t){t.codec;var n=t.mode,i=t.role;r._clientId=w(5),r._handleGatewayEvents.call(r),r._handleTrackEvent.call(r),r._handlePeerConnectionEvent.call(r),r._setAVStatsRepTimer(),"live"!==n||i||(t.role="audience"),r._config=Object.assign(r._config,t),"rtc"===n&&(r._config.role="host"),r._config.codec="h264",S.info("["+r._clientId+"] Initializing AgoraRTC client, mode: "+r._config.mode+", codec: "+r._config.codec)}return r}return ir(t,e),Object.defineProperty(t.prototype,"_connectMediaServer",{enumerable:!1,configurable:!0,writable:!0,value:function(){return or(this,void 0,void 0,(function(){var e;return ar(this,(function(t){return e=this,[2,new Promise((function(t,r){return or(this,void 0,void 0,(function(){var r,n,i,o,a,c,s,u,f;return ar(this,(function(l){switch(l.label){case 0:if(!((n=e._msPub).length>0))return[3,9];l.label=1;case 1:l.trys.push([1,6,7,8]),i=cr(n),o=i.next(),l.label=2;case 2:return o.done?[3,5]:(a=o.value,S.debug("begin connect media server ",a),e._gateway.setAppInfo({appId:e._appId}),e._gateway.configServer(a.ip,a.port),c={ChanId:e.channelName,ChanSId:e._sessionId,UserId:e.uid,UserSId:e._joinInfo.sid,SdkVer:m.SDK_VERSION,VCodec:e._config.codec,ACodec:"opus",Role:e._config.role},[4,e._gateway.connectCTS(c).catch((function(e){S.error("CONNECT_GATEWAY_ERROR",e)}))]);case 3:if(r=l.sent())return t(r),[3,5];l.label=4;case 4:return o=i.next(),[3,2];case 5:return[3,8];case 6:return s=l.sent(),u={error:s},[3,8];case 7:try{o&&!o.done&&(f=i.return)&&f.call(i)}finally{if(u)throw u.error}return[7];case 8:return r||(Date.now()-e._gateway._connectBeginTime<m.GATEWAY_ERTRY_TIMEOUT?e._connectMediaServer():e.emit("connection-state-change","DISCONNECTING",e._gateway._revState,d.NETWORK_ERROR)),[3,9];case 9:return[2]}}))}))}))]}))}))}}),Object.defineProperty(t.prototype,"join",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var i=this,o=this;return new Promise((function(a,c){return or(i,void 0,void 0,(function(){var i,s,u,f,l,d,p,h;return ar(this,(function(m){switch(m.label){case 0:if("string"!=typeof e)throw new TypeError("appid must be string.");if(""===e)throw new TypeError("appid can not be empty.");if(o._appId=e,i=/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/,"string"!=typeof t)throw new TypeError("channel must be string.");if(!i.test(t))throw new I(v.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,");if(o.channelName=t,s=/^[a-zA-Z0-9]{1,48}$/,""!==n&&null!=n&&!s.test(n))throw new I(v.INVALID_PARAMS,"The length must be within 48 bytes. The supported characters: a-z,A-Z,0-9");return o._joinInfo.sid=w(64),[4,P.joinGateway({sid:o._joinInfo.sid,appId:o._appId,cname:o.channelName,uid:n||"",token:r||"",extend:"",proxyServer:""})];case 1:return u=m.sent(),0!==u.code?[3,3]:(f=u.uid,l=u.session_id,d=u.addresses,l&&(o._sessionId=l),p=d.filter((function(e){return 0===e.type})),o._msPub=p,h=d.filter((function(e){return 1===e.type})),o._msSub=h,[4,o._connectMediaServer()]);case 2:f=m.sent(),o.uid=f,Object.assign(o._joinInfo,{apResponse:u,clientId:o._clientId,appId:o._appId,cname:o.channelName,uid:o.uid,turnServer:{},proxyServer:void 0,token:r||o._appId,useProxyServer:!1,startTime:Date.now()}),a(f),m.label=3;case 3:return c("join-gateway failure"),[2]}}))}))}))}}),Object.defineProperty(t.prototype,"leave",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return new Promise((function(t,r){e._gateway.doOffline(e._joinInfo.sid),e._gateway.disconnectCTS(),e._gateway=void 0,e.remoteUsers.map((function(e,t){e._mediaStream&&e._mediaStream.destory(),e.videoTrack&&e.videoTrack.stop(),e.videoTrack=void 0,e.audioTrack&&e.audioTrack.stop(),e.audioTrack=void 0})),e.remoteUsers=[],e._highStream&&(e.unpublish(),e._highStream.destory()),e._isDualStreamEnabled&&(e.disableDualStream(),e._lowStream&&e._lowStream.destory())}))}}),Object.defineProperty(t.prototype,"publish",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return or(this,void 0,void 0,(function(){var t,r,n,i,o,a,c,s,u;return ar(this,(function(f){switch(f.label){case 0:if(t=this,Array.isArray(e)||(e=[e]),0===e.length)throw new I(v.INVALID_PARAMS,"track list is empty");if("live"===t._config.mode&&"audience"===t._config.role)throw new I(v.INVALID_OPERATION,"audience can not publish stream");return r=t._highStream||{},n=r.videoTrack,i=r.audioTrack,[4,t._publishHighStream(e)];case 1:return o=f.sent(),a=o.videoTrack,c=o.audioTrack,s=!!a,u=!!c,t._publishState===Mt.UN_PUBLISH?(t._publishState=Mt.PUBLISH,t._gateway.doPublish({LocalAudioEnable:u,LocalVideoEnable:s,LocalAudioMute:!!u&&c.isMuted,LocalVideoMute:!!s&&a.isMuted})):t._publishState===Mt.PUBLISH&&(u===!!i&&s===!!n||t._gateway.doRePublish({LocalAudioEnable:u,LocalVideoEnable:s,LocalAudioMute:!!u&&c.isMuted,LocalVideoMute:!!s&&a.isMuted})),[2]}}))}))}}),Object.defineProperty(t.prototype,"unpublish",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return or(this,void 0,void 0,(function(){var t,r,n,i,o,a,c;return ar(this,(function(s){switch(s.label){case 0:if(!(t=this)._highStream)throw new I(v.INVALID_OPERATION,"You haven't published track yet");return r=this._highStream,n=r.videoTrack,i=r.audioTrack,[4,t._highStream.removeTracks(e)];case 1:if(s.sent(),o=t._highStream,a=o.videoTrack,c=o.audioTrack,a||c){if(!Array.isArray(e))throw new I(v.INVALID_PARAMS,"tracks must be Array");i&&!c&&t._gateway.enableLocalAudio(!1),n&&!a&&(t._gateway.enableLocalVideo(!1),t._isDualStreamEnabled&&t.disableDualStream())}else t._highStream.destory(),t._highStream=void 0,t._gateway.doUnPublish(),t._publishState=Mt.UN_PUBLISH;return[2]}}))}))}}),Object.defineProperty(t.prototype,"subscribe",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;return new Promise((function(n,i){var o=r.remoteUsers.find((function(t){return t.uid===e.uid}));if(!o)throw new I("user "+e.uid+" is not find");if("video"===t&&!o.hasVideo||"audio"===t&&!o.hasAudio)throw new I(v.INVALID_OPERATION,"the remote user ["+e.uid+"] has not been published "+t+" track");var a=o.hasVideo,c=o.hasAudio,s=!1,u=!1,f="";switch(t){case"video":s=!!a,f="video";break;case"audio":u=!!c,f="audio";break;case"all":default:s=!!a,u=!!c,f="all"}o.videoTrack||o.audioTrack?("all"!==f&&"video"!==f||o.videoTrack||(o.videoTrack=o._mediaStream.addTracks("video")),"all"!==f&&"audio"!==f||o.audioTrack||(o.audioTrack=o._mediaStream.addTracks("audio")),r._gateway.setAVStatus(e.uid,o.hasAudio,o.hasVideo),n()):(r._gateway.doSubscribe({StreamId:e.uid,SvrIp:r._msSub[0].ip,SvrPort:r._msSub[0].port,RecvAudio:u,RecvVideo:s,StrmType:o._subStreamType,PubSessId:o._pubSid}),r._onSubscribeSuccess=function(){s&&(o.videoTrack=o._mediaStream.addTracks("video")),u&&(o.audioTrack=o._mediaStream.addTracks("audio")),n()})}))}}),Object.defineProperty(t.prototype,"_unsubscribe",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.remoteUsers.find((function(t){return t.uid===e.uid}));if(!r)throw new I("user "+r.uid+" is not find");var n=r.hasVideo,i=r.hasAudio;return void 0!==t&&"all"!==t&&"video"!==t||!n||(r.videoTrack.stop(),r.videoTrack=void 0,r.hasVideo=!1,r._res=0),void 0!==t&&"all"!==t&&"audio"!==t||!i||(r.audioTrack.stop(),r.audioTrack=void 0,r.hasAudio=!1),this._calculate(),this._setAVStatsRepTimer(),r}}),Object.defineProperty(t.prototype,"unsubscribe",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;return new Promise((function(n,i){var o=r._unsubscribe(e,t);o._subAudio||o._subVideo?r._gateway.setAVStatus(o.uid,o._subAudio,o._subVideo):(r._gateway.doUnSubscribe(o.uid),o._mediaStream.closePC())}))}}),Object.defineProperty(t.prototype,"setLowStreamParameter",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!e)throw new I(v.INVALID_PARAMS,"streamParameter must be object");if(this._isDualStreamEnabled){var t={};e.framerate&&(t.frameRate=e.framerate),e.height&&(t.height=e.height),e.width&&(t.width=e.width),this._highStream.exVideoStreamTrack.applyConstraints(t)}}}),Object.defineProperty(t.prototype,"enableDualStream",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return new Promise((function(t,r){!0!==e._isDualStreamEnabled?(e._isDualStreamEnabled=!0,e._publishLowStream(),e._gateway.doPublishS(),e._gateway.enableDualStream(!0)):S.warning(v.INVALID_OPERATION,"Already enabled.")}))}}),Object.defineProperty(t.prototype,"disableDualStream",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return new Promise((function(t,r){!1!==e._isDualStreamEnabled?(e._isDualStreamEnabled=!1,e._highStream.closeExPC(),e._gateway.doUnPublishS(),e._gateway.enableDualStream(!1)):S.warning(v.INVALID_OPERATION,"Already disabled.")}))}}),Object.defineProperty(t.prototype,"setParameters",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return or(this,void 0,void 0,(function(){var t,r,n;return ar(this,(function(i){return this,(t=e.ConfPriCloudAddr)&&(r=t.ServerAdd,n=t.Port,r&&(m.GATEWAY_ADDRESS="http://"+r+(n?":"+n:""))),[2]}))}))}}),Object.defineProperty(t.prototype,"setClientRole",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return or(this,void 0,void 0,(function(){var t;return ar(this,(function(r){if("rtc"===(t=this)._config.mode)throw S.warning("rtc mode can not use setClientRole"),new I(v.INVALID_OPERATION,"rtc mode can not use setClientRole");if("audience"===e&&t._highStream)throw new I(v.INVALID_OPERATION,"can not set client role to audience when publishing stream");return e!==t._config.role&&t._gateway.setClientRole(e),[2]}))}))}}),Object.defineProperty(t.prototype,"setProxyServer",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"setTurnServer",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"startProxyServer",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"stopProxyServer",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"setRemoteVideoStreamType",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;return new Promise((function(n,i){var o=r.remoteUsers.find((function(t){return t.uid===e}));if(o||S.warning("can not find remote user "+e),"number"!=typeof t)throw new I(v.INVALID_PARAMS,"streamType must be number");(null==o?void 0:o.hasVideo)&&o._subVideo?(r._gateway.setRemoteVStrmType(e,t),r.emit("stream-type-changed",e,t)):o._subStreamType=t}))}}),Object.defineProperty(t.prototype,"setStreamFallbackOption",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return new Promise((function(e,t){}))}}),Object.defineProperty(t.prototype,"setEncryptionConfig",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){}}),Object.defineProperty(t.prototype,"renewToken",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return new Promise((function(e,t){}))}}),Object.defineProperty(t.prototype,"enableAudioVolumeIndicator",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"getRTCStats",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._joinInfo.startTime,t=Date.now()-e,r=0;return r="live"===this._config.mode?1:this.remoteUsers.length+1,{Duration:Math.ceil(t/1e3),OutgoingAvailableBandwidth:0,RTT:0,RecvBitrate:0,RecvBytes:0,SendBitrate:0,SendBytes:0,UserCount:r}}}),Object.defineProperty(t.prototype,"setLiveTranscoding",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return new Promise((function(e,t){}))}}),Object.defineProperty(t.prototype,"startLiveStreaming",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return new Promise((function(e,t){}))}}),Object.defineProperty(t.prototype,"stopLiveStreaming",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return new Promise((function(e,t){}))}}),Object.defineProperty(t.prototype,"addInjectStreamUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return new Promise((function(e,t){}))}}),Object.defineProperty(t.prototype,"removeInjectStreamUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(){return new Promise((function(e,t){}))}}),Object.defineProperty(t.prototype,"startChannelMediaRelay",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return new Promise((function(e,t){}))}}),Object.defineProperty(t.prototype,"updateChannelMediaRelay",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return new Promise((function(e,t){}))}}),Object.defineProperty(t.prototype,"stopChannelMediaRelay",{enumerable:!1,configurable:!0,writable:!0,value:function(){return new Promise((function(e,t){}))}}),Object.defineProperty(t.prototype,"_publishHighStream",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return or(this,void 0,void 0,(function(){var t;return ar(this,(function(r){if((t=this)._joinInfo&&"CONNECTED"===t.connectionState)return t._highStream?(t._highStream.addTracks(e),[2,t._highStream]):(t._highStream=new $t(t.uid),t._highStream.addTracks(e),[2,t._highStream]);throw new I(v.INVALID_OPERATION,"Can't publish stream when connection state is not connected")}))}))}}),Object.defineProperty(t.prototype,"_publishLowStream",{enumerable:!1,configurable:!0,writable:!0,value:function(){return or(this,void 0,void 0,(function(){var e;return ar(this,(function(t){if((e=this)._joinInfo&&"CONNECTED"===e.connectionState){if(!e._highStream||!e._highStream.videoTrack)throw new I(v.INVALID_OPERATION,"Can't publish low stream cause of you did not publish high stream");return e._lowStream=new Zt(e.uid),e._lowStream.addTracks(e._highStream.videoTrack),[2,e._lowStream]}throw new I(v.INVALID_OPERATION,"Can't publish stream when connection state is not connected")}))}))}}),Object.defineProperty(t.prototype,"_createLiveStreamingClient",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_createChannelMediaRelayClient",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_handleDeviceEvents",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_handleRVChange",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_calculate",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=[],t=0,r=this.remoteUsers.filter((function(e){return e.audioTrack||e.videoTrack}));if(!(r.length<1)){r.map((function(r){e.push(r._res),r.hasAudio&&r.audioTrack&&t++}));var n=e.reduce((function(e,t){return e+t})),i={audioNumber:t,videoSize:n};i!==this._latestRepInfo&&(this._latestRepInfo=i,this._repRes())}}}),Object.defineProperty(t.prototype,"_repRes",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._latestRepInfo,t=e.videoSize,r=e.audioNumber;this._gateway&&this._gateway.ReportAVStat({AudNum:r,VidSize:t})}}),Object.defineProperty(t.prototype,"_setAVStatsRepTimer",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;e._clearAVStatsRepTimer(),e._AVStatsControlls=setInterval((function(){e._calculate()}),1e4)}}),Object.defineProperty(t.prototype,"_clearAVStatsRepTimer",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._AVStatsControlls&&clearInterval(this._AVStatsControlls)}}),Object.defineProperty(t.prototype,"_handleGatewayEvents",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;e._gateway||(e._gateway=new C),e._gateway.handleGateWayEvent=function(t,r){var n=r.Code;switch(t){case"connection-state-change":var i=r.curState,o=r.revState,a=r.reason;e.connectionState=i,e.emit("connection-state-change",i,o,a);break;case R.ON_PUBLISH:if(0===n){r.StreamId;var c=r.Offer;e._highStream.peer.createAnswer(c),e._isDualStreamEnabled&&(e._publishLowStream(),e._gateway.doPublishS(),e._gateway.enableDualStream(!0))}break;case R.ON_RE_PUBLISH:if(0===n){r.StreamId,c=r.Offer;e._highStream.peer.createAnswer(c,!0)}break;case R.ON_PUBLISH_EX:if(0===n){r.StreamId,c=r.Offer;e._lowStream.peer.createAnswer(c)}break;case R.ON_SUBSCRIBE:if(0===n){var s,u=r.StreamId;c=r.Offer;if(u===e.uid)s=e._highStream.peer;else{var f=e.remoteUsers.find((function(e){return e.uid===u}));f||S.warning("can not find remote user "+u),s=f._mediaStream.peer}s.createAnswer(c)}break;case R.ON_ICE:var l=r.StreamId,d=r.Sdp,p=r.SubStream,h=void 0;if(l===e.uid)h=e._highStream.peer,p&&(h=e._lowStream.peer);else{var v=e.remoteUsers.find((function(e){return e.uid===l}));v||S.warning("can not find remote user "+l),h=v._mediaStream.peer}h.setIceCandidate(d);break;case R.ON_CHANNEL_MESSAGE:var m=r.Cmd;if(m===R.ON_CHANNEL_USER_ONLINE){var b={audioMuted:!1,videoMuted:!1,hasAudio:!1,hasVideo:!1,uid:r.UserId};e.remoteUsers.push(b),e.emit("user-joined",b)}else if(m===R.ON_CHANNEL_USER_OFFLINE){var y=r.UserId,g=r.Reason,_=e.remoteUsers.find((function(t,r){return t.uid===y&&e.remoteUsers.splice(r,1),t.uid===y}));if(_){var E="";switch(g){case"Dropped":case"Offline":E="Quit";break;case"BecomeAudience":E="BecomeAudience"}e.emit("user-left",_,E)}}else if(m===R.ON_CHANNEL_SET_USER_ROLE)r.AppId,r.UserId,r.Code,r.Role,r.ChanId;else if(m===R.ON_CHANNEL_DUALSTREAM_ENABLE){var T=r.UserId,O=r.Enable;e.remoteUsers.find((function(e){return e.uid===T}))._dualStream=O}else if(m===R.ON_CHANNEL_USER_STREAM_OPEN){var C=r.UserId,P=(r.StreamId,r.PubSessionId),N=r.DualStream,A=r.LocalAudioEnable,k=r.LocalVideoEnable,D=r.LocalAudioMute,x=r.LocalVideoMute,j=e.remoteUsers.find((function(e){return e.uid===C}));if(void 0!==j){var M=A,L=k;Object.assign(j,{audioMuted:D,videoMuted:x,hasAudio:M,hasVideo:L,_pubSid:P,_mediaStream:new nr(C),_dualStream:N,_subStreamType:0,_res:0});var U=M&&L?"all":L?"video":"audio";e.emit("user-published",j,U)}}else if(m===R.ON_CHANNEL_USER_STREAM_CLOSE){var F=r.UserId,V=(r.StreamId,P=r.PubSessionId,e.remoteUsers.find((function(e,t){return e.uid===F})));if(null!=V)e._unsubscribe(V,"all"),V._mediaStream.closePC(),e.emit("user-unpublished",V,"all")}else if(m===R.ON_CHANNEL_USER_ENABLE_VIDEO){var G=r.UserId,B=(O=r.Enable,e.remoteUsers.find((function(e){return e.uid===G})));if(!B)throw new I("user "+G+" is not find");if(O){if(!B._subVideo){B.hasVideo=!0,B._subVideo=!0,e._gateway.setAVStatus(G,B.hasAudio,B.hasVideo),B.videoTrack=new W(B._videoTrack,w(5));U=B._subAudio&&B._subVideo?"all":B._subAudio?"video":"audio";e.emit("user-published",B,U)}}else e._unsubscribe(B,"video"),e._gateway.setAVStatus(G,B.hasAudio,B.hasVideo),S.info("stream removed with uid "+G);e._calculate(),e._setAVStatsRepTimer()}else if(m===R.ON_CHANNEL_USER_ENABLE_AUDIO){var H=r.UserId,Y=(O=r.Enable,e.remoteUsers.find((function(e){return e.uid===H})));if(!Y)throw new I("user "+H+" is not find");if(O){if(!Y.hasAudio){Y.hasAudio=!0,Y.audioTrack=Y._mediaStream.addTracks("audio");U=Y._subAudio&&Y._subVideo?"all":Y._subAudio?"video":"audio";e.emit("user-published",Y,U)}}else e._unsubscribe(Y,"audio"),e._gateway.setAVStatus(H,Y.hasAudio,Y.hasVideo);e._calculate(),e._setAVStatsRepTimer()}else if(m===R.ON_CHANNEL_USER_MUTE_VIDEO){var K=r.UserId,z=r.Mute,J=e.remoteUsers.find((function(e){return e.uid===K}));J.videoMuted=z,e.emit("user-mute-updated",J)}else if(m===R.ON_CHANNEL_USER_MUTE_AUDIO){var X=r.UserId,q=(z=r.Mute,e.remoteUsers.find((function(e){return e.uid===X})));q.audioMuted=z,e.emit("user-mute-updated",q)}}}}}),Object.defineProperty(t.prototype,"_handleTrackEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;At.handleTrackEvent=function(t,r){var n=t.streamId,i=t.peerType,o=t.trackMediaType,a=t.eventName;if(a===R.UPDATE_MUTE_STATE)"pub"===i&&("audio"===o?e._gateway.muteLocalAudioStream(r):"video"===o&&e._gateway.muteLocalVideoStream(r));else if(a===R.TRACK_ENDED);else if(a===R.FIRST_FRAME_DECODED);else if(a===R.VIDEO_SIZE_CHANGE){var c=e.remoteUsers.find((function(e){return e.uid===n}));c._res!==r&&(c._res=r,e._calculate(),e._setAVStatsRepTimer())}}}}),Object.defineProperty(t.prototype,"_handlePeerConnectionEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;At.handlePeerConnectionEvent=function(t,r,n,i){if(n===R.ICE_CANDIDATE)e._gateway.sendIceCandidate(t,i,"pubEx"===r||null);else if(n===R.CREATE_ANSWER)e._gateway.sendAnswer(t,i,"pubEx"===r||null);else if(n===R.TRACK_ADDED){e.remoteUsers.find((function(e){return e.uid===t}))._mediaStream;e._onSubscribeSuccess&&e._onSubscribeSuccess()}}}}),t}(T),lr=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dr=function(e){function t(t,r){var n=e.call(this)||this;return Object.defineProperty(n,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"startPlayTime",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"startPlayOffset",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"pausePlayTime",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"currentLoopCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"audioBuffer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"options",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(n,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"sourceNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"mediaStreamDestination",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_currentState",{enumerable:!0,configurable:!0,writable:!0,value:"stopped"}),n.id=r,n.context=Lt.getAudioContextInstance(),n.mediaStreamDestination=n.context.createMediaStreamDestination(),n.audioBuffer=t,n.startPlayOffset=n.options.startPlayTime||0,n}return lr(t,e),Object.defineProperty(t.prototype,"getAudioTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.mediaStreamDestination.stream.getAudioTracks()[0]}}),Object.defineProperty(t.prototype,"updateOptions",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"stopped"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):S.warning("can not set audio source options")}}),Object.defineProperty(t.prototype,"startProcessAudioBuffer",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}}),Object.defineProperty(t.prototype,"pauseProcessAudioBuffer",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}}),Object.defineProperty(t.prototype,"seekAudioBuffer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=e))}}),Object.defineProperty(t.prototype,"resumeProcessAudioBuffer",{enumerable:!1,configurable:!0,writable:!0,value:function(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}}),Object.defineProperty(t.prototype,"stopProcessAudioBuffer",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(e){}this.reset()}}}),Object.defineProperty(t.prototype,"startSourceNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}}),Object.defineProperty(t.prototype,"createSourceNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.mediaStreamDestination),e}}),Object.defineProperty(t.prototype,"handleSourceNodeEnded",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}}),Object.defineProperty(t.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}),Object.defineProperty(t.prototype,"currentState",{get:function(){return this._currentState},set:function(e){e!==this._currentState&&(this._currentState=e,this.emit(R.AUDIO_SOURCE_STATE_CHANGE,this._currentState))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.audioBuffer.duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:(this.context.currentTime-this.startPlayTime+this.startPlayOffset)%this.audioBuffer.duration},enumerable:!0,configurable:!0}),t}(T),pr=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hr=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},vr=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};!function(e){e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND"}(sr||(sr={})),function(e){e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(ur||(ur={}));var mr,br=function(e){function t(){var t=e.call(this)||this;Object.defineProperty(t,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"deviceInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map});var r=t;return r.init().then((function(){navigator.mediaDevices&&navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",r.updateDevicesInfo.bind(r)),window.setInterval(r.updateDevicesInfo.bind(r),5e3)})),t}return pr(t,e),Object.defineProperty(t.prototype,"enumerateDevices",{enumerable:!1,configurable:!0,writable:!0,value:function(){return function(){return hr(this,void 0,void 0,(function(){return vr(this,(function(e){switch(e.label){case 0:return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?[4,navigator.mediaDevices.enumerateDevices().catch((function(e){new I(v.ENUMERATE_DEVICES_FAILED,e.toString())}))]:[3,2];case 1:return[2,e.sent()||[]];case 2:throw new I(v.NOT_SUPPORT,"enumerateDevices() not supported.")}}))}))}()}}),Object.defineProperty(t.prototype,"getRecordingDevices",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return function(){return hr(this,void 0,void 0,(function(){var t;return vr(this,(function(r){switch(r.label){case 0:return[4,e.enumerateDevices()];case 1:return void 0!==(t=r.sent())?[2,t.filter((function(e){return"audioinput"===e.kind}))]:[2]}}))}))}()}}),Object.defineProperty(t.prototype,"getPlayoutDevices",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return function(){return hr(this,void 0,void 0,(function(){var t;return vr(this,(function(r){switch(r.label){case 0:return[4,e.enumerateDevices()];case 1:return void 0!==(t=r.sent())?[2,t.filter((function(e){return"audiooutput"===e.kind}))]:[2]}}))}))}()}}),Object.defineProperty(t.prototype,"getCamerasDevices",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return function(){return hr(this,void 0,void 0,(function(){var t;return vr(this,(function(r){switch(r.label){case 0:return[4,e.enumerateDevices()];case 1:return void 0!==(t=r.sent())?[2,t.filter((function(e){return"videoinput"===e.kind}))]:[2]}}))}))}()}}),Object.defineProperty(t.prototype,"searchDeviceNameById",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.deviceInfoMap.get(e);return t?t.device.label||t.device.deviceId:null}}),Object.defineProperty(t.prototype,"getDeviceById",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;return function(){return hr(this,void 0,void 0,(function(){var r,n;return vr(this,(function(i){switch(i.label){case 0:return[4,t.enumerateDevices()];case 1:if(r=i.sent(),!(n=r.find((function(t){return t.deviceId===e}))))throw new I(v.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return[2,n]}}))}))}()}}),Object.defineProperty(t.prototype,"getVideoCameraIdByLabel",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;return function(){return hr(this,void 0,void 0,(function(){var r,n;return vr(this,(function(i){switch(i.label){case 0:return[4,t.enumerateDevices()];case 1:if(r=i.sent(),!(n=r.find((function(t){return"videoinput"===t.kind&&t.label===e}))))throw new I(v.DEVICE_NOT_FOUND,"camera label: ".concat(e));return[2,n.deviceId]}}))}))}()}}),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return function(){return hr(this,void 0,void 0,(function(){return vr(this,(function(t){switch(t.label){case 0:return e.state=sr.INITING,[4,e.updateDevicesInfo().catch((function(t){e.state=sr.IDLE}))];case 1:return t.sent(),e.state=sr.INITEND,[2]}}))}))}()}}),Object.defineProperty(t.prototype,"updateDevicesInfo",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return function(){return hr(this,void 0,void 0,(function(){var t,r,n;return vr(this,(function(i){switch(i.label){case 0:return[4,e.enumerateDevices()];case 1:return t=i.sent(),r=Date.now(),n=[],t.forEach((function(t){var i=e.deviceInfoMap.get(t.deviceId);if("ACTIVE"!==(i?i.state:"INACTIVE")){var o={initAt:r,updateAt:r,device:t,state:"ACTIVE"};n.push(o),e.deviceInfoMap.set(t.deviceId,o)}i&&(i.updateAt=r)})),e.deviceInfoMap.forEach((function(e){"ACTIVE"===e.state&&e.updateAt!==r&&(e.state="INACTIVE",n.push(e))})),e.state!==sr.INITEND?[2]:(n.forEach((function(t){switch(t.device.kind){case"audioinput":e.emit(ur.RECORDING_DEVICE_CHANGED,t);break;case"videoinput":e.emit(ur.CAMERA_DEVICE_CHANGED,t);break;case"audiooutput":e.emit(ur.PLAYOUT_DEVICE_CHANGED,t)}})),[2])}}))}))}()}}),t}(T),yr=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),gr=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},_r=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},Sr=function(e){function t(t,r,n,i){var o=e.call(this,t,r||{},i)||this;return Object.defineProperty(o,"_deviceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_constraints",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),o._deviceName="default",o._config=r||{},o._constraints=n,o._config&&(o._config.cameraId&&(o._deviceName=(new br).searchDeviceNameById(o._config.cameraId)||"default"),o._config.encoderConfig&&(o._encoderConfig=o._config.encoderConfig)),o}return yr(t,e),Object.defineProperty(t.prototype,"getStats",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"setDevice",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return gr(this,void 0,void 0,(function(){var t,r,n,i,o;return _r(this,(function(a){switch(a.label){case 0:return t=this,[4,(new br).getDeviceById(e)];case 1:return r=a.sent(),(n={}).video=t._constraints,n.video.deviceId=e,[4,at(n,t.getTrackId())];case 2:return i=a.sent(),[4,t._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!0)];case 3:return a.sent(),[4,ct(t._originMediaStreamTrack)];case 4:return o=a.sent(),t._videoWidth=o[0],t._videoWidth=o[1],t._deviceName=r.label,[2]}}))}))}}),Object.defineProperty(t.prototype,"setEncoderConfiguration",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return gr(this,void 0,void 0,(function(){var t,r,n,i;return _r(this,(function(o){switch(o.label){case 0:if(t=this,!e)throw new I("");return r=st(e),t._config.encoderConfig=r,[4,ft(t._config)];case 1:return n=o.sent(),[4,t._originMediaStreamTrack.applyConstraints(n)];case 2:return o.sent(),[4,ct(t._originMediaStreamTrack)];case 3:return i=o.sent(),t._videoWidth=i[0],t._videoHeight=i[1],t._constraints=n,t._encoderConfig=t._config.encoderConfig,t.emit(R.RTC_NEED_RENEGOTIATE),[2]}}))}))}}),t}(zt),Er=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tr=function(e){function t(t,r,n,i){var o=e.call(this,r.getAudioTrack(),n,i)||this;return Object.defineProperty(o,"_bufferSource",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),o._bufferSource=r,o._bufferSource.on(R.AUDIO_SOURCE_STATE_CHANGE,(function(e){o.emit(R.AUDIO_SOURCE_STATE_CHANGE,e)})),o}return Er(t,e),Object.defineProperty(t.prototype,"getCurrentTime",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._bufferSource.currentTime}}),Object.defineProperty(t.prototype,"getStats",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"startProcessAudioBuffer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}}),Object.defineProperty(t.prototype,"pauseProcessAudioBuffer",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._bufferSource.pauseProcessAudioBuffer()}}),Object.defineProperty(t.prototype,"seekAudioBuffer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._bufferSource.seekAudioBuffer(e)}}),Object.defineProperty(t.prototype,"resumeProcessAudioBuffer",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._bufferSource.resumeProcessAudioBuffer()}}),Object.defineProperty(t.prototype,"stopProcessAudioBuffer",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._bufferSource.stopProcessAudioBuffer()}}),Object.defineProperty(t.prototype,"currentState",{get:function(){return this._bufferSource.currentState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._bufferSource.duration},enumerable:!0,configurable:!0}),t}(Gt),wr=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Or=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},Cr=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},Pr=function(e){function t(t,r,n,i){var o=e.call(this,t,r?ut(r):{},i)||this;return Object.defineProperty(o,"_deviceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_constraints",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),o._deviceName="default",o._config=r,o._constraints=n,r&&(r.microphoneId&&(o._deviceName=(new br).searchDeviceNameById(r.microphoneId)||"default"),o._config.encoderConfig&&(o._encoderConfig=o._config.encoderConfig)),o}return wr(t,e),Object.defineProperty(t.prototype,"setDevice",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return Or(this,void 0,void 0,(function(){var t,r,n,i;return Cr(this,(function(o){switch(o.label){case 0:return t=this,[4,(new br).getDeviceById(e)];case 1:return r=o.sent(),(n={}).audio=t._constraints,n.audio.deviceId=e,[4,at(n,t.getTrackId())];case 2:return i=o.sent(),[4,t._updateOriginMediaStreamTrack(i.getAudioTracks()[0],!0)];case 3:return o.sent(),t._deviceName=r.label,[2]}}))}))}}),t}(Gt),Rr=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},Ir=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};!function(e){var t=this;e.player=G,S.use((function(e,t){m.UPLOAD_LOG,t()}));var r=new br;r.on("recordingDeviceChanged",(function(t){S.info("recordingDeviceChanged ",t),e.onMicrophoneChanged&&e.onMicrophoneChanged(t)})),r.on("cameraDeviceChanged",(function(t){S.info("cameraDeviceChanged ",t),e.onCameraChanged&&e.onCameraChanged(t)})),e.onCameraChanged=function(){},e.onMicrophoneChanged=function(){},e.onAudioAutoplayFailed=function(){},e.VERSION=m.SDK_VERSION,e.createClient=function(e){void 0===e&&(e={codec:"h264",mode:"rtc"});try{["h264"].includes(e.codec),["rtc","live"].includes(e.mode)}catch(e){throw e}return new fr(e)},e.createCameraVideoTrack=function(e){return Rr(t,void 0,void 0,(function(){var t,r,n;return Ir(this,(function(i){switch(i.label){case 0:return[4,ft(t=null!=e?e:{})];case 1:return[4,at({video:r=i.sent()})];case 2:return n=i.sent(),[2,new Sr(n.getVideoTracks()[0],t,r,w(5))]}}))}))},e.createMicrophoneAudioTrack=function(e){return Rr(t,void 0,void 0,(function(){var t,r,n,i;return Ir(this,(function(o){switch(o.label){case 0:return r=function(e){var t={};if(Z.isLegacyChrome()||(void 0!==e.AGC&&(t.autoGainControl=e.AGC,Z.isChrome&&(t.googAutoGainControl=e.AGC,t.googAutoGainControl2=e.AGC)),void 0!==e.AEC&&(t.echoCancellation=e.AEC),void 0!==e.ANS&&(t.noiseSuppression=e.ANS,Z.isChrome&&(t.googNoiseSuppression=e.ANS))),e.encoderConfig){var r=ut(e.encoderConfig);t.channelCount=r.stereo?2:1,t.sampleRate=r.sampleRate,t.sampleSize=r.sampleSize}return t}(t=null!=e?e:{}),n=null,[4,at({audio:r})];case 1:return i=o.sent(),n=i.getAudioTracks()[0],[2,new Pr(n,t,r,w(5))]}}))}))},e.createMicrophoneAndCameraTracks=function(r,n){return Rr(t,void 0,void 0,(function(){var t,i;return Ir(this,(function(o){switch(o.label){case 0:return[4,e.createMicrophoneAudioTrack(r)];case 1:return t=o.sent(),[4,e.createCameraVideoTrack(n)];case 2:return i=o.sent(),[2,[t,i]]}}))}))},e.createScreenVideoTrack=function(e,r){return Rr(t,void 0,void 0,(function(){var t,n,i,o,a,c,s,u,f,l,d;return Ir(this,(function(p){switch(p.label){case 0:return n=lt(t=null!=e?e:{}),(i={}).screen=n,o=Z.getBrowserInfo(),r&&("Chrome"===o.name&&73<=Number(o.version)?i.screenAudio=r:(r=!1,S.error(v.NOT_SUPPORT,"your browser or platform is not support share-screen with audio"))),[4,at(i)];case 1:return a=p.sent(),c=null===(l=a)||void 0===l?void 0:l.getVideoTracks()[0],s=null===(d=a)||void 0===d?void 0:d.getAudioTracks()[0],r&&!s&&S.warning("you didn't check Share audio in the pop-up window when sharing the screen"),u=new zt(c,t,w(5)),f=null,s&&(f=new Gt(s,t,w(5))),[2,f?[u,f]:u]}}))}))},e.createBufferSourceAudioTrack=function(r){return Rr(t,void 0,void 0,(function(){var t,n,i,o,a;return Ir(this,(function(c){switch(c.label){case 0:return t=r.source,r.cacheOnlineFile,n=r.encoderConfig,[4,e.AudioManager.decodeAsAudioBuffer(t)];case 1:return i=c.sent(),o=w(5),a=new dr(i,o),[2,new Tr(t,a,n||{},o)]}}))}))},e.disableLogUpload=function(){m.UPLOAD_LOG=!1},e.enableLogUpload=function(){m.UPLOAD_LOG=!0},e.setLogLevel=function(e){S.setLogLevel(e,"ArRTC")},e.getCameras=function(){return r.getCamerasDevices()},e.getDevices=function(){return r.enumerateDevices()},e.getElectronScreenSources=function(){return new Promise((function(e,t){e([])}))},e.getMicrophones=function(){return r.getRecordingDevices()},e.checkSystemRequirements=function(){var e=window.RTCPeerConnection,t=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,r=window.WebSocket,n=e&&t&&r,i=!1,o=Z.getBrowserInfo();return"Chrome"===o.name&&58<=Number(o.version)&&o.os!==s.IOS&&(i=!0),"Firefox"===o.name&&56<=Number(o.version)&&(i=!0),"OPR"===o.name&&45<=Number(o.version)&&(i=!0),"Safari"===o.name&&11<=Number(o.version)&&(i=!0),"Edge"===o.name&&(i=!0),"MicroMessenger"!==Z.getBrowserInfo().name&&"QQBrowser"!==Z.getBrowserInfo().name||o.os===s.IOS||(i=!0),S.debug("checkSystemRequirements, api:",n,"browser",i),n&&i},e.createChannelMediaRelayConfiguration=function(){return""},e.getSupportedCodec=function(){return Rr(t,void 0,void 0,(function(){var t,r,n,i,o;return Ir(this,(function(a){switch(a.label){case 0:return e.checkSystemRequirements()?[3,1]:(t="Webrtc is not currently supported in browsers",S.error(t),[2,Promise.reject(t)]);case 1:return(r=new RTCPeerConnection({iceServers:[]})).addTransceiver("video"),r.addTransceiver("audio"),[4,r.createOffer()];case 2:return n=a.sent(),r.close(),i={video:[],audio:[]},(o=n.sdp).match(/ VP8/i)&&i.video.push("VP8"),o.match(/ H264/i)&&i.video.push("H264"),o.match(/ opus/i)&&i.audio.push("OPUS"),[2,i]}}))}))},e.AudioManager=Lt}(mr||(mr={}));t.default=mr}]).default}));